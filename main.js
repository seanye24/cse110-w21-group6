(()=>{"use strict";const t=(t,e={},n={})=>{const{namespace:s}=n;let i;return i=s?document.createElementNS(s,t):document.createElement(t),Object.entries(e).forEach((([t,e])=>{s||!(t in i)?i.setAttribute(t,e):i[t]=e})),i},e=t=>{const e=parseInt(t,10);return Number.isNaN(e)?null:e};class n extends HTMLElement{static get observedAttributes(){return["title","description"]}constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .container {\n        background: lightblue;\n        font-family: Roboto, sans-serif;\n        margin: 1em;\n        padding: 0.5em;\n        position: relative;\n        border-radius: 5px;\n      }\n\n      .title {\n        font-size: 1.25rem;\n      }\n\n      .description {\n        font-size: 1rem;\n        color: darkgray;\n      }\n\n      .task-button {\n        position: absolute;\n        padding: 0.5em;\n        color: rgba(51, 51, 51, 0.5);\n      }\n\n      .task-button:hover {\n        border-radius: 50%;\n        background: rgba(238, 238, 238, 0.5);\n        color: rgba(51, 51, 51, 1);\n        cursor: pointer;\n      }\n\n      #edit-button {\n        display: none;\n      }\n\n      .container:hover > #edit-button {\n        display: initial;\n        top: 0;\n        right: 0;\n      }\n\n      #finish-button {\n        bottom: 0;\n        right: 1.5em;\n      }\n\n      #delete-button {\n        bottom: 0;\n        right: 0;\n      }\n    ",this.materialIconLinkElement=t("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),this.containerElement=t("div",{className:"container"}),this.titleElement=t("h1",{className:"title"}),this.descriptionElement=t("h2",{className:"description"}),this.editTaskButton=t("span",{className:"material-icons task-button",id:"edit-button",innerText:"mode"}),this.finishTaskButton=t("span",{className:"material-icons task-button",id:"finish-button",innerText:"done"}),this.deleteTaskButton=t("span",{className:"material-icons task-button",id:"delete-button",innerText:"delete"}),this.shadow.append(this.materialIconLinkElement,this.styleElement,this.containerElement),this.containerElement.append(this.titleElement,this.descriptionElement,this.editTaskButton,this.finishTaskButton,this.deleteTaskButton)}attributeChangedCallback(t,e,n){switch(t){case"title":this.titleElement.innerText=n;break;case"description":this.descriptionElement.innerText=n}}}customElements.define("task-item",n);class s extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .task-form {\n        margin: 1em;\n        padding: 1em 20%;\n        font-family: Roboto, sans-serif;\n        display: flex;\n        flex-direction: column;\n        border-radius: 5px;\n      }\n\n      .task-input[type='text'] {\n        margin-bottom: 1em;\n        padding: 0.75em;\n        border-radius: 5px;\n        border: 1px solid #777;\n        font-size: 0.9rem;\n        color: #444;\n      }\n\n      .task-input[type='text']:focus {\n        border: 2px solid #0077b6;\n        outline: none;\n        box-shadow: none;\n      }\n\n      .task-input[type='text']::placeholder {\n        color: #777;\n      }\n\n      #submit-input {\n        width: 100%;\n        margin: auto;\n        background: rgba(51, 51, 51, 0.75);\n        border-radius: 5px;\n        outline: none;\n        border: none;\n        color: white;\n        padding: 1em;\n        font-size: 1rem;\n      }\n\n      #submit-input:hover {\n        cursor: pointer;\n        background: rgba(51, 51, 51, 1);\n      }\n    ",this.containerElement=t("form",{className:"task-form"}),this.titleInputLabel=t("label",{for:"title-input",innerText:"Title"}),this.titleInputElement=t("input",{className:"task-input",id:"title-input",type:"text",name:"title",placeholder:"task title"}),this.descriptionInputLabel=t("label",{for:"description-input",innerText:"Description"}),this.descriptionInputElement=t("input",{className:"task-input",id:"description-input",type:"text",name:"description",placeholder:"task description"}),this.submitInputElement=t("input",{className:"task-input",id:"submit-input",type:"submit",value:"Add"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.titleInputLabel,this.titleInputElement,this.descriptionInputLabel,this.descriptionInputElement,this.submitInputElement)}}customElements.define("task-item-form",s);class i extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .container {\n        margin: 1em;\n        font-family: Roboto, sans-serif;\n        border: 1px solid #aaa;\n        border-radius: 5px;\n      }\n\n      .title {\n        text-align: center;\n      }\n    ",this.containerElement=t("div",{className:"container"}),this.titleElement=t("h1",{className:"title",innerText:"Task List"}),this.taskItemListContainerElement=t("div",{className:"task-item-container"}),this.taskItemFormElement=t("task-item-form",{className:"task-item-form"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.titleElement,this.taskItemListContainerElement,this.taskItemFormElement)}}customElements.define("task-list",i);let r=[];const o=t("task-list",{}),a=Array.from(o.shadowRoot.childNodes).find((t=>"container"===t.className)),l=a.querySelector(".task-item-container"),d=a.querySelector(".task-item-form"),c=Array.from(d.shadowRoot.childNodes).find((t=>"task-form"===t.className)),m=Array.from(c.querySelectorAll('.task-input[type="text"]')).reduce(((t,e)=>({...t,[e.name]:e})),{}),h=t=>{const{title:e,description:n}=t,s=r.findIndex((({title:t,description:s})=>e===t&&n===s));r.splice(s,1),window.localStorage.setItem("tasks",JSON.stringify(r)),l.querySelector(`[title="${e}"][description="${n}"]`).remove()},p=e=>{const{title:n,description:s}=e,i=t("task-item",{title:n,description:s}),r=(t=>{const e=Array.from(Array.from(t.shadowRoot.childNodes).find((t=>"container"===t.getAttribute("class"))).querySelectorAll(".task-button"));return{finish:e.find((t=>"finish-button"===t.getAttribute("id"))),delete:e.find((t=>"delete-button"===t.getAttribute("id"))),edit:e.find((t=>"edit-button"===t.getAttribute("id")))}})(i);r.finish.addEventListener("click",(()=>h(e))),r.delete.addEventListener("click",(()=>h(e))),r.edit.addEventListener("click",(()=>window.alert("editting task!"))),l.append(i)},u=t=>{t.preventDefault();const{title:{value:e},description:{value:n}}=m,[s,i]=[e.trim(),n.trim()];var o;s&&i?r.some((({title:t,description:e})=>s===t&&i===e))?console.error({title:s,description:i}," already defined"):(o={title:s,description:i},r.push(o),window.localStorage.setItem("tasks",JSON.stringify(r)),p(o),Object.values(m).forEach((t=>({...t,value:""})))):console.error("task fields cannot be empty")};class b extends HTMLElement{static get observedAttributes(){return["radius","stroke","progress"]}constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style");const e="http://www.w3.org/2000/svg";this.svgElement=t("svg",{class:"svg"},{namespace:e}),this.circleElement=t("circle",{class:"circle"},{namespace:e}),this._radius=0,this._stroke=0,this._progress=0,this.updateComponent(this._radius,this._stroke,this._progress),this.root.append(this.styleElement,this.svgElement),this.svgElement.appendChild(this.circleElement)}updateComponent(t,e,n){const s=t-2*e,i=2*s*Math.PI;this.styleElement.innerText=`\n      .svg {\n        overflow: hidden;\n        width: ${2*t}px;\n        height: ${2*t}px;\n      }\n\n      .circle {\n        stroke: #0095b3;\n        stroke-dasharray: ${i} ${i};\n        stroke-dashoffset: ${(1-n/100)*i};\n        fill: transparent;\n        stroke-width: ${e};\n\n        transition: stroke-dashoffset 0.5s;\n        transform: rotate(-90deg);\n        transform-origin: 50% 50%;\n      }\n    `,this.circleElement.setAttribute("r",s),this.circleElement.setAttribute("cx",t),this.circleElement.setAttribute("cy",t)}attributeChangedCallback(t,n,s){const i=e(s);if(null!==i){switch(t){case"radius":case"stroke":if(i<0)return;break;case"progress":if("progress"===t&&(i<0||i>100))return;break;default:return}this[`_${t}`]=i,this.updateComponent(this._radius,this._stroke,this._progress)}}get radius(){return this._radius}set radius(t){const n=e(t);this.setAttribute("radius",n)}get stroke(){return this._stroke}set stroke(t){const n=e(t);this.setAttribute("stroke",n)}get progress(){return this._progress}set progress(t){const n=e(t);this.setAttribute("progress",n)}}const g=b;let k;window.customElements.define("progress-ring",g);window.addEventListener("DOMContentLoaded",(()=>{((e,n=0,s=0,i=0)=>{k=t("progress-ring",{radius:n,stroke:s,progress:i}),e.appendChild(k)})(document.body,Math.min(window.innerWidth/3,window.innerHeight/3),10,100),((t,e)=>{const n=setInterval((()=>{var e;k.progress<=0&&clearInterval(n),e=k.progress-t,k.progress=e}),e)})(.5,60),document.body.appendChild(o),c.addEventListener("submit",u),window.localStorage.getItem("tasks")||window.localStorage.setItem("tasks",JSON.stringify([])),r=JSON.parse(window.localStorage.getItem("tasks")),r.forEach((t=>p(t)))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL2NvbXBvbmVudHMvVGFza0l0ZW0uanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL2NvbXBvbmVudHMvVGFza0l0ZW1Gb3JtLmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL1Rhc2tMaXN0LmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9zY3JpcHRzL3Rhc2tMaXN0LmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL1Byb2dyZXNzUmluZy5qcyIsIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvc2NyaXB0cy9wcm9ncmVzc1JpbmcuanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwibmFtZXMiOlsiY3JlYXRlRWxlbWVudCIsImVsZW1lbnRUeXBlIiwicHJvcHMiLCJvcHRpb25zIiwibmFtZXNwYWNlIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsInZhbGlkYXRlTnVtYmVyIiwibnVtIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc05hTiIsIlRhc2tJdGVtIiwiSFRNTEVsZW1lbnQiLCJzdXBlciIsInRoaXMiLCJzaGFkb3ciLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwic3R5bGVFbGVtZW50IiwiaW5uZXJUZXh0IiwibWF0ZXJpYWxJY29uTGlua0VsZW1lbnQiLCJyZWwiLCJocmVmIiwiY29udGFpbmVyRWxlbWVudCIsImNsYXNzTmFtZSIsInRpdGxlRWxlbWVudCIsImRlc2NyaXB0aW9uRWxlbWVudCIsImVkaXRUYXNrQnV0dG9uIiwiaWQiLCJmaW5pc2hUYXNrQnV0dG9uIiwiZGVsZXRlVGFza0J1dHRvbiIsImFwcGVuZCIsIm5hbWUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJUYXNrSXRlbUZvcm0iLCJ0aXRsZUlucHV0TGFiZWwiLCJmb3IiLCJ0aXRsZUlucHV0RWxlbWVudCIsInR5cGUiLCJwbGFjZWhvbGRlciIsImRlc2NyaXB0aW9uSW5wdXRMYWJlbCIsImRlc2NyaXB0aW9uSW5wdXRFbGVtZW50Iiwic3VibWl0SW5wdXRFbGVtZW50IiwiVGFza0xpc3QiLCJ0YXNrSXRlbUxpc3RDb250YWluZXJFbGVtZW50IiwidGFza0l0ZW1Gb3JtRWxlbWVudCIsInRhc2tzIiwidGFza0xpc3QiLCJ0YXNrTGlzdENvbnRhaW5lciIsIkFycmF5IiwiZnJvbSIsInNoYWRvd1Jvb3QiLCJjaGlsZE5vZGVzIiwiZmluZCIsImVsZW0iLCJ0YXNrTGlzdEl0ZW1Db250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwidGFza0l0ZW1Gb3JtIiwidGFza0l0ZW1Gb3JtQ29udGFpbmVyIiwidGFza0l0ZW1Gb3JtSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlZHVjZSIsImFjYyIsImRlbGV0ZVRhc2siLCJ0YXNrVG9EZWxldGUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidGFza0luZGV4IiwiZmluZEluZGV4IiwidCIsImQiLCJzcGxpY2UiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlbW92ZSIsImFkZFRhc2tUb0RvbSIsIm5ld1Rhc2siLCJ0YXNrSXRlbSIsImJ1dHRvbnMiLCJ0YXNrIiwiZ2V0QXR0cmlidXRlIiwiZmluaXNoIiwiYnRuIiwiZGVsZXRlIiwiZWRpdCIsImdldFRhc2tJdGVtQnV0dG9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJhbGVydCIsImhhbmRsZVRhc2tGb3JtU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidHJpbW1lZFRpdGxlIiwidHJpbW1lZERlc2NyaXB0aW9uIiwidHJpbSIsInNvbWUiLCJjb25zb2xlIiwiZXJyb3IiLCJwdXNoIiwidmFsdWVzIiwiaW5wdXQiLCJQcm9ncmVzc1JpbmciLCJyb290Iiwic3ZnTmFtZXNwYWNlIiwic3ZnRWxlbWVudCIsImNsYXNzIiwiY2lyY2xlRWxlbWVudCIsIl9yYWRpdXMiLCJfc3Ryb2tlIiwiX3Byb2dyZXNzIiwidXBkYXRlQ29tcG9uZW50IiwiYXBwZW5kQ2hpbGQiLCJyYWRpdXMiLCJzdHJva2UiLCJwcm9ncmVzcyIsIm5vcm1hbGl6ZWRSYWRpdXMiLCJjaXJjdW1mZXJlbmNlIiwiTWF0aCIsIlBJIiwibmV3VmFsdWVOdW1iZXIiLCJ2YWwiLCJwcm9ncmVzc1JpbmdFbGVtZW50IiwiY29udGFpbmVyIiwiaW5pdGlhbGl6ZVByb2dyZXNzUmluZyIsImJvZHkiLCJtaW4iLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJ0aWNrTGVuZ3RoIiwidGlja0ZyZXF1ZW5jeSIsInRpY2tlciIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInN0YXJ0UHJvZ3Jlc3NSaW5nIiwiZ2V0SXRlbSIsInBhcnNlIl0sIm1hcHBpbmdzIjoibUJBUUEsTUFBTUEsRUFBZ0IsQ0FBQ0MsRUFBYUMsRUFBUSxHQUFJQyxFQUFVLE1BQ3hELE1BQU0sVUFBRUMsR0FBY0QsRUFDdEIsSUFBSUUsRUFVSixPQVRlQSxFQUFYRCxFQUFxQkUsU0FBU0MsZ0JBQWdCSCxFQUFXSCxHQUM5Q0ssU0FBU04sY0FBY0MsR0FHdENPLE9BQU9DLFFBQVFQLEdBQU9RLFNBQVEsRUFBRUMsRUFBS0MsTUFDL0JSLEtBQWVPLEtBQU9OLEdBQVVBLEVBQVFRLGFBQWFGLEVBQUtDLEdBQ3pEUCxFQUFRTSxHQUFPQyxLQUdmUCxHQVFIUyxFQUFrQkYsSUFDdEIsTUFBTUcsRUFBTUMsU0FBU0osRUFBTyxJQUM1QixPQUFPSyxPQUFPQyxNQUFNSCxHQUFPLEtBQU9BLEdDakJwQyxNQUFNSSxVQUFpQkMsWUFDckIsZ0NBQ0UsTUFBTyxDQUFDLFFBQVMsZUFHbkIsY0FDRUMsUUFHQUMsS0FBS0MsT0FBU0QsS0FBS0UsYUFBYSxD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QUMvQmhFLE9BQU9DLGFBQWFDLFFBQVEsUUFBU0MsS0FBS0MsVUFBVSxLQUV0RDlCLEVBQVE2QixLQUFLOEQsTUFBTWpFLE9BQU9DLGFBQWErRCxRQUFRLFVBQy9DMUYsRUFBTS9DLFNBQVNtRixHQUFTSixFQUFhSSxTIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZXMgYW4gSFRNTEVsZW1lbnQgYW5kIHNldCBpdHMgYXR0cmlidXRlc1xuICogQ3JlYXRlZCB0byByZWR1Y2UgYm9pbGVycGxhdGUgZnJvbSBlbGVtZW50IGNyZWF0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudFR5cGUgLSBlbGVtZW50IHRhZyBuYW1lXG4gKiBAcGFyYW0ge3trZXk6IHN0cmluZ319IHByb3BzIC0gZWxlbWVudCdzIGF0dHJpYnV0ZXMvcHJvcGVydGllc1xuICogQHBhcmFtIHt7b3B0aW9uOiBzdHJpbmd9fSBvcHRpb25zIC0gZWxlbWVudCBvcHRpb25zIHN1Y2ggYXMgbmFtZXNwYWNlXG4gKiBAcmV0dXJuIGVsZW1lbnQgLSBuZXcgSFRNTEVsZW1lbnQgY3JlYXRlZFxuICovXG5jb25zdCBjcmVhdGVFbGVtZW50ID0gKGVsZW1lbnRUeXBlLCBwcm9wcyA9IHt9LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBuYW1lc3BhY2UgfSA9IG9wdGlvbnM7XG4gIGxldCBlbGVtZW50O1xuICBpZiAobmFtZXNwYWNlKSBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgZWxlbWVudFR5cGUpO1xuICBlbHNlIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnRUeXBlKTsgLy8gY3JlYXRlIGVsZW1lbnRcblxuICAvLyBzZXQgYXR0cmlidXRlcy9wcm9wZXJ0aWVzXG4gIE9iamVjdC5lbnRyaWVzKHByb3BzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBpZiAobmFtZXNwYWNlIHx8ICEoa2V5IGluIGVsZW1lbnQpKSBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICBlbHNlIGVsZW1lbnRba2V5XSA9IHZhbHVlO1xuICB9KTtcblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbi8qKlxuICogVHJpZXMgdG8gY29udmVydCBpbnB1dCB0byBhIG51bWJlclxuICogQHBhcmFtIHthbnl9IHZhbHVlIC0gdG8gYmUgY29udmVydGVkIHRvIG51bWJlclxuICogQHJldHVybiB7bnVtYmVyIHwgbnVsbH0gLSBudW1iZXIgaWYgc3VjY2Vzc2Z1bCwgbnVsbCBvdGhlcndpc2VcbiAqL1xuY29uc3QgdmFsaWRhdGVOdW1iZXIgPSAodmFsdWUpID0+IHtcbiAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgcmV0dXJuIE51bWJlci5pc05hTihudW0pID8gbnVsbCA6IG51bTtcbn07XG5cbmV4cG9ydCB7IGNyZWF0ZUVsZW1lbnQsIHZhbGlkYXRlTnVtYmVyIH07XG4iLCIvKipcbiAqIEBmaWxlIHRhc2staXRlbSB3ZWIgY29tcG9uZW50XG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSB0YXNrIGl0ZW0uXG4gKiBAZXh0ZW5kcyBIVE1MRWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IG5hbWUgLSBuYW1lIG9mIHRhc2tcbiAqIEBwYXJhbSB7bnVtYmVyfSBlc3RpbWF0ZWQtcG9tb2Rvcm9zIC0gZXN0aW1hdGVkIG51bWJlciBvZiBwb21vZG9yb3MgbmVlZGVkXG4gKiBAcGFyYW0ge251bWJlcn0gdXNlZC1wb21vZG9yb3MgLSBwb21vZG9yb3MgdXNlZCBzbyBmYXJcbiAqL1xuY2xhc3MgVGFza0l0ZW0gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbJ3RpdGxlJywgJ2Rlc2NyaXB0aW9uJ107XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLy8gY3JlYXRlIHNoYWRvdyByb290XG4gICAgdGhpcy5zaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcblxuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSBgXG4gICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogbGlnaHRibHVlO1xuICAgICAgICBmb250LWZhbWlseTogUm9ib3RvLCBzYW5zLXNlcmlmO1xuICAgICAgICBtYXJnaW46IDFlbTtcbiAgICAgICAgcGFkZGluZzogMC41ZW07XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgfVxuXG4gICAgICAudGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDEuMjVyZW07XG4gICAgICB9XG5cbiAgICAgIC5kZXNjcmlwdGlvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgICAgY29sb3I6IGRhcmtncmF5O1xuICAgICAgfVxuXG4gICAgICAudGFzay1idXR0b24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHBhZGRpbmc6IDAuNWVtO1xuICAgICAgICBjb2xvcjogcmdiYSg1MSwgNTEsIDUxLCAwLjUpO1xuICAgICAgfVxuXG4gICAgICAudGFzay1idXR0b246aG92ZXIge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjM4LCAyMzgsIDIzOCwgMC41KTtcbiAgICAgICAgY29sb3I6IHJnYmEoNTEsIDUxLCA1MSwgMSk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cblxuICAgICAgI2VkaXQtYnV0dG9uIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLmNvbnRhaW5lcjpob3ZlciA+ICNlZGl0LWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IGluaXRpYWw7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICB9XG5cbiAgICAgICNmaW5pc2gtYnV0dG9uIHtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICByaWdodDogMS41ZW07XG4gICAgICB9XG5cbiAgICAgICNkZWxldGUtYnV0dG9uIHtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgdGhpcy5tYXRlcmlhbEljb25MaW5rRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2xpbmsnLCB7XG4gICAgICByZWw6ICdzdHlsZXNoZWV0JyxcbiAgICAgIGhyZWY6ICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2ljb24/ZmFtaWx5PU1hdGVyaWFsK0ljb25zJyxcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2NvbnRhaW5lcicsXG4gICAgfSk7XG4gICAgdGhpcy50aXRsZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdoMScsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RpdGxlJyxcbiAgICB9KTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2gyJywge1xuICAgICAgY2xhc3NOYW1lOiAnZGVzY3JpcHRpb24nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5lZGl0VGFza0J1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdtYXRlcmlhbC1pY29ucyB0YXNrLWJ1dHRvbicsXG4gICAgICBpZDogJ2VkaXQtYnV0dG9uJyxcbiAgICAgIGlubmVyVGV4dDogJ21vZGUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5maW5pc2hUYXNrQnV0dG9uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ21hdGVyaWFsLWljb25zIHRhc2stYnV0dG9uJyxcbiAgICAgIGlkOiAnZmluaXNoLWJ1dHRvbicsXG4gICAgICBpbm5lclRleHQ6ICdkb25lJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZGVsZXRlVGFza0J1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdtYXRlcmlhbC1pY29ucyB0YXNrLWJ1dHRvbicsXG4gICAgICBpZDogJ2RlbGV0ZS1idXR0b24nLFxuICAgICAgaW5uZXJUZXh0OiAnZGVsZXRlJyxcbiAgICB9KTtcblxuICAgIHRoaXMuc2hhZG93LmFwcGVuZChcbiAgICAgIHRoaXMubWF0ZXJpYWxJY29uTGlua0VsZW1lbnQsXG4gICAgICB0aGlzLnN0eWxlRWxlbWVudCxcbiAgICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCxcbiAgICApO1xuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5hcHBlbmQoXG4gICAgICB0aGlzLnRpdGxlRWxlbWVudCxcbiAgICAgIHRoaXMuZGVzY3JpcHRpb25FbGVtZW50LFxuICAgICAgdGhpcy5lZGl0VGFza0J1dHRvbixcbiAgICAgIHRoaXMuZmluaXNoVGFza0J1dHRvbixcbiAgICAgIHRoaXMuZGVsZXRlVGFza0J1dHRvbixcbiAgICApO1xuICB9XG5cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgY2FzZSAndGl0bGUnOlxuICAgICAgICB0aGlzLnRpdGxlRWxlbWVudC5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZXNjcmlwdGlvbic6XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb25FbGVtZW50LmlubmVyVGV4dCA9IG5ld1ZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1pdGVtJywgVGFza0l0ZW0pO1xuIiwiLyoqXG4gKiBAZmlsZSB0YXNrLWl0ZW0tZm9ybSB3ZWIgY29tcG9uZW50XG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSB0YXNrIGl0ZW0gZm9ybS5cbiAqIEBleHRlbmRzIEhUTUxFbGVtZW50XG4gKiBAcGFyYW0ge251bWJlcn0gbmFtZSAtIG5hbWUgb2YgdGFza1xuICogQHBhcmFtIHtudW1iZXJ9IGVzdGltYXRlZC1wb21vZG9yb3MgLSBlc3RpbWF0ZWQgbnVtYmVyIG9mIHBvbW9kb3JvcyBuZWVkZWRcbiAqL1xuY2xhc3MgVGFza0l0ZW1Gb3JtIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5zaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcblxuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSBgXG4gICAgICAudGFzay1mb3JtIHtcbiAgICAgICAgbWFyZ2luOiAxZW07XG4gICAgICAgIHBhZGRpbmc6IDFlbSAyMCU7XG4gICAgICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sIHNhbnMtc2VyaWY7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgIH1cblxuICAgICAgLnRhc2staW5wdXRbdHlwZT0ndGV4dCddIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMWVtO1xuICAgICAgICBwYWRkaW5nOiAwLjc1ZW07XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzc3NztcbiAgICAgICAgZm9udC1zaXplOiAwLjlyZW07XG4gICAgICAgIGNvbG9yOiAjNDQ0O1xuICAgICAgfVxuXG4gICAgICAudGFzay1pbnB1dFt0eXBlPSd0ZXh0J106Zm9jdXMge1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjMDA3N2I2O1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3gtc2hhZG93OiBub25lO1xuICAgICAgfVxuXG4gICAgICAudGFzay1pbnB1dFt0eXBlPSd0ZXh0J106OnBsYWNlaG9sZGVyIHtcbiAgICAgICAgY29sb3I6ICM3Nzc7XG4gICAgICB9XG5cbiAgICAgICNzdWJtaXQtaW5wdXQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDUxLCA1MSwgNTEsIDAuNzUpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBwYWRkaW5nOiAxZW07XG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgIH1cblxuICAgICAgI3N1Ym1pdC1pbnB1dDpob3ZlciB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSg1MSwgNTEsIDUxLCAxKTtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnZm9ybScsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Rhc2stZm9ybScsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRpdGxlSW5wdXRMYWJlbCA9IGNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywge1xuICAgICAgZm9yOiAndGl0bGUtaW5wdXQnLFxuICAgICAgaW5uZXJUZXh0OiAnVGl0bGUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy50aXRsZUlucHV0RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgY2xhc3NOYW1lOiAndGFzay1pbnB1dCcsXG4gICAgICBpZDogJ3RpdGxlLWlucHV0JyxcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIG5hbWU6ICd0aXRsZScsXG4gICAgICBwbGFjZWhvbGRlcjogJ3Rhc2sgdGl0bGUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0TGFiZWwgPSBjcmVhdGVFbGVtZW50KCdsYWJlbCcsIHtcbiAgICAgIGZvcjogJ2Rlc2NyaXB0aW9uLWlucHV0JyxcbiAgICAgIGlubmVyVGV4dDogJ0Rlc2NyaXB0aW9uJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Rhc2staW5wdXQnLFxuICAgICAgaWQ6ICdkZXNjcmlwdGlvbi1pbnB1dCcsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBuYW1lOiAnZGVzY3JpcHRpb24nLFxuICAgICAgcGxhY2Vob2xkZXI6ICd0YXNrIGRlc2NyaXB0aW9uJyxcbiAgICB9KTtcblxuICAgIHRoaXMuc3VibWl0SW5wdXRFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWlucHV0JyxcbiAgICAgIGlkOiAnc3VibWl0LWlucHV0JyxcbiAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgdmFsdWU6ICdBZGQnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zaGFkb3cuYXBwZW5kKHRoaXMuc3R5bGVFbGVtZW50LCB0aGlzLmNvbnRhaW5lckVsZW1lbnQpO1xuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5hcHBlbmQoXG4gICAgICB0aGlzLnRpdGxlSW5wdXRMYWJlbCxcbiAgICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQsXG4gICAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRMYWJlbCxcbiAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQsXG4gICAgICB0aGlzLnN1Ym1pdElucHV0RWxlbWVudCxcbiAgICApO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1pdGVtLWZvcm0nLCBUYXNrSXRlbUZvcm0pO1xuIiwiLyoqXG4gKiBAZmlsZSB0YXNrLWxpc3Qgd2ViIGNvbXBvbmVudFxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscyc7XG5cbi8qKlxuICogQ3VzdG9tIHdlYiBjb21wb25lbnQgcmVwcmVzZW50aW5nIGEgdGFzayBsaXN0LlxuICogQGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAqL1xuY2xhc3MgVGFza0xpc3QgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSBgXG4gICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAxZW07XG4gICAgICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sIHNhbnMtc2VyaWY7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNhYWE7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgIH1cblxuICAgICAgLnRpdGxlIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICdjb250YWluZXInLFxuICAgIH0pO1xuXG4gICAgdGhpcy50aXRsZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdoMScsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RpdGxlJyxcbiAgICAgIGlubmVyVGV4dDogJ1Rhc2sgTGlzdCcsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRhc2tJdGVtTGlzdENvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWl0ZW0tY29udGFpbmVyJyxcbiAgICB9KTtcblxuICAgIHRoaXMudGFza0l0ZW1Gb3JtRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ3Rhc2staXRlbS1mb3JtJywge1xuICAgICAgY2xhc3NOYW1lOiAndGFzay1pdGVtLWZvcm0nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zaGFkb3cuYXBwZW5kKHRoaXMuc3R5bGVFbGVtZW50LCB0aGlzLmNvbnRhaW5lckVsZW1lbnQpO1xuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5hcHBlbmQoXG4gICAgICB0aGlzLnRpdGxlRWxlbWVudCxcbiAgICAgIHRoaXMudGFza0l0ZW1MaXN0Q29udGFpbmVyRWxlbWVudCxcbiAgICAgIHRoaXMudGFza0l0ZW1Gb3JtRWxlbWVudCxcbiAgICApO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1saXN0JywgVGFza0xpc3QpO1xuIiwiLyoqXG4gKiBAZmlsZSBNYW5hZ2UgdGFza2xpc3QgZm9yIHBhZ2VcbiAqIEBhdXRob3IgU2VhbiBZZVxuICovXG5cbi8qKlxuICogQSB0YXNrIG9iamVjdCBjb250YWluaW5nIGEgdGl0bGUgYW5kIGRlc2NyaXB0aW9uXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUYXNrXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdGl0bGUgICAgICAgLSB0aXRsZSBvZiB0aGUgdGFza1xuICogQHByb3BlcnR5IHtzdHJpbmd9IGRlc2NyaXB0aW9uIC0gZGVzY3JpcHRpb24gb2YgdGhlIHRhc2tcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0ICcuLi9jb21wb25lbnRzL1Rhc2tJdGVtJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy9UYXNrSXRlbUZvcm0nO1xuaW1wb3J0ICcuLi9jb21wb25lbnRzL1Rhc2tMaXN0JztcblxubGV0IHRhc2tzID0gW107XG5cbi8vIHRhc2stbGlzdCBlbGVtZW50XG4vLyB0YXNrLWxpc3QgY29udGFpbmVyIGVsZW1lbnRcbi8vIGNvbnRhaW5lciBlbGVtZW50IGZvciB0YXNrLWxpc3QtaXRlbVxuY29uc3QgdGFza0xpc3QgPSBjcmVhdGVFbGVtZW50KCd0YXNrLWxpc3QnLCB7fSk7XG5jb25zdCB0YXNrTGlzdENvbnRhaW5lciA9IEFycmF5LmZyb20odGFza0xpc3Quc2hhZG93Um9vdC5jaGlsZE5vZGVzKS5maW5kKFxuICAoZWxlbSkgPT4gZWxlbS5jbGFzc05hbWUgPT09ICdjb250YWluZXInLFxuKTtcbmNvbnN0IHRhc2tMaXN0SXRlbUNvbnRhaW5lciA9IHRhc2tMaXN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXG4gICcudGFzay1pdGVtLWNvbnRhaW5lcicsXG4pO1xuXG4vLyB0YXNrLWl0ZW0tZm9ybSBlbGVtZW50XG4vLyB0YXNrLWl0ZW0tZm9ybSBjb250YWluZXIgZWxlbWVudFxuLy8gdGFzay1pdGVtLWZvcm0gdGV4dCBpbnB1dCBlbGVtZW50c1xuY29uc3QgdGFza0l0ZW1Gb3JtID0gdGFza0xpc3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnRhc2staXRlbS1mb3JtJyk7XG5jb25zdCB0YXNrSXRlbUZvcm1Db250YWluZXIgPSBBcnJheS5mcm9tKFxuICB0YXNrSXRlbUZvcm0uc2hhZG93Um9vdC5jaGlsZE5vZGVzLFxuKS5maW5kKChlbGVtKSA9PiBlbGVtLmNsYXNzTmFtZSA9PT0gJ3Rhc2stZm9ybScpO1xuY29uc3QgdGFza0l0ZW1Gb3JtSW5wdXRzID0gQXJyYXkuZnJvbShcbiAgdGFza0l0ZW1Gb3JtQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWlucHV0W3R5cGU9XCJ0ZXh0XCJdJyksXG4pLnJlZHVjZSgoYWNjLCBlbGVtKSA9PiAoeyAuLi5hY2MsIFtlbGVtLm5hbWVdOiBlbGVtIH0pLCB7fSk7XG5cbi8qKlxuICogR2V0IGJ1dHRvbiBlbGVtZW50cyBmcm9tIHRhc2staXRlbSBlbGVtZW50XG4gKiBAcGFyYW0ge1Rhc2t9IHRhc2sgLSB0YXNrLWl0ZW0gZWxlbWVudFxuICogQHJldHVybiB7e2ZpbmlzaDogSFRNTEJ1dHRvbkVsZW1lbnQsIGRlbGV0ZTogSFRNTEJ1dHRvbkVsZW1lbnQsIGVkaXQ6IEhUTUxCdXR0b25FbGVtZW50fX0gLSBidXR0b24gZWxlbWVudHMgb2JqZWN0XG4gKi9cbmNvbnN0IGdldFRhc2tJdGVtQnV0dG9ucyA9ICh0YXNrKSA9PiB7XG4gIGNvbnN0IGJ1dHRvbnMgPSBBcnJheS5mcm9tKFxuICAgIEFycmF5LmZyb20odGFzay5zaGFkb3dSb290LmNoaWxkTm9kZXMpXG4gICAgICAuZmluZCgoZWxlbSkgPT4gZWxlbS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT09ICdjb250YWluZXInKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWJ1dHRvbicpLFxuICApO1xuXG4gIHJldHVybiB7XG4gICAgZmluaXNoOiBidXR0b25zLmZpbmQoKGJ0bikgPT4gYnRuLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2ZpbmlzaC1idXR0b24nKSxcbiAgICBkZWxldGU6IGJ1dHRvbnMuZmluZCgoYnRuKSA9PiBidG4uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnZGVsZXRlLWJ1dHRvbicpLFxuICAgIGVkaXQ6IGJ1dHRvbnMuZmluZCgoYnRuKSA9PiBidG4uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnZWRpdC1idXR0b24nKSxcbiAgfTtcbn07XG5cbi8qKlxuICogRGVsZXRpbmcgZXhpc3RpbmcgdGFza1xuICogQHBhcmFtIHtUYXNrfSB0YXNrVG9EZWxldGUgLSB0YXNrIHRvIGJlIGRlbGV0ZWRcbiAqL1xuY29uc3QgZGVsZXRlVGFzayA9ICh0YXNrVG9EZWxldGUpID0+IHtcbiAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24gfSA9IHRhc2tUb0RlbGV0ZTtcblxuICAvLyB1cGRhdGUgbG9jYWxTdG9yYWdlXG4gIGNvbnN0IHRhc2tJbmRleCA9IHRhc2tzLmZpbmRJbmRleChcbiAgICAoeyB0aXRsZTogdCwgZGVzY3JpcHRpb246IGQgfSkgPT4gdGl0bGUgPT09IHQgJiYgZGVzY3JpcHRpb24gPT09IGQsXG4gICk7XG4gIHRhc2tzLnNwbGljZSh0YXNrSW5kZXgsIDEpO1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcblxuICAvLyByZW1vdmUgdGFzayBmcm9tIGRvbVxuICBjb25zdCB0YXNrSXRlbSA9IHRhc2tMaXN0SXRlbUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxuICAgIGBbdGl0bGU9XCIke3RpdGxlfVwiXVtkZXNjcmlwdGlvbj1cIiR7ZGVzY3JpcHRpb259XCJdYCxcbiAgKTtcbiAgdGFza0l0ZW0ucmVtb3ZlKCk7XG59O1xuXG4vKipcbiAqIEFkZCB0YXNrIG9iamVjdCB0byBET00sIGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGFzay1pdGVtXG4gKiBAcGFyYW0ge1Rhc2t9IG5ld1Rhc2sgLSBuZXcgdGFzayB0byBiZSBhZGRlZFxuICovXG5jb25zdCBhZGRUYXNrVG9Eb20gPSAobmV3VGFzaykgPT4ge1xuICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiB9ID0gbmV3VGFzaztcblxuICAvLyBhZGQgdGFzayB0byBkb21cbiAgY29uc3QgdGFza0l0ZW0gPSBjcmVhdGVFbGVtZW50KCd0YXNrLWl0ZW0nLCB7XG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gIH0pO1xuICBjb25zdCBidXR0b25zID0gZ2V0VGFza0l0ZW1CdXR0b25zKHRhc2tJdGVtKTtcbiAgYnV0dG9ucy5maW5pc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkZWxldGVUYXNrKG5ld1Rhc2spKTtcbiAgYnV0dG9ucy5kZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkZWxldGVUYXNrKG5ld1Rhc2spKTtcbiAgYnV0dG9ucy5lZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gd2luZG93LmFsZXJ0KCdlZGl0dGluZyB0YXNrIScpKTtcbiAgdGFza0xpc3RJdGVtQ29udGFpbmVyLmFwcGVuZCh0YXNrSXRlbSk7XG59O1xuXG4vKipcbiAqIEFkZCBuZXcgdGFzayB0byBsb2NhbFN0b3JhZ2VcbiAqIEBwYXJhbSB7VGFza30gbmV3VGFzayAtIG5ldyB0YXNrIHRvIGJlIGFkZGVkXG4gKi9cbmNvbnN0IGFkZFRhc2sgPSAobmV3VGFzaykgPT4ge1xuICAvLyB1cGRhdGUgbG9jYWxTdG9yYWdlXG4gIHRhc2tzLnB1c2gobmV3VGFzayk7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xuICBhZGRUYXNrVG9Eb20obmV3VGFzayk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBleGlzdGluZyB0YXNrXG4gKiBAcGFyYW0ge1Rhc2t9IHByZXZUYXNrIC0gdGFzayB0byBiZSB1cGRhdGVkXG4gKiBAcGFyYW0ge1Rhc2t9IG5leHRUYXNrIC0gdXBkYXRlZCB0YXNrXG4gKi9cbmNvbnN0IHVwZGF0ZVRhc2sgPSAocHJldlRhc2ssIG5leHRUYXNrKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGU6IHByZXZUaXRsZSwgZGVzY3JpcHRpb246IHByZXZEZXNjcmlwdGlvbiB9ID0gcHJldlRhc2s7XG4gIGNvbnN0IHsgdGl0bGU6IG5leHRUaXRsZSwgZGVzY3JpcHRpb246IG5leHREZXNjcmlwdGlvbiB9ID0gbmV4dFRhc2s7XG5cbiAgLy8gdXBkYXRlIGxvY2FsU3RvcmFnZVxuICBjb25zdCB0YXNrSW5kZXggPSB0YXNrcy5maW5kSW5kZXgoXG4gICAgKHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pID0+XG4gICAgICBwcmV2VGl0bGUgPT09IHRpdGxlICYmIHByZXZEZXNjcmlwdGlvbiA9PT0gZGVzY3JpcHRpb24sXG4gICk7XG4gIHRhc2tzW3Rhc2tJbmRleF0gPSBuZXh0VGFzaztcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG5cbiAgLy8gdXBkYXRlIHRhc2sgaW4gZG9tXG4gIGNvbnN0IHRhc2tJdGVtID0gdGFza0xpc3RJdGVtQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgYFt0aXRsZT1cIiR7cHJldlRpdGxlfVwiXVtkZXNjcmlwdGlvbj1cIiR7cHJldkRlc2NyaXB0aW9ufVwiXWAsXG4gICk7XG4gIHRhc2tJdGVtLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBuZXh0VGl0bGUpO1xuICB0YXNrSXRlbS5zZXRBdHRyaWJ1dGUoJ2Rlc2NyaXB0aW9uJywgbmV4dERlc2NyaXB0aW9uKTtcbn07XG5cbi8qKlxuICogR2V0IHRhc2tsaXN0XG4gKiBAcmV0dXJuIHtUYXNrW119IC0gY3VycmVudCBsaXN0IG9mIHRhc2tzXG4gKi9cbmNvbnN0IGdldFRhc2tzID0gKCkgPT4ge1xuICByZXR1cm4gdGFza3M7XG59O1xuXG4vKipcbiAqIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb24sIHZhbGlkYXRlIGlucHV0XG4gKiBAcGFyYW0ge0V2ZW50fSBlIC0gc3VibWl0IGV2ZW50XG4gKi9cbmNvbnN0IGhhbmRsZVRhc2tGb3JtU3VibWl0ID0gKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IHBhZ2UgcmVsb2FkXG5cbiAgY29uc3Qge1xuICAgIHRpdGxlOiB7IHZhbHVlOiB0aXRsZSB9LFxuICAgIGRlc2NyaXB0aW9uOiB7IHZhbHVlOiBkZXNjcmlwdGlvbiB9LFxuICB9ID0gdGFza0l0ZW1Gb3JtSW5wdXRzO1xuICBjb25zdCBbdHJpbW1lZFRpdGxlLCB0cmltbWVkRGVzY3JpcHRpb25dID0gW3RpdGxlLnRyaW0oKSwgZGVzY3JpcHRpb24udHJpbSgpXTtcblxuICAvLyBjaGVjayBpZiBmaWVsZHMgYXJlIG5vbi1lbXB0eVxuICBpZiAoIXRyaW1tZWRUaXRsZSB8fCAhdHJpbW1lZERlc2NyaXB0aW9uKSB7XG4gICAgY29uc29sZS5lcnJvcigndGFzayBmaWVsZHMgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gY2hlY2sgaWYgdGFzayBhbHJlYWR5IGV4aXN0c1xuICBpZiAoXG4gICAgdGFza3Muc29tZShcbiAgICAgICh7IHRpdGxlOiB0LCBkZXNjcmlwdGlvbjogZCB9KSA9PlxuICAgICAgICB0cmltbWVkVGl0bGUgPT09IHQgJiYgdHJpbW1lZERlc2NyaXB0aW9uID09PSBkLFxuICAgIClcbiAgKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIHsgdGl0bGU6IHRyaW1tZWRUaXRsZSwgZGVzY3JpcHRpb246IHRyaW1tZWREZXNjcmlwdGlvbiB9LFxuICAgICAgJyBhbHJlYWR5IGRlZmluZWQnLFxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYWRkVGFzayh7IHRpdGxlOiB0cmltbWVkVGl0bGUsIGRlc2NyaXB0aW9uOiB0cmltbWVkRGVzY3JpcHRpb24gfSk7XG4gIE9iamVjdC52YWx1ZXModGFza0l0ZW1Gb3JtSW5wdXRzKS5mb3JFYWNoKChpbnB1dCkgPT4gKHtcbiAgICAuLi5pbnB1dCxcbiAgICB2YWx1ZTogJycsXG4gIH0pKTtcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0YXNrbGlzdCBvbiBwYWdlXG4gKiBSZXRyaWV2ZSB0YXNrcyBmcm9tIGxvY2FsU3RvcmFnZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyRWxlbWVudCAtIGNvbnRhaW5lciBmb3IgdGFzayBsaXN0XG4gKi9cbmNvbnN0IGluaXRpYWxpemVUYXNrTGlzdCA9IChjb250YWluZXJFbGVtZW50KSA9PiB7XG4gIGNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGFza0xpc3QpO1xuICB0YXNrSXRlbUZvcm1Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlVGFza0Zvcm1TdWJtaXQpO1xuXG4gIC8vIHJldHJpdmUgYW5kIGFkZCB0YXNrcyBmcm9tIGxvY2FsU3RvcmFnZVxuICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKSkge1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeShbXSkpO1xuICB9XG4gIHRhc2tzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykpO1xuICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiBhZGRUYXNrVG9Eb20odGFzaykpO1xufTtcblxuZXhwb3J0IHsgaW5pdGlhbGl6ZVRhc2tMaXN0LCBhZGRUYXNrLCBnZXRUYXNrcywgdXBkYXRlVGFzaywgZGVsZXRlVGFzayB9O1xuIiwiLyoqXG4gKiBAZmlsZSBwcm9ncmVzcy1yaW5nIHdlYiBjb21wb25lbnRcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50LCB2YWxpZGF0ZU51bWJlciB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSBwcm9ncmVzcyByaW5nLlxuICogQGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJva2UgLSB3aWR0aCBvZiBjaXJjbGUgc3Ryb2tlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gcmFkaXVzIG9mIGNpcmNsZVxuICogQHBhcmFtIHtudW1iZXJ9IHByb2dyZXNzIC0gcHJvZ3Jlc3Mgb2YgcmluZ1xuICovXG5jbGFzcyBQcm9ncmVzc1JpbmcgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbJ3JhZGl1cycsICdzdHJva2UnLCAncHJvZ3Jlc3MnXTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnJvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICBjb25zdCBzdmdOYW1lc3BhY2UgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuICAgIHRoaXMuc3ZnRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXG4gICAgICAnc3ZnJyxcbiAgICAgIHsgY2xhc3M6ICdzdmcnIH0sXG4gICAgICB7IG5hbWVzcGFjZTogc3ZnTmFtZXNwYWNlIH0sXG4gICAgKTtcblxuICAgIHRoaXMuY2lyY2xlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXG4gICAgICAnY2lyY2xlJyxcbiAgICAgIHsgY2xhc3M6ICdjaXJjbGUnIH0sXG4gICAgICB7IG5hbWVzcGFjZTogc3ZnTmFtZXNwYWNlIH0sXG4gICAgKTtcblxuICAgIHRoaXMuX3JhZGl1cyA9IDA7XG4gICAgdGhpcy5fc3Ryb2tlID0gMDtcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDA7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnQodGhpcy5fcmFkaXVzLCB0aGlzLl9zdHJva2UsIHRoaXMuX3Byb2dyZXNzKTtcblxuICAgIHRoaXMucm9vdC5hcHBlbmQodGhpcy5zdHlsZUVsZW1lbnQsIHRoaXMuc3ZnRWxlbWVudCk7XG4gICAgdGhpcy5zdmdFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2lyY2xlRWxlbWVudCk7XG4gIH1cblxuICAvKiogVXBkYXRlcyBjb21wb25lbnQgdmlldyAqL1xuICB1cGRhdGVDb21wb25lbnQocmFkaXVzLCBzdHJva2UsIHByb2dyZXNzKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZFJhZGl1cyA9IHJhZGl1cyAtIHN0cm9rZSAqIDI7XG4gICAgY29uc3QgY2lyY3VtZmVyZW5jZSA9IG5vcm1hbGl6ZWRSYWRpdXMgKiAyICogTWF0aC5QSTtcblxuICAgIHRoaXMuc3R5bGVFbGVtZW50LmlubmVyVGV4dCA9IGBcbiAgICAgIC5zdmcge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB3aWR0aDogJHsyICogcmFkaXVzfXB4O1xuICAgICAgICBoZWlnaHQ6ICR7MiAqIHJhZGl1c31weDtcbiAgICAgIH1cblxuICAgICAgLmNpcmNsZSB7XG4gICAgICAgIHN0cm9rZTogIzAwOTViMztcbiAgICAgICAgc3Ryb2tlLWRhc2hhcnJheTogJHtjaXJjdW1mZXJlbmNlfSAke2NpcmN1bWZlcmVuY2V9O1xuICAgICAgICBzdHJva2UtZGFzaG9mZnNldDogJHsoMSAtIHByb2dyZXNzIC8gMTAwKSAqIGNpcmN1bWZlcmVuY2V9O1xuICAgICAgICBmaWxsOiB0cmFuc3BhcmVudDtcbiAgICAgICAgc3Ryb2tlLXdpZHRoOiAke3N0cm9rZX07XG5cbiAgICAgICAgdHJhbnNpdGlvbjogc3Ryb2tlLWRhc2hvZmZzZXQgMC41cztcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDUwJTtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgdGhpcy5jaXJjbGVFbGVtZW50LnNldEF0dHJpYnV0ZSgncicsIG5vcm1hbGl6ZWRSYWRpdXMpO1xuICAgIHRoaXMuY2lyY2xlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2N4JywgcmFkaXVzKTtcbiAgICB0aGlzLmNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjeScsIHJhZGl1cyk7XG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgY29uc3QgbmV3VmFsdWVOdW1iZXIgPSB2YWxpZGF0ZU51bWJlcihuZXdWYWx1ZSk7XG5cbiAgICAvLyBjaGVjayBpZiBhdHRyaWJ1dGUgdmFsdWUgaXMgbnVtYmVyXG4gICAgaWYgKG5ld1ZhbHVlTnVtYmVyID09PSBudWxsKSByZXR1cm47XG5cbiAgICAvLyB2YWxpZGF0ZSBhdHRyaWJ1dGUgcmFuZ2VzXG4gICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICBjYXNlICdyYWRpdXMnOlxuICAgICAgICBpZiAobmV3VmFsdWVOdW1iZXIgPCAwKSByZXR1cm47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3Ryb2tlJzpcbiAgICAgICAgaWYgKG5ld1ZhbHVlTnVtYmVyIDwgMCkgcmV0dXJuO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Byb2dyZXNzJzpcbiAgICAgICAgaWYgKG5hbWUgPT09ICdwcm9ncmVzcycpXG4gICAgICAgICAgaWYgKG5ld1ZhbHVlTnVtYmVyIDwgMCB8fCBuZXdWYWx1ZU51bWJlciA+IDEwMCkgcmV0dXJuO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzW2BfJHtuYW1lfWBdID0gbmV3VmFsdWVOdW1iZXI7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnQodGhpcy5fcmFkaXVzLCB0aGlzLl9zdHJva2UsIHRoaXMuX3Byb2dyZXNzKTtcbiAgfVxuXG4gIGdldCByYWRpdXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JhZGl1cztcbiAgfVxuXG4gIHNldCByYWRpdXModmFsKSB7XG4gICAgY29uc3QgbnVtID0gdmFsaWRhdGVOdW1iZXIodmFsKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgncmFkaXVzJywgbnVtKTtcbiAgfVxuXG4gIGdldCBzdHJva2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cm9rZTtcbiAgfVxuXG4gIHNldCBzdHJva2UodmFsKSB7XG4gICAgY29uc3QgbnVtID0gdmFsaWRhdGVOdW1iZXIodmFsKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgbnVtKTtcbiAgfVxuXG4gIGdldCBwcm9ncmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvZ3Jlc3M7XG4gIH1cblxuICBzZXQgcHJvZ3Jlc3ModmFsKSB7XG4gICAgY29uc3QgbnVtID0gdmFsaWRhdGVOdW1iZXIodmFsKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgncHJvZ3Jlc3MnLCBudW0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2dyZXNzUmluZztcbiIsIi8qKlxuICogQGZpbGUgTWFuYWdlIHByb2dyZXNzIHJpbmcgZm9yIHBhZ2VcbiAqL1xuXG5pbXBvcnQgUHJvZ3Jlc3NSaW5nIGZyb20gJy4uL2NvbXBvbmVudHMvUHJvZ3Jlc3NSaW5nJztcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscyc7XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3Byb2dyZXNzLXJpbmcnLCBQcm9ncmVzc1JpbmcpO1xubGV0IHByb2dyZXNzUmluZ0VsZW1lbnQ7XG5cbi8qKlxuICogU2V0IHByb2dyZXNzIHJpbmcgc2l6ZSwgYXR0YWNoIHRvIERPTVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gcHJvZ3Jlc3MgcmluZyBjb250YWluZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSByaW5nIHJhZGl1c1xuICogQHBhcmFtIHtudW1iZXJ9IHN0cm9rZSAtIHJpbmcgd2lkdGhcbiAqIEBwYXJhbSB7bnVtYmVyfSBwcm9ncmVzcyAtIGluaXRpYWwgcHJvZ3Jlc3NcbiAqL1xuY29uc3QgaW5pdGlhbGl6ZVByb2dyZXNzUmluZyA9IChcbiAgY29udGFpbmVyLFxuICByYWRpdXMgPSAwLFxuICBzdHJva2UgPSAwLFxuICBwcm9ncmVzcyA9IDAsXG4pID0+IHtcbiAgcHJvZ3Jlc3NSaW5nRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ3Byb2dyZXNzLXJpbmcnLCB7XG4gICAgcmFkaXVzLFxuICAgIHN0cm9rZSxcbiAgICBwcm9ncmVzcyxcbiAgfSk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9ncmVzc1JpbmdFbGVtZW50KTtcbn07XG5cbi8qKlxuICogR2V0IHByb2dyZXNzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IC0gY3VycmVudCBwcm9ncmVzc1xuICovXG5jb25zdCBnZXRQcm9ncmVzcyA9ICgpID0+IHByb2dyZXNzUmluZ0VsZW1lbnQucHJvZ3Jlc3M7XG5cbi8qKlxuICogU2V0IHByb2dyZXNzXG4gKiBAcGFyYW0ge251bWJlcn0gcHJvZ3Jlc3MgLSBwcm9ncmVzcyB0byBzZXRcbiAqL1xuY29uc3Qgc2V0UHJvZ3Jlc3MgPSAocHJvZ3Jlc3MpID0+IHtcbiAgcHJvZ3Jlc3NSaW5nRWxlbWVudC5wcm9ncmVzcyA9IHByb2dyZXNzO1xufTtcblxuLyoqXG4gKiBTdGFydCB0aGUgcHJvZ3Jlc3MgYmFyXG4gKiBAcGFyYW0ge251bWJlcn0gdGlja0xlbmd0aCAtIGFtb3VudCBvZiBwcm9ncmVzcyB0byBkZWNyZWFzZVxuICogQHBhcmFtIHtudW1iZXJ9IHRpY2tGcmVxdWVuY3kgLSBob3cgb2Z0ZW4gdG8gZGVjcmVhc2UgcHJvZ3Jlc3MgKGluIG1zKVxuICovXG5jb25zdCBzdGFydFByb2dyZXNzUmluZyA9ICh0aWNrTGVuZ3RoLCB0aWNrRnJlcXVlbmN5KSA9PiB7XG4gIGNvbnN0IHRpY2tlciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAocHJvZ3Jlc3NSaW5nRWxlbWVudC5wcm9ncmVzcyA8PSAwKSBjbGVhckludGVydmFsKHRpY2tlcik7XG4gICAgc2V0UHJvZ3Jlc3MocHJvZ3Jlc3NSaW5nRWxlbWVudC5wcm9ncmVzcyAtIHRpY2tMZW5ndGgpO1xuICB9LCB0aWNrRnJlcXVlbmN5KTtcbn07XG5cbmV4cG9ydCB7IGluaXRpYWxpemVQcm9ncmVzc1JpbmcsIGdldFByb2dyZXNzLCBzZXRQcm9ncmVzcywgc3RhcnRQcm9ncmVzc1JpbmcgfTtcbiIsIi8qKlxuICogQGZpbGUgRW50cnkgcG9pbnQgZm9yIGFwcGxpY2F0aW9uXG4gKi9cblxuaW1wb3J0IHsgaW5pdGlhbGl6ZVRhc2tMaXN0IH0gZnJvbSAnLi90YXNrTGlzdCc7XG5pbXBvcnQgeyBpbml0aWFsaXplUHJvZ3Jlc3NSaW5nLCBzdGFydFByb2dyZXNzUmluZyB9IGZyb20gJy4vcHJvZ3Jlc3NSaW5nJztcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGluaXRpYWxpemVQcm9ncmVzc1JpbmcoXG4gICAgZG9jdW1lbnQuYm9keSxcbiAgICBNYXRoLm1pbih3aW5kb3cuaW5uZXJXaWR0aCAvIDMsIHdpbmRvdy5pbm5lckhlaWdodCAvIDMpLFxuICAgIDEwLFxuICAgIDEwMCxcbiAgKTtcbiAgc3RhcnRQcm9ncmVzc1JpbmcoMC41LCA2MCk7XG4gIGluaXRpYWxpemVUYXNrTGlzdChkb2N1bWVudC5ib2R5KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==