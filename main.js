(()=>{"use strict";const t=({element:t,...e})=>{const n=document.createElement(t);return Object.entries(e).forEach((([t,e])=>{"innerText"===t||"innerHTML"===t?n[t]=e:n.setAttribute(t,e)})),n};class e extends HTMLElement{static get observedAttributes(){return["title","description"]}constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .container {\n        background: lightblue;\n        font-family: Roboto, sans-serif;\n        margin: 1em;\n        padding: 0.5em;\n        position: relative;\n        border-radius: 5px;\n      }\n\n      .title {\n        font-size: 1.25rem;\n      }\n\n      .description {\n        font-size: 1rem;\n        color: darkgray;\n      }\n\n      .task-button {\n        position: absolute;\n        padding: 0.5em;\n        color: rgba(51, 51, 51, 0.5);\n      }\n\n      .task-button:hover {\n        border-radius: 50%;\n        background: rgba(238, 238, 238, 0.5);\n        color: rgba(51, 51, 51, 1);\n        cursor: pointer;\n      }\n\n      #edit-button {\n        display: none;\n      }\n\n      .container:hover > #edit-button {\n        display: initial;\n        top: 0;\n        right: 0;\n      }\n\n      #finish-button {\n        bottom: 0;\n        right: 1.5em;\n      }\n\n      #delete-button {\n        bottom: 0;\n        right: 0;\n      }\n    ",this.materialIconLinkElement=t({element:"link",rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),this.containerElement=t({element:"div",class:"container"}),this.titleElement=t({element:"h1",class:"title"}),this.descriptionElement=t({element:"h2",class:"description"}),this.editTaskButton=t({element:"span",class:"material-icons task-button",id:"edit-button",innerText:"mode"}),this.finishTaskButton=t({element:"span",class:"material-icons task-button",id:"finish-button",innerText:"done"}),this.deleteTaskButton=t({element:"span",class:"material-icons task-button",id:"delete-button",innerText:"delete"}),this.shadow.append(this.materialIconLinkElement,this.styleElement,this.containerElement),this.containerElement.append(this.titleElement,this.descriptionElement,this.editTaskButton,this.finishTaskButton,this.deleteTaskButton)}attributeChangedCallback(t,e,n){switch(t){case"title":this.titleElement.innerText=n;break;case"description":this.descriptionElement.innerText=n}}}customElements.define("task-item",e);class n extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .task-form {\n        margin: 1em;\n        padding: 1em 20%;\n        font-family: Roboto, sans-serif;\n        display: flex;\n        flex-direction: column;\n        border-radius: 5px;\n      }\n\n      .task-input[type='text'] {\n        margin-bottom: 1em;\n        padding: 0.75em;\n        border-radius: 5px;\n        border: 1px solid #777;\n        font-size: 0.9rem;\n        color: #444;\n      }\n\n      .task-input[type='text']:focus {\n        border: 2px solid #0077b6;\n        outline: none;\n        box-shadow: none;\n      }\n\n      .task-input[type='text']::placeholder {\n        color: #777;\n      }\n\n      #submit-input {\n        width: 100%;\n        margin: auto;\n        background: rgba(51, 51, 51, 0.75);\n        border-radius: 5px;\n        outline: none;\n        border: none;\n        color: white;\n        padding: 1em;\n        font-size: 1rem;\n      }\n\n      #submit-input:hover {\n        cursor: pointer;\n        background: rgba(51, 51, 51, 1);\n      }\n    ",this.containerElement=t({element:"form",class:"task-form"}),this.titleInputLabel=t({element:"label",for:"title-input",innerText:"Title"}),this.titleInputElement=t({element:"input",class:"task-input",id:"title-input",type:"text",name:"title",placeholder:"task title"}),this.descriptionInputLabel=t({element:"label",for:"description-input",innerText:"Description"}),this.descriptionInputElement=t({element:"input",class:"task-input",id:"description-input",type:"text",name:"description",placeholder:"task description"}),this.submitInputElement=t({element:"input",class:"task-input",id:"submit-input",type:"submit",value:"Add"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.titleInputLabel,this.titleInputElement,this.descriptionInputLabel,this.descriptionInputElement,this.submitInputElement)}}customElements.define("task-item-form",n);class i extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .container {\n        margin: 1em;\n        font-family: Roboto, sans-serif;\n        border: 1px solid #aaa;\n        border-radius: 5px;\n      }\n\n      .title {\n        text-align: center;\n      }\n    ",this.containerElement=t({element:"div",class:"container"}),this.titleElement=t({element:"h1",class:"title",innerText:"Task List"}),this.taskItemListContainerElement=t({element:"div",class:"task-item-container"}),this.taskItemFormElement=t({element:"task-item-form",class:"task-item-form"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.titleElement,this.taskItemListContainerElement,this.taskItemFormElement)}}customElements.define("task-list",i);let s=[];const o=t({element:"task-list"}),r=Array.from(o.shadowRoot.childNodes).find((t=>"container"===t.getAttribute("class"))),a=r.querySelector(".task-item-container"),l=r.querySelector(".task-item-form"),d=Array.from(l.shadowRoot.childNodes).find((t=>"task-form"===t.getAttribute("class"))),m=Array.from(d.querySelectorAll('.task-input[type="text"]')).reduce(((t,e)=>({...t,[e.name]:e})),{}),c=e=>{const{title:n,description:i}=e,s=t({element:"task-item",title:n,description:i}),o=(t=>{const e=Array.from(Array.from(t.shadowRoot.childNodes).find((t=>"container"===t.getAttribute("class"))).querySelectorAll(".task-button"));return{finish:e.find((t=>"finish-button"===t.getAttribute("id"))),delete:e.find((t=>"delete-button"===t.getAttribute("id"))),edit:e.find((t=>"edit-button"===t.getAttribute("id")))}})(s);o.finish.addEventListener("click",(()=>p(e))),o.delete.addEventListener("click",(()=>p(e))),o.edit.addEventListener("click",(()=>window.alert("editting task!"))),a.append(s)},p=t=>{const{title:e,description:n}=t,i=s.findIndex((({title:t,description:i})=>e===t&&n===i));s.splice(i,1),window.localStorage.setItem("tasks",JSON.stringify(s)),a.querySelector(`[title="${e}"][description="${n}"]`).remove()},u=t=>{t.preventDefault();const{title:{value:e},description:{value:n}}=m;let[i,o]=[e.trim(),n.trim()];var r;i&&o?s.some((({title:t,description:e})=>i===t&&o===e))?console.error({title:i,description:o}," already defined"):(r={title:i,description:o},s.push(r),window.localStorage.setItem("tasks",JSON.stringify(s)),c(r),Object.values(m).forEach((t=>t.value=""))):console.error("task fields cannot be empty")};window.addEventListener("DOMContentLoaded",(()=>{document.body.appendChild(o),d.addEventListener("submit",u),window.localStorage.getItem("tasks")||window.localStorage.setItem("tasks",JSON.stringify([])),s=JSON.parse(window.localStorage.getItem("tasks")),s.forEach((t=>c(t)))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL2NvbXBvbmVudHMvdGFzay1pdGVtLmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL3Rhc2staXRlbS1mb3JtLmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL3Rhc2stbGlzdC5qcyIsIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvc2NyaXB0cy90YXNrLWxpc3QuanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwibmFtZXMiOlsiY3JlYXRlRWxlbWVudCIsImVsZW1lbnQiLCJlbGVtZW50VHlwZSIsImF0dHJpYnV0ZXMiLCJkb2N1bWVudCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJUYXNrSXRlbSIsIkhUTUxFbGVtZW50Iiwic3VwZXIiLCJ0aGlzIiwic2hhZG93IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsInN0eWxlRWxlbWVudCIsImlubmVyVGV4dCIsIm1hdGVyaWFsSWNvbkxpbmtFbGVtZW50IiwicmVsIiwiaHJlZiIsImNvbnRhaW5lckVsZW1lbnQiLCJjbGFzcyIsInRpdGxlRWxlbWVudCIsImRlc2NyaXB0aW9uRWxlbWVudCIsImVkaXRUYXNrQnV0dG9uIiwiaWQiLCJmaW5pc2hUYXNrQnV0dG9uIiwiZGVsZXRlVGFza0J1dHRvbiIsImFwcGVuZCIsIm5hbWUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJUYXNrSXRlbUZvcm0iLCJ0aXRsZUlucHV0TGFiZWwiLCJmb3IiLCJ0aXRsZUlucHV0RWxlbWVudCIsInR5cGUiLCJwbGFjZWhvbGRlciIsImRlc2NyaXB0aW9uSW5wdXRMYWJlbCIsImRlc2NyaXB0aW9uSW5wdXRFbGVtZW50Iiwic3VibWl0SW5wdXRFbGVtZW50IiwiVGFza0xpc3QiLCJ0YXNrSXRlbUxpc3RDb250YWluZXJFbGVtZW50IiwidGFza0l0ZW1Gb3JtRWxlbWVudCIsInRhc2tzIiwidGFza0xpc3QiLCJ0YXNrTGlzdENvbnRhaW5lciIsIkFycmF5IiwiZnJvbSIsInNoYWRvd1Jvb3QiLCJjaGlsZE5vZGVzIiwiZmluZCIsImVsZW0iLCJnZXRBdHRyaWJ1dGUiLCJ0YXNrSXRlbUxpc3RDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwidGFza0l0ZW1Gb3JtIiwidGFza0l0ZW1Gb3JtQ29udGFpbmVyIiwidGFza0l0ZW1Gb3JtSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlZHVjZSIsImFjYyIsImFkZFRhc2tUb0RvbSIsIm5ld1Rhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidGFza0l0ZW0iLCJidXR0b25zIiwidGFzayIsImZpbmlzaCIsImJ0biIsImRlbGV0ZSIsImVkaXQiLCJnZXRUYXNrSXRlbUJ1dHRvbnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVsZXRlVGFzayIsIndpbmRvdyIsImFsZXJ0IiwidGFza1RvRGVsZXRlIiwidGFza0luZGV4IiwiZmluZEluZGV4IiwidCIsImQiLCJzcGxpY2UiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlbW92ZSIsImhhbmRsZVRhc2tGb3JtU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidHJpbW1lZFRpdGxlIiwidHJpbW1lZERlc2NyaXB0aW9uIiwidHJpbSIsInNvbWUiLCJjb25zb2xlIiwiZXJyb3IiLCJwdXNoIiwidmFsdWVzIiwiaW5wdXQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJnZXRJdGVtIiwicGFyc2UiXSwibWFwcGluZ3MiOiJtQkFNQSxNQUFNQSxFQUFnQixFQUFHQyxRQUFTQyxLQUFnQkMsTUFDaEQsTUFBTUYsRUFBVUcsU0FBU0osY0FBY0UsR0FZdkMsT0FUQUcsT0FBT0MsUUFBUUgsR0FBWUksU0FBUSxFQUFFQyxF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TUFDTixDQUFFakMsTUFBTzRCLEVBQWMzQixZQUFhNEIsR0FDcEMscUJBMUZXOUIsRUErRlAsQ0FBRUMsTUFBTzRCLEVBQWMzQixZQUFhNEIsR0E3RjVDakQsRUFBTXNELEtBQUtuQyxHQUNYYSxPQUFPUSxhQUFhQyxRQUFRLFFBQVNDLEtBQUtDLFVBQVUzQyxJQUNwRGtCLEVBQWFDLEdBNEZiL0QsT0FBT21HLE9BQU96QyxHQUFvQnhELFNBQVNrRyxHQUFXQSxFQUFNaEcsTUFBUSxNQW5CbEU0RixRQUFRQyxNQUFNLGdDQ3RKbEJyQixPQUFPRixpQkFBaUIsb0JBQW9CLEtBQ3ZCM0UsU0FBU3NHLEtENEtYQyxZQUFZekQsR0FDN0JZLEVBQXNCaUIsaUJBQWlCLFNBQVVlLEdBRzVDYixPQUFPUSxhQUFhbUIsUUFBUSxVQUMvQjNCLE9BQU9RLGFBQWFDLFFBQVEsUUFBU0MsS0FBS0MsVUFBVSxLQUV0RDNDLEVBQVEwQyxLQUFLa0IsTUFBTTVCLE9BQU9RLGFBQWFtQixRQUFRLFVBQy9DM0QsRUFBTTFDLFNBQVNrRSxHQUFTTixFQUFhTSxTIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZXMgYW4gSFRNTEVsZW1lbnQgYW5kIHNldCBpdHMgYXR0cmlidXRlc1xuICogQ3JlYXRlZCB0byByZWR1Y2UgYm9pbGVycGxhdGUgZnJvbSBlbGVtZW50IGNyZWF0aW9uXG4gKiBAcGFyYW0ge3tzdHJpbmc6IHN0cmluZ319IHByb3BzIC0gb2JqIGNvbnRhaW5pbmcgZWxlbWVudCBuYW1lIGFuZCBhdHRyaWJ1dGVcbiAqIEByZXR1cm4gZWxlbWVudCAtIG5ldyBIVE1MRWxlbWVudCBjcmVhdGVkXG4gKi9cbmNvbnN0IGNyZWF0ZUVsZW1lbnQgPSAoeyBlbGVtZW50OiBlbGVtZW50VHlwZSwgLi4uYXR0cmlidXRlcyB9KSA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnRUeXBlKTsgLy8gY3JlYXRlIGVsZW1lbnRcblxuICAvLyBzZXQgYXR0cmlidXRlc1xuICBPYmplY3QuZW50cmllcyhhdHRyaWJ1dGVzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBpZiAoa2V5ID09PSAnaW5uZXJUZXh0JyB8fCBrZXkgPT09ICdpbm5lckhUTUwnKSB7XG4gICAgICAvLyBzb21lIHByb3BzIGxpa2UgaW5uZXJIVE1MIGFyZSBub3QgYXR0cmlidXRlcyBhbmQgc2hvdWxkIGJlIGFzc2lnbmVkIGRpcmVjdGx5XG4gICAgICBlbGVtZW50W2tleV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbmV4cG9ydCB7IGNyZWF0ZUVsZW1lbnQgfTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscy9pbmRleC5qcyc7XG5cbmNsYXNzIFRhc2tJdGVtIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gWyd0aXRsZScsICdkZXNjcmlwdGlvbiddO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8vIGNyZWF0ZSBzaGFkb3cgcm9vdFxuICAgIHRoaXMuc2hhZG93ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG5cbiAgICB0aGlzLnN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgdGhpcy5zdHlsZUVsZW1lbnQuaW5uZXJUZXh0ID0gYFxuICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgIGJhY2tncm91bmQ6IGxpZ2h0Ymx1ZTtcbiAgICAgICAgZm9udC1mYW1pbHk6IFJvYm90bywgc2Fucy1zZXJpZjtcbiAgICAgICAgbWFyZ2luOiAxZW07XG4gICAgICAgIHBhZGRpbmc6IDAuNWVtO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgIH1cblxuICAgICAgLnRpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAxLjI1cmVtO1xuICAgICAgfVxuXG4gICAgICAuZGVzY3JpcHRpb24ge1xuICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgIGNvbG9yOiBkYXJrZ3JheTtcbiAgICAgIH1cblxuICAgICAgLnRhc2stYnV0dG9uIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBwYWRkaW5nOiAwLjVlbTtcbiAgICAgICAgY29sb3I6IHJnYmEoNTEsIDUxLCA1MSwgMC41KTtcbiAgICAgIH1cblxuICAgICAgLnRhc2stYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDIzOCwgMjM4LCAyMzgsIDAuNSk7XG4gICAgICAgIGNvbG9yOiByZ2JhKDUxLCA1MSwgNTEsIDEpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgICNlZGl0LWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC5jb250YWluZXI6aG92ZXIgPiAjZWRpdC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBpbml0aWFsO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgfVxuXG4gICAgICAjZmluaXNoLWJ1dHRvbiB7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgcmlnaHQ6IDEuNWVtO1xuICAgICAgfVxuXG4gICAgICAjZGVsZXRlLWJ1dHRvbiB7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICB9XG4gICAgYDtcblxuICAgIHRoaXMubWF0ZXJpYWxJY29uTGlua0VsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdsaW5rJyxcbiAgICAgIHJlbDogJ3N0eWxlc2hlZXQnLFxuICAgICAgaHJlZjogJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vaWNvbj9mYW1pbHk9TWF0ZXJpYWwrSWNvbnMnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnZGl2JyxcbiAgICAgIGNsYXNzOiAnY29udGFpbmVyJyxcbiAgICB9KTtcbiAgICB0aGlzLnRpdGxlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgZWxlbWVudDogJ2gxJyxcbiAgICAgIGNsYXNzOiAndGl0bGUnLFxuICAgIH0pO1xuICAgIHRoaXMuZGVzY3JpcHRpb25FbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnaDInLFxuICAgICAgY2xhc3M6ICdkZXNjcmlwdGlvbicsXG4gICAgfSk7XG5cbiAgICB0aGlzLmVkaXRUYXNrQnV0dG9uID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnc3BhbicsXG4gICAgICBjbGFzczogJ21hdGVyaWFsLWljb25zIHRhc2stYnV0dG9uJyxcbiAgICAgIGlkOiAnZWRpdC1idXR0b24nLFxuICAgICAgaW5uZXJUZXh0OiAnbW9kZScsXG4gICAgfSk7XG5cbiAgICB0aGlzLmZpbmlzaFRhc2tCdXR0b24gPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdzcGFuJyxcbiAgICAgIGNsYXNzOiAnbWF0ZXJpYWwtaWNvbnMgdGFzay1idXR0b24nLFxuICAgICAgaWQ6ICdmaW5pc2gtYnV0dG9uJyxcbiAgICAgIGlubmVyVGV4dDogJ2RvbmUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5kZWxldGVUYXNrQnV0dG9uID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnc3BhbicsXG4gICAgICBjbGFzczogJ21hdGVyaWFsLWljb25zIHRhc2stYnV0dG9uJyxcbiAgICAgIGlkOiAnZGVsZXRlLWJ1dHRvbicsXG4gICAgICBpbm5lclRleHQ6ICdkZWxldGUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zaGFkb3cuYXBwZW5kKFxuICAgICAgdGhpcy5tYXRlcmlhbEljb25MaW5rRWxlbWVudCxcbiAgICAgIHRoaXMuc3R5bGVFbGVtZW50LFxuICAgICAgdGhpcy5jb250YWluZXJFbGVtZW50LFxuICAgICk7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LmFwcGVuZChcbiAgICAgIHRoaXMudGl0bGVFbGVtZW50LFxuICAgICAgdGhpcy5kZXNjcmlwdGlvbkVsZW1lbnQsXG4gICAgICB0aGlzLmVkaXRUYXNrQnV0dG9uLFxuICAgICAgdGhpcy5maW5pc2hUYXNrQnV0dG9uLFxuICAgICAgdGhpcy5kZWxldGVUYXNrQnV0dG9uLFxuICAgICk7XG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICBjYXNlICd0aXRsZSc6XG4gICAgICAgIHRoaXMudGl0bGVFbGVtZW50LmlubmVyVGV4dCA9IG5ld1ZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Rlc2NyaXB0aW9uJzpcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbkVsZW1lbnQuaW5uZXJUZXh0ID0gbmV3VmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCd0YXNrLWl0ZW0nLCBUYXNrSXRlbSk7XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSAnLi4vdXRpbHMvaW5kZXguanMnO1xuXG5jbGFzcyBUYXNrSXRlbUZvcm0gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXG4gICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHRoaXMuc3R5bGVFbGVtZW50LmlubmVyVGV4dCA9IGBcbiAgICAgIC50YXNrLWZvcm0ge1xuICAgICAgICBtYXJnaW46IDFlbTtcbiAgICAgICAgcGFkZGluZzogMWVtIDIwJTtcbiAgICAgICAgZm9udC1mYW1pbHk6IFJvYm90bywgc2Fucy1zZXJpZjtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgfVxuXG4gICAgICAudGFzay1pbnB1dFt0eXBlPSd0ZXh0J10ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgIHBhZGRpbmc6IDAuNzVlbTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjNzc3O1xuICAgICAgICBmb250LXNpemU6IDAuOXJlbTtcbiAgICAgICAgY29sb3I6ICM0NDQ7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWlucHV0W3R5cGU9J3RleHQnXTpmb2N1cyB7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMDc3YjY7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWlucHV0W3R5cGU9J3RleHQnXTo6cGxhY2Vob2xkZXIge1xuICAgICAgICBjb2xvcjogIzc3NztcbiAgICAgIH1cblxuICAgICAgI3N1Ym1pdC1pbnB1dCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtYXJnaW46IGF1dG87XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoNTEsIDUxLCA1MSwgMC43NSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIHBhZGRpbmc6IDFlbTtcbiAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgfVxuXG4gICAgICAjc3VibWl0LWlucHV0OmhvdmVyIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDUxLCA1MSwgNTEsIDEpO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdmb3JtJyxcbiAgICAgIGNsYXNzOiAndGFzay1mb3JtJyxcbiAgICB9KTtcblxuICAgIHRoaXMudGl0bGVJbnB1dExhYmVsID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnbGFiZWwnLFxuICAgICAgZm9yOiAndGl0bGUtaW5wdXQnLFxuICAgICAgaW5uZXJUZXh0OiAnVGl0bGUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy50aXRsZUlucHV0RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgZWxlbWVudDogJ2lucHV0JyxcbiAgICAgIGNsYXNzOiAndGFzay1pbnB1dCcsXG4gICAgICBpZDogJ3RpdGxlLWlucHV0JyxcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIG5hbWU6ICd0aXRsZScsXG4gICAgICBwbGFjZWhvbGRlcjogJ3Rhc2sgdGl0bGUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0TGFiZWwgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdsYWJlbCcsXG4gICAgICBmb3I6ICdkZXNjcmlwdGlvbi1pbnB1dCcsXG4gICAgICBpbm5lclRleHQ6ICdEZXNjcmlwdGlvbicsXG4gICAgfSk7XG5cbiAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnaW5wdXQnLFxuICAgICAgY2xhc3M6ICd0YXNrLWlucHV0JyxcbiAgICAgIGlkOiAnZGVzY3JpcHRpb24taW5wdXQnLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgbmFtZTogJ2Rlc2NyaXB0aW9uJyxcbiAgICAgIHBsYWNlaG9sZGVyOiAndGFzayBkZXNjcmlwdGlvbicsXG4gICAgfSk7XG5cbiAgICB0aGlzLnN1Ym1pdElucHV0RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgZWxlbWVudDogJ2lucHV0JyxcbiAgICAgIGNsYXNzOiAndGFzay1pbnB1dCcsXG4gICAgICBpZDogJ3N1Ym1pdC1pbnB1dCcsXG4gICAgICB0eXBlOiAnc3VibWl0JyxcbiAgICAgIHZhbHVlOiAnQWRkJyxcbiAgICB9KTtcblxuICAgIHRoaXMuc2hhZG93LmFwcGVuZCh0aGlzLnN0eWxlRWxlbWVudCwgdGhpcy5jb250YWluZXJFbGVtZW50KTtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKFxuICAgICAgdGhpcy50aXRsZUlucHV0TGFiZWwsXG4gICAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LFxuICAgICAgdGhpcy5kZXNjcmlwdGlvbklucHV0TGFiZWwsXG4gICAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LFxuICAgICAgdGhpcy5zdWJtaXRJbnB1dEVsZW1lbnQsXG4gICAgKTtcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3Rhc2staXRlbS1mb3JtJywgVGFza0l0ZW1Gb3JtKTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscy9pbmRleC5qcyc7XG5cbmNsYXNzIFRhc2tMaXN0IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5zaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgdGhpcy5zdHlsZUVsZW1lbnQuaW5uZXJUZXh0ID0gYFxuICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMWVtO1xuICAgICAgICBmb250LWZhbWlseTogUm9ib3RvLCBzYW5zLXNlcmlmO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjYWFhO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICB9XG5cbiAgICAgIC50aXRsZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnZGl2JyxcbiAgICAgIGNsYXNzOiAnY29udGFpbmVyJyxcbiAgICB9KTtcblxuICAgIHRoaXMudGl0bGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnaDEnLFxuICAgICAgY2xhc3M6ICd0aXRsZScsXG4gICAgICBpbm5lclRleHQ6ICdUYXNrIExpc3QnLFxuICAgIH0pO1xuXG4gICAgdGhpcy50YXNrSXRlbUxpc3RDb250YWluZXJFbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnZGl2JyxcbiAgICAgIGNsYXNzOiAndGFzay1pdGVtLWNvbnRhaW5lcicsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRhc2tJdGVtRm9ybUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICd0YXNrLWl0ZW0tZm9ybScsXG4gICAgICBjbGFzczogJ3Rhc2staXRlbS1mb3JtJyxcbiAgICB9KTtcblxuICAgIHRoaXMuc2hhZG93LmFwcGVuZCh0aGlzLnN0eWxlRWxlbWVudCwgdGhpcy5jb250YWluZXJFbGVtZW50KTtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKFxuICAgICAgdGhpcy50aXRsZUVsZW1lbnQsXG4gICAgICB0aGlzLnRhc2tJdGVtTGlzdENvbnRhaW5lckVsZW1lbnQsXG4gICAgICB0aGlzLnRhc2tJdGVtRm9ybUVsZW1lbnQsXG4gICAgKTtcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3Rhc2stbGlzdCcsIFRhc2tMaXN0KTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscy9pbmRleC5qcyc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvdGFzay1pdGVtLmpzJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy90YXNrLWl0ZW0tZm9ybS5qcyc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvdGFzay1saXN0LmpzJztcblxubGV0IHRhc2tzID0gW107XG5cbi8vIHRhc2stbGlzdCBlbGVtZW50XG5jb25zdCB0YXNrTGlzdCA9IGNyZWF0ZUVsZW1lbnQoe1xuICBlbGVtZW50OiAndGFzay1saXN0Jyxcbn0pO1xuXG4vLyB0YXNrLWxpc3QgY29udGFpbmVyIGVsZW1lbnRcbmNvbnN0IHRhc2tMaXN0Q29udGFpbmVyID0gQXJyYXkuZnJvbSh0YXNrTGlzdC5zaGFkb3dSb290LmNoaWxkTm9kZXMpLmZpbmQoXG4gIChlbGVtKSA9PiBlbGVtLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA9PT0gJ2NvbnRhaW5lcicsXG4pO1xuLy8gdGFzay1saXN0IGl0ZW0gbGlzdCBjb250YWluZXIgZWxlbWVudFxuY29uc3QgdGFza0l0ZW1MaXN0Q29udGFpbmVyID0gdGFza0xpc3RDb250YWluZXIucXVlcnlTZWxlY3RvcihcbiAgJy50YXNrLWl0ZW0tY29udGFpbmVyJyxcbik7XG5cbi8vIHRhc2staXRlbS1mb3JtIGVsZW1lbnRcbmNvbnN0IHRhc2tJdGVtRm9ybSA9IHRhc2tMaXN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWl0ZW0tZm9ybScpO1xuLy8gdGFzay1pdGVtLWZvcm0gY29udGFpbmVyIGVsZW1lbnRcbmNvbnN0IHRhc2tJdGVtRm9ybUNvbnRhaW5lciA9IEFycmF5LmZyb20oXG4gIHRhc2tJdGVtRm9ybS5zaGFkb3dSb290LmNoaWxkTm9kZXMsXG4pLmZpbmQoKGVsZW0pID0+IGVsZW0uZ2V0QXR0cmlidXRlKCdjbGFzcycpID09PSAndGFzay1mb3JtJyk7XG4vLyB0YXNrLWl0ZW0tZm9ybSB0ZXh0IGlucHV0IGVsZW1lbnRzXG5jb25zdCB0YXNrSXRlbUZvcm1JbnB1dHMgPSBBcnJheS5mcm9tKFxuICB0YXNrSXRlbUZvcm1Db250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnRhc2staW5wdXRbdHlwZT1cInRleHRcIl0nKSxcbikucmVkdWNlKChhY2MsIGVsZW0pID0+ICh7IC4uLmFjYywgW2VsZW0ubmFtZV06IGVsZW0gfSksIHt9KTtcblxuLyoqXG4gKiBHZXQgYnV0dG9uIGVsZW1lbnRzIGZyb20gdGFzay1pdGVtIGVsZW1lbnRcbiAqIEBwYXJhbSB7dGFzay1pdGVtfSB0YXNrIC0gdGFzay1pdGVtIGVsZW1lbnRcbiAqIEByZXR1cm4ge1tidXR0b24tcm9sZV06IGJ1dHRvbn0gLSBidXR0b24gZWxlbWVudHMgb2JqZWN0XG4gKi9cbmNvbnN0IGdldFRhc2tJdGVtQnV0dG9ucyA9ICh0YXNrKSA9PiB7XG4gIGNvbnN0IGJ1dHRvbnMgPSBBcnJheS5mcm9tKFxuICAgIEFycmF5LmZyb20odGFzay5zaGFkb3dSb290LmNoaWxkTm9kZXMpXG4gICAgICAuZmluZCgoZWxlbSkgPT4gZWxlbS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT09ICdjb250YWluZXInKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWJ1dHRvbicpLFxuICApO1xuXG4gIHJldHVybiB7XG4gICAgZmluaXNoOiBidXR0b25zLmZpbmQoKGJ0bikgPT4gYnRuLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2ZpbmlzaC1idXR0b24nKSxcbiAgICBkZWxldGU6IGJ1dHRvbnMuZmluZCgoYnRuKSA9PiBidG4uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnZGVsZXRlLWJ1dHRvbicpLFxuICAgIGVkaXQ6IGJ1dHRvbnMuZmluZCgoYnRuKSA9PiBidG4uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnZWRpdC1idXR0b24nKSxcbiAgfTtcbn07XG5cbi8qKlxuICogQWRkIHRhc2sgb2JqZWN0IHRvIERPTSwgYWRkIGV2ZW50IGxpc3RlbmVycyB0byB0YXNrLWl0ZW1cbiAqIEBwYXJhbSB7dGFza30gbmV3VGFzayAtIG5ldyB0YXNrIHRvIGJlIGFkZGVkXG4gKi9cbmNvbnN0IGFkZFRhc2tUb0RvbSA9IChuZXdUYXNrKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0gPSBuZXdUYXNrO1xuXG4gIC8vIGFkZCB0YXNrIHRvIGRvbVxuICBjb25zdCB0YXNrSXRlbSA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgIGVsZW1lbnQ6ICd0YXNrLWl0ZW0nLFxuICAgIHRpdGxlLFxuICAgIGRlc2NyaXB0aW9uLFxuICB9KTtcbiAgY29uc3QgYnV0dG9ucyA9IGdldFRhc2tJdGVtQnV0dG9ucyh0YXNrSXRlbSk7XG4gIGJ1dHRvbnMuZmluaXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGVsZXRlVGFzayhuZXdUYXNrKSk7XG4gIGJ1dHRvbnMuZGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGVsZXRlVGFzayhuZXdUYXNrKSk7XG4gIGJ1dHRvbnMuZWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHdpbmRvdy5hbGVydCgnZWRpdHRpbmcgdGFzayEnKSk7XG4gIHRhc2tJdGVtTGlzdENvbnRhaW5lci5hcHBlbmQodGFza0l0ZW0pO1xufTtcblxuLyoqXG4gKiBBZGQgbmV3IHRhc2sgdG8gbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0ge3Rhc2t9IG5ld1Rhc2sgLSBuZXcgdGFzayB0byBiZSBhZGRlZFxuICovXG5jb25zdCBhZGRUYXNrID0gKG5ld1Rhc2spID0+IHtcbiAgLy8gdXBkYXRlIGxvY2FsU3RvcmFnZVxuICB0YXNrcy5wdXNoKG5ld1Rhc2spO1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgYWRkVGFza1RvRG9tKG5ld1Rhc2spO1xufTtcblxuLyoqXG4gKiBVcGRhdGUgZXhpc3RpbmcgdGFza1xuICogQHBhcmFtIHt0YXNrfSBwcmV2VGFzayAtIHRhc2sgdG8gYmUgdXBkYXRlZFxuICogQHBhcmFtIHt0YXNrfSBuZXh0VGFzayAtIHVwZGF0ZWQgdGFza1xuICovXG5jb25zdCB1cGRhdGVUYXNrID0gKHByZXZUYXNrLCBuZXh0VGFzaykgPT4ge1xuICBjb25zdCB7IHRpdGxlOiBwcmV2VGl0bGUsIGRlc2NyaXB0aW9uOiBwcmV2RGVzY3JpcHRpb24gfSA9IHByZXZUYXNrO1xuICBjb25zdCB7IHRpdGxlOiBuZXh0VGl0bGUsIGRlc2NyaXB0aW9uOiBuZXh0RGVzY3JpcHRpb24gfSA9IG5leHRUYXNrO1xuXG4gIC8vIHVwZGF0ZSBsb2NhbFN0b3JhZ2VcbiAgY29uc3QgdGFza0luZGV4ID0gdGFza3MuZmluZEluZGV4KFxuICAgICh7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KSA9PlxuICAgICAgcHJldlRpdGxlID09PSB0aXRsZSAmJiBwcmV2RGVzY3JpcHRpb24gPT09IGRlc2NyaXB0aW9uLFxuICApO1xuICB0YXNrc1t0YXNrSW5kZXhdID0gbmV4dFRhc2s7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xuXG4gIC8vIHVwZGF0ZSB0YXNrIGluIGRvbVxuICBjb25zdCB0YXNrSXRlbSA9IHRhc2tJdGVtTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxuICAgIGBbdGl0bGU9XCIke3ByZXZUaXRsZX1cIl1bZGVzY3JpcHRpb249XCIke3ByZXZEZXNjcmlwdGlvbn1cIl1gLFxuICApO1xuICB0YXNrSXRlbS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgbmV4dFRpdGxlKTtcbiAgdGFza0l0ZW0uc2V0QXR0cmlidXRlKCdkZXNjcmlwdGlvbicsIG5leHREZXNjcmlwdGlvbik7XG59O1xuXG4vKipcbiAqIERlbGV0aW5nIGV4aXN0aW5nIHRhc2tcbiAqIEBwYXJhbSB7dGFza30gbmV3VGFzayAtIHRhc2sgdG8gYmUgZGVsZXRlZFxuICovXG5jb25zdCBkZWxldGVUYXNrID0gKHRhc2tUb0RlbGV0ZSkgPT4ge1xuICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiB9ID0gdGFza1RvRGVsZXRlO1xuXG4gIC8vIHVwZGF0ZSBsb2NhbFN0b3JhZ2VcbiAgY29uc3QgdGFza0luZGV4ID0gdGFza3MuZmluZEluZGV4KFxuICAgICh7IHRpdGxlOiB0LCBkZXNjcmlwdGlvbjogZCB9KSA9PiB0aXRsZSA9PT0gdCAmJiBkZXNjcmlwdGlvbiA9PT0gZCxcbiAgKTtcbiAgdGFza3Muc3BsaWNlKHRhc2tJbmRleCwgMSk7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xuXG4gIC8vIHJlbW92ZSB0YXNrIGZyb20gZG9tXG4gIGNvbnN0IHRhc2tJdGVtID0gdGFza0l0ZW1MaXN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgYFt0aXRsZT1cIiR7dGl0bGV9XCJdW2Rlc2NyaXB0aW9uPVwiJHtkZXNjcmlwdGlvbn1cIl1gLFxuICApO1xuICB0YXNrSXRlbS5yZW1vdmUoKTtcbn07XG5cbi8qKlxuICogR2V0IHRhc2tsaXN0XG4gKiBAcmV0dXJuIHtUYXNrW119IC0gY3VycmVudCBsaXN0IG9mIHRhc2tzXG4gKi9cbmNvbnN0IGdldFRhc2tzID0gKCkgPT4ge1xuICByZXR1cm4gdGFza3M7XG59O1xuXG4vKipcbiAqIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb24sIHZhbGlkYXRlIGlucHV0XG4gKiBAcGFyYW0ge0V2ZW50fSBlIC0gc3VibWl0IGV2ZW50XG4gKiBAcGFyYW0ge1Rhc2t9IG5ld1Rhc2sgLSBuZXcgdGFzayB0byBiZSBzdWJtaXR0ZWRcbiAqL1xuY29uc3QgaGFuZGxlVGFza0Zvcm1TdWJtaXQgPSAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnQgcGFnZSByZWxvYWRcblxuICBjb25zdCB7XG4gICAgdGl0bGU6IHsgdmFsdWU6IHRpdGxlIH0sXG4gICAgZGVzY3JpcHRpb246IHsgdmFsdWU6IGRlc2NyaXB0aW9uIH0sXG4gIH0gPSB0YXNrSXRlbUZvcm1JbnB1dHM7XG4gIGxldCBbdHJpbW1lZFRpdGxlLCB0cmltbWVkRGVzY3JpcHRpb25dID0gW3RpdGxlLnRyaW0oKSwgZGVzY3JpcHRpb24udHJpbSgpXTtcblxuICAvLyBjaGVjayBpZiBmaWVsZHMgYXJlIG5vbi1lbXB0eVxuICBpZiAoIXRyaW1tZWRUaXRsZSB8fCAhdHJpbW1lZERlc2NyaXB0aW9uKSB7XG4gICAgY29uc29sZS5lcnJvcigndGFzayBmaWVsZHMgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gY2hlY2sgaWYgdGFzayBhbHJlYWR5IGV4aXN0c1xuICBpZiAoXG4gICAgdGFza3Muc29tZShcbiAgICAgICh7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KSA9PlxuICAgICAgICB0cmltbWVkVGl0bGUgPT09IHRpdGxlICYmIHRyaW1tZWREZXNjcmlwdGlvbiA9PT0gZGVzY3JpcHRpb24sXG4gICAgKVxuICApIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgeyB0aXRsZTogdHJpbW1lZFRpdGxlLCBkZXNjcmlwdGlvbjogdHJpbW1lZERlc2NyaXB0aW9uIH0sXG4gICAgICAnIGFscmVhZHkgZGVmaW5lZCcsXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBhZGRUYXNrKHsgdGl0bGU6IHRyaW1tZWRUaXRsZSwgZGVzY3JpcHRpb246IHRyaW1tZWREZXNjcmlwdGlvbiB9KTtcbiAgT2JqZWN0LnZhbHVlcyh0YXNrSXRlbUZvcm1JbnB1dHMpLmZvckVhY2goKGlucHV0KSA9PiAoaW5wdXQudmFsdWUgPSAnJykpO1xufTtcblxuY29uc3QgaW5pdGlhbGl6ZVRhc2tMaXN0ID0gKGNvbnRhaW5lckVsZW1lbnQpID0+IHtcbiAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0YXNrTGlzdCk7XG4gIHRhc2tJdGVtRm9ybUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVUYXNrRm9ybVN1Ym1pdCk7XG5cbiAgLy8gcmV0cml2ZSBhbmQgYWRkIHRhc2tzIGZyb20gbG9jYWxTdG9yYWdlXG4gIGlmICghd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0YXNrcycpKSB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KFtdKSk7XG4gIH1cbiAgdGFza3MgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKSk7XG4gIHRhc2tzLmZvckVhY2goKHRhc2spID0+IGFkZFRhc2tUb0RvbSh0YXNrKSk7XG59O1xuXG5leHBvcnQgeyBpbml0aWFsaXplVGFza0xpc3QsIGFkZFRhc2ssIGdldFRhc2tzLCB1cGRhdGVUYXNrLCBkZWxldGVUYXNrIH07XG4iLCJpbXBvcnQgeyBpbml0aWFsaXplVGFza0xpc3QgfSBmcm9tICcuL3Rhc2stbGlzdC5qcyc7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBpbml0aWFsaXplVGFza0xpc3QoZG9jdW1lbnQuYm9keSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=