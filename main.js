(()=>{"use strict";const e=(e,t={},n={})=>{const{namespace:o}=n;let s;return s=o?document.createElementNS(o,e):document.createElement(e),Object.entries(t).forEach((([e,t])=>{o||!(e in s)?s.setAttribute(e,t):s[e]=t})),s},t=e=>{const t=parseInt(e,10);return Number.isNaN(t)?null:t};class n extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .container {\n        padding: 1em;\n        font: normal 1rem 'Source Sans Pro', sans-serif;\n        border-radius: 5px;\n        background: #00b4d8;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        box-sizing: border-box;\n      }\n\n      .task-item-container {\n        flex: 1;\n        overflow: auto;\n      }\n\n      .title {\n        text-align: center;\n        color: #fff;\n      }\n    ",this.containerElement=e("div",{className:"container"}),this.titleElement=e("h1",{className:"title",innerText:"Task List"}),this.taskItemListContainerElement=e("div",{className:"task-item-container"}),this.taskItemFormElement=e("task-item-form",{className:"task-item-form"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.titleElement,this.taskItemListContainerElement,this.taskItemFormElement)}}customElements.define("task-list",n);class o extends HTMLElement{static get observedAttributes(){return["radius","stroke","progress"]}constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style");const t="http://www.w3.org/2000/svg";this.svgElement=e("svg",{class:"svg"},{namespace:t}),this.circleElement=e("circle",{class:"circle"},{namespace:t}),this.baseCircleElement=e("circle",{class:"base-circle"},{namespace:t}),this._radius=0,this._stroke=0,this._progress=0,this.updateComponent(this._radius,this._stroke,this._progress),this.root.append(this.styleElement,this.svgElement),this.svgElement.append(this.baseCircleElement,this.circleElement),this.h1Container=e("foreignObject",{x:91,y:91,width:182,height:182},{namespace:t}),this.h1Container.appendChild(e("h1",{innerHTML:"hello"},{namespace:"http://www.w3.org/1999/xhtml"})),this.svgElement.appendChild(this.h1Container)}updateComponent(e,t,n){const o=e-2*t,s=2*o*Math.PI;this.styleElement.innerText=`\n      .svg {\n        overflow: hidden;\n        width: ${2*e}px;\n        height: ${2*e}px;\n      }\n\n      .base-circle {\n        stroke: #fff;\n        stroke-dasharray: ${s} ${s};\n        stroke-dashoffset: 0;\n        fill: #48cae4;\n        stroke-width: ${t};\n      }\n\n      .circle {\n        stroke: #0095b3;\n        stroke-dasharray: ${s} ${s};\n        stroke-dashoffset: ${(1-n/100)*s};\n        fill: transparent;\n        stroke-width: ${t+2};\n\n        transition: stroke-dashoffset 0.5s;\n        transform: rotate(-90deg);\n        transform-origin: 50% 50%;\n      }\n    `,this.circleElement.setAttribute("r",o),this.circleElement.setAttribute("cx",e),this.circleElement.setAttribute("cy",e),this.baseCircleElement.setAttribute("r",o),this.baseCircleElement.setAttribute("cx",e),this.baseCircleElement.setAttribute("cy",e)}attributeChangedCallback(e,n,o){const s=t(o);if(null!==s){switch(e){case"radius":case"stroke":if(s<0)return;break;case"progress":if("progress"===e&&(s<0||s>100))return;break;default:return}this[`_${e}`]=s,this.updateComponent(this._radius,this._stroke,this._progress)}}get radius(){return this._radius}set radius(e){const n=t(e);this.setAttribute("radius",n)}get stroke(){return this._stroke}set stroke(e){const n=t(e);this.setAttribute("stroke",n)}get progress(){return this._progress}set progress(e){const n=t(e);this.setAttribute("progress",n)}}window.customElements.define("progress-ring",o);class s extends HTMLElement{static get observedAttributes(){return["name","estimated-pomodoros","used-pomodoros","selected"]}constructor(){super(),this.usedPomodoros=0,this.estimatedPomodoros=0,this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .item-container {\n        margin-bottom: 1em;\n        padding: 0.5em 2em;\n        border-radius: 5px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .selected {\n        background: #90e0ef;\n      }\n\n      .text-container {\n        background: #fff;\n        color: #555;\n        position: relative;\n        padding: 0.5em;\n        border-radius: 5px;\n        font-size: 1rem;\n        display: flex;\n        align-items: center;\n      }\n      \n      .name {\n        width: 80%;\n        display: inline-block;\n        margin: 0.5em 0;\n      }\n      \n      .pomodoro-container {\n        width: 20%;\n        height: 100%;\n        display: inline-block;\n        position: relative;\n        text-align: right;\n      }\n\n      .pomodoro-label {\n        position: absolute;\n        top: -0.5em;\n        right: 0;\n        font: 0.8rem 'Source Sans Pro', sans-serif;\n        color: #777;\n      }\n\n      .pomodoro {\n        display: inline-block;\n        margin: 1em 0 0 0;\n      }\n\n      .task-button {\n        display: none;\n        position: absolute;\n        padding: 0.25em;\n        font-size: 1.2rem;\n        color: #fff;\n      }\n\n      .task-button:hover {\n        border-radius: 50%;\n        background: rgba(0, 180, 216, 0.25);\n        color: #00b4d8;\n        cursor: pointer;\n      }\n\n      .item-container:hover > .task-button {\n        display: initial;\n      }\n\n\n      #edit-button {\n        top: 0;\n        right: 0;\n      }\n\n      #delete-button {\n        bottom: 0;\n        right: 0;\n      }\n    ",this.materialIconLinkElement=e("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),this.textContainerElement=e("div",{className:"text-container"}),this.itemContainerElement=e("div",{className:"item-container"}),this.nameElement=e("p",{className:"name"}),this.pomodoroContainer=e("span",{className:"pomodoro-container"}),this.pomodoroLabel=e("label",{className:"pomodoro-label",for:"pomodoro",innerText:"Progress"}),this.pomodoroElement=e("p",{className:"pomodoro",id:"pomodoro"}),this.editTaskButton=e("span",{className:"material-icons task-button",id:"edit-button",innerText:"mode"}),this.finishTaskButton=e("span",{className:"material-icons task-button",id:"finish-button",innerText:"done"}),this.deleteTaskButton=e("span",{className:"material-icons task-button",id:"delete-button",innerText:"delete"}),this.shadow.append(this.materialIconLinkElement,this.styleElement,this.itemContainerElement),this.itemContainerElement.append(this.textContainerElement,this.editTaskButton,this.deleteTaskButton),this.textContainerElement.append(this.nameElement,this.pomodoroContainer),this.pomodoroContainer.append(this.pomodoroLabel,this.pomodoroElement)}attributeChangedCallback(e,t,n){switch(e){case"name":this.nameElement.innerText=n;break;case"used-pomodoros":this.usedPomodoros=n,this.pomodoroElement.innerText=`${this.usedPomodoros}/${this.estimatedPomodoros}`;break;case"estimated-pomodoros":this.estimatedPomodoros=n,this.pomodoroElement.innerText=`${this.usedPomodoros}/${this.estimatedPomodoros}`;break;case"selected":this.itemContainerElement.className="true"===n?"item-container selected":"item-container"}}}customElements.define("task-item",s);class i extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .task-form {\n        margin: 1em;\n        padding: 1em ;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .field-input-container {\n        margin-bottom: 1em;\n        border-radius: 5px;\n        position: relative;\n        width: 100%;\n        display: flex;\n      }\n\n      .name-input-container {\n        flex: 4;\n        position: relative;\n      }\n\n      .pomodoro-input-container {\n        flex: 1;\n        min-width: 75px;\n        position: relative;\n      }\n\n      .task-input-label {\n        position: absolute;\n        z-index: 2;\n        font: 0.8rem 'Source Sans Pro', sans-serif;\n        color: #777;\n      }\n\n      #name-input-label {\n        top: 0.2em;\n        left: 0.75em;\n      }\n\n      #pomodoro-input-label {\n        top: 0.2em;\n        left: 0.75em;\n      }\n\n      .task-input[type='text'],\n      .task-input[type='number'] {\n        padding: 1.5em 0.75em 0.75em 0.75em;\n        border: none;\n        font: 1rem 'Source Sans Pro', sans-serif;\n        color: #444;\n        box-sizing: border-box;\n        width: 100%;\n      }\n\n      .task-input:focus {\n        box-shadow: 0 0 0 2pt #48cae4;\n        outline: none;\n        z-index: 1;\n        position: relative;\n      }\n\n      #name-input {\n        border-top-left-radius: 5px;\n        border-bottom-left-radius: 5px;\n      }\n\n      #pomodoro-input {\n        border-top-right-radius: 5px;\n        border-bottom-right-radius: 5px;\n      }\n\n      .task-input[type='text']::placeholder,\n      .task-input[type='number']::placeholder {\n        color: #c8c8c8;\n      }\n\n      #submit-input {\n        width: 50%;\n        margin: auto;\n        background: #4dcfe9;\n        border-radius: 5px;\n        outline: none;\n        border: none;\n        color: white;\n        padding: 0.5em;\n        font: 1.2rem 'Source Sans Pro', sans-serif;\n      }\n\n      #submit-input:hover {\n        background: #48cae4;\n        cursor: pointer;\n      }\n    ",this.containerElement=e("form",{className:"task-form"}),this.fieldInputContainer=e("div",{className:"field-input-container"}),this.nameInputContainer=e("div",{className:"name-input-container"}),this.nameInputLabel=e("label",{className:"task-input-label",id:"name-input-label",for:"name-input",innerText:"Name"}),this.nameInputElement=e("input",{className:"task-input",id:"name-input",type:"text",name:"name",placeholder:"Task Description..."}),this.pomodoroInputContainer=e("div",{className:"pomodoro-input-container"}),this.pomodoroInputLabel=e("label",{className:"task-input-label",id:"pomodoro-input-label",for:"pomodoro-input",innerText:"Pomodoros"}),this.pomodoroInputElement=e("input",{className:"task-input",id:"pomodoro-input",type:"number",name:"pomodoro",placeholder:"#",min:"1"}),this.submitInputElement=e("input",{className:"task-input",id:"submit-input",type:"submit",value:"ADD"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.fieldInputContainer,this.submitInputElement),this.fieldInputContainer.append(this.nameInputContainer,this.pomodoroInputContainer),this.nameInputContainer.append(this.nameInputLabel,this.nameInputElement),this.pomodoroInputContainer.append(this.pomodoroInputLabel,this.pomodoroInputElement)}}customElements.define("task-item-form",i);let r,a,m,l,d,c,p=[];const u=t=>{const{name:n,usedPomodoros:o,estimatedPomodoros:s}=t,i=e("task-item",{name:n,"used-pomodoros":o,"estimated-pomodoros":s,selected:!0}),r=(e=>{const t=Array.from(e.shadowRoot.querySelector(".item-container").querySelectorAll(".task-button"));return{finish:t.find((e=>"finish-button"===e.getAttribute("id"))),delete:t.find((e=>"delete-button"===e.getAttribute("id"))),edit:t.find((e=>"edit-button"===e.getAttribute("id")))}})(i);r.delete.addEventListener("click",(()=>(e=>{const{name:t}=e,{taskIndex:n,taskElement:o}=(e=>({taskIndex:p.findIndex((t=>t.name===e)),taskElement:m.querySelector(`[name="${e}"]`)}))(t);p.splice(n,1),window.localStorage.setItem("tasks",JSON.stringify(p)),o.remove()})(t))),r.edit.addEventListener("click",(()=>{console.log("editing task!")})),m.append(i)},h=e=>{e.preventDefault();const{name:{value:t},pomodoro:{value:n}}=c,o=t.trim();var s;o?n?p.some((e=>e.name===o))?console.error({name:o}," already defined"):(s={name:o,estimatedPomodoros:n,usedPomodoros:0,selected:!1},p.push(s),window.localStorage.setItem("tasks",JSON.stringify(p)),u(s),Object.values(c).forEach((e=>{e.value=""}))):console.error("task pomodoros cannot be empty"):console.error("task name cannot be empty")};let b;const f=e=>{b.progress=e};window.addEventListener("DOMContentLoaded",(()=>{var e;e=document.querySelector(".progress-ring"),b=e,(e=>{r=e,a=r.shadowRoot.querySelector(".container"),m=a.querySelector(".task-item-container"),l=a.querySelector(".task-item-form"),d=l.shadowRoot.querySelector(".task-form"),c={name:d.querySelector("#name-input"),pomodoro:d.querySelector("#pomodoro-input")},d.addEventListener("submit",h),window.localStorage.getItem("tasks")||window.localStorage.setItem("tasks",JSON.stringify([])),p=JSON.parse(window.localStorage.getItem("tasks")),p.forEach((e=>u(e)))})(document.querySelector(".task-list")),b.radius=180,b.stroke=8,((e,t)=>{const n=setInterval((()=>{b.progress<=0&&clearInterval(n),f(b.progress-.5)}),60)})(),setTimeout((()=>{f(50)}),7e3)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL2NvbXBvbmVudHMvVGFza0xpc3QuanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL2NvbXBvbmVudHMvUHJvZ3Jlc3NSaW5nLmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL1Rhc2tJdGVtLmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL1Rhc2tJdGVtRm9ybS5qcyIsIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvc2NyaXB0cy90YXNrTGlzdC5qcyIsIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvc2NyaXB0cy9wcm9ncmVzc1JpbmcuanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwibmFtZXMiOlsiY3JlYXRlRWxlbWVudCIsImVsZW1lbnRUeXBlIiwicHJvcHMiLCJvcHRpb25zIiwibmFtZXNwYWNlIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsInZhbGlkYXRlTnVtYmVyIiwibnVtIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc05hTiIsIlRhc2tMaXN0IiwiSFRNTEVsZW1lbnQiLCJzdXBlciIsInRoaXMiLCJzaGFkb3ciLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwic3R5bGVFbGVtZW50IiwiaW5uZXJUZXh0IiwiY29udGFpbmVyRWxlbWVudCIsImNsYXNzTmFtZSIsInRpdGxlRWxlbWVudCIsInRhc2tJdGVtTGlzdENvbnRhaW5lckVsZW1lbnQiLCJ0YXNrSXRlbUZvcm1FbGVtZW50IiwiYXBwZW5kIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJQcm9ncmVzc1JpbmciLCJyb290Iiwic3ZnTmFtZXNwYWNlIiwic3ZnRWxlbWVudCIsImNsYXNzIiwiY2lyY2xlRWxlbWVudCIsImJhc2VDaXJjbGVFbGVtZW50IiwiX3JhZGl1cyIsIl9zdHJva2UiLCJfcHJvZ3Jlc3MiLCJ1cGRhdGVDb21wb25lbnQiLCJoMUNvbnRhaW5lciIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsInJhZGl1cyIsInN0cm9rZSIsInByb2dyZXNzIiwibm9ybWFsaXplZFJhZGl1cyIsImNpcmN1bWZlcmVuY2UiLCJNYXRoIiwiUEkiLCJuYW1lIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsIm5ld1ZhbHVlTnVtYmVyIiwidmFsIiwid2luZG93IiwiVGFza0l0ZW0iLCJ1c2VkUG9tb2Rvcm9zIiwiZXN0aW1hdGVkUG9tb2Rvcm9zIiwibWF0ZXJpYWxJY29uTGlua0VsZW1lbnQiLCJyZWwiLCJocmVmIiwidGV4dENvbnRhaW5lckVsZW1lbnQiLCJpdGVtQ29udGFpbmVyRWxlbWVudCIsIm5hbWVFbGVtZW50IiwicG9tb2Rvcm9Db250YWluZXIiLCJwb21vZG9yb0xhYmVsIiwiZm9yIiwicG9tb2Rvcm9FbGVtZW50IiwiaWQiLCJlZGl0VGFza0J1dHRvbiIsImZpbmlzaFRhc2tCdXR0b24iLCJkZWxldGVUYXNrQnV0dG9uIiwiVGFza0l0ZW1Gb3JtIiwiZmllbGRJbnB1dENvbnRhaW5lciIsIm5hbWVJbnB1dENvbnRhaW5lciIsIm5hbWVJbnB1dExhYmVsIiwibmFtZUlucHV0RWxlbWVudCIsInR5cGUiLCJwbGFjZWhvbGRlciIsInBvbW9kb3JvSW5wdXRDb250YWluZXIiLCJwb21vZG9yb0lucHV0TGFiZWwiLCJwb21vZG9yb0lucHV0RWxlbWVudCIsIm1pbiIsInN1Ym1pdElucHV0RWxlbWVudCIsInRhc2tMaXN0IiwidGFza0xpc3RDb250YWluZXIiLCJ0YXNrTGlzdEl0ZW1Db250YWluZXIiLCJ0YXNrSXRlbUZvcm0iLCJ0YXNrSXRlbUZvcm1Db250YWluZXIiLCJ0YXNrSXRlbUZvcm1JbnB1dHMiLCJ0YXNrcyIsImFkZFRhc2tUb0RvbSIsIm5ld1Rhc2siLCJ0YXNrSXRlbSIsInNlbGVjdGVkIiwiYnV0dG9ucyIsInRhc2siLCJBcnJheSIsImZyb20iLCJzaGFkb3dSb290IiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmaW5pc2giLCJmaW5kIiwiYnRuIiwiZ2V0QXR0cmlidXRlIiwiZGVsZXRlIiwiZWRpdCIsImdldFRhc2tJdGVtQnV0dG9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXNrVG9EZWxldGUiLCJ0YXNrSW5kZXgiLCJ0YXNrRWxlbWVudCIsImZpbmRJbmRleCIsImdldFRhc2siLCJzcGxpY2UiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlbW92ZSIsImRlbGV0ZVRhc2siLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlVGFza0Zvcm1TdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJwb21vZG9ybyIsInRyaW1tZWROYW1lIiwidHJpbSIsInNvbWUiLCJlcnJvciIsInB1c2giLCJ2YWx1ZXMiLCJpbnB1dCIsInByb2dyZXNzUmluZ0VsZW1lbnQiLCJzZXRQcm9ncmVzcyIsImdldEl0ZW0iLCJwYXJzZSIsImluaXRpYWxpemVUYXNrTGlzdCIsInRpY2tMZW5ndGgiLCJ0aWNrRnJlcXVlbmN5IiwidGlja2VyIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwic3RhcnRQcm9ncmVzc1JpbmciLCJzZXRUaW1lb3V0Il0sIm1hcHBpbmdzIjoibUJBUUEsTUFBTUEsRUFBZ0IsQ0FBQ0MsRUFBYUMsRUFBUSxHQUFJQyxFQUFVLE1BQ3hELE1BQU0sVUFBRUMsR0FBY0QsRUFDdEIsSUFBSUUsRUFVSixPQVRlQSxFQUFYRCxFQUFxQkUsU0FBU0MsZ0JBQWdCSCxFQUFXSCxHQUM5Q0ssU0FBU04sY0FBY0MsR0FHdENPLE9BQU9DLFFBQVFQLEdBQU9RLFNBQVEsRUFBRUMsRUFBS0MsTUFDL0JSLEtBQWVPLEtBQU9OLEdBQVVBLEVBQVFRLGFBQWFGLEVB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Y0FBYyxjQUM5RFgsRUFBcUIsQ0FDbkJ4QyxLQUFNdUMsRUFBc0JZLGNBQWMsZUFDMUMyQixTQUFVdkMsRUFBc0JZLGNBQWMsb0JBOEtoRFosRUFBc0JxQixpQkFBaUIsU0FBVWUsR0FiNUN0RSxPQUFPOEQsYUFBYXFCLFFBQVEsVUFDL0JuRixPQUFPOEQsYUFBYUMsUUFBUSxRQUFTQyxLQUFLQyxVQUFVLEtBRXREN0IsRUFBUTRCLEtBQUtvQixNQUFNcEYsT0FBTzhELGFBQWFxQixRQUFRLFVBQy9DL0MsRUFBTTVGLFNBQVNrRyxHQUFTTCxFQUFhSyxNRXpMckMyQyxDQUFtQmpKLFNBQVMwRyxjQUFjLGVENEIxQ21DLEVBQW9CN0YsT0MxQkosSUQyQmhCNkYsRUFBb0I1RixPQzNCQyxFRGNHLEVBQUNpRyxFQUFZQyxLQUNyQyxNQUFNQyxFQUFTQyxhQUFZLEtBQ3JCUixFQUFvQjNGLFVBQVksR0FBR29HLGNBQWNGLEdBQ3JETixFQUFZRCxFQUFvQjNGLFNDaEJoQixNQUFLLEtBQXZCcUcsR0FDQUMsWUFBVyxLQUNUVixFQUFZLE1BQ1gsUyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVzIGFuIEhUTUxFbGVtZW50IGFuZCBzZXQgaXRzIGF0dHJpYnV0ZXNcbiAqIENyZWF0ZWQgdG8gcmVkdWNlIGJvaWxlcnBsYXRlIGZyb20gZWxlbWVudCBjcmVhdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnRUeXBlIC0gZWxlbWVudCB0YWcgbmFtZVxuICogQHBhcmFtIHt7a2V5OiBzdHJpbmd9fSBwcm9wcyAtIGVsZW1lbnQncyBhdHRyaWJ1dGVzL3Byb3BlcnRpZXNcbiAqIEBwYXJhbSB7e29wdGlvbjogc3RyaW5nfX0gb3B0aW9ucyAtIGVsZW1lbnQgb3B0aW9ucyBzdWNoIGFzIG5hbWVzcGFjZVxuICogQHJldHVybiBlbGVtZW50IC0gbmV3IEhUTUxFbGVtZW50IGNyZWF0ZWRcbiAqL1xuY29uc3QgY3JlYXRlRWxlbWVudCA9IChlbGVtZW50VHlwZSwgcHJvcHMgPSB7fSwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgbmFtZXNwYWNlIH0gPSBvcHRpb25zO1xuICBsZXQgZWxlbWVudDtcbiAgaWYgKG5hbWVzcGFjZSkgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2UsIGVsZW1lbnRUeXBlKTtcbiAgZWxzZSBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50VHlwZSk7IC8vIGNyZWF0ZSBlbGVtZW50XG5cbiAgLy8gc2V0IGF0dHJpYnV0ZXMvcHJvcGVydGllc1xuICBPYmplY3QuZW50cmllcyhwcm9wcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKG5hbWVzcGFjZSB8fCAhKGtleSBpbiBlbGVtZW50KSkgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgZWxzZSBlbGVtZW50W2tleV0gPSB2YWx1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG4vKipcbiAqIFRyaWVzIHRvIGNvbnZlcnQgaW5wdXQgdG8gYSBudW1iZXJcbiAqIEBwYXJhbSB7YW55fSB2YWx1ZSAtIHRvIGJlIGNvbnZlcnRlZCB0byBudW1iZXJcbiAqIEByZXR1cm4ge251bWJlciB8IG51bGx9IC0gbnVtYmVyIGlmIHN1Y2Nlc3NmdWwsIG51bGwgb3RoZXJ3aXNlXG4gKi9cbmNvbnN0IHZhbGlkYXRlTnVtYmVyID0gKHZhbHVlKSA9PiB7XG4gIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gIHJldHVybiBOdW1iZXIuaXNOYU4obnVtKSA/IG51bGwgOiBudW07XG59O1xuXG5leHBvcnQgeyBjcmVhdGVFbGVtZW50LCB2YWxpZGF0ZU51bWJlciB9O1xuIiwiLyoqXG4gKiBAZmlsZSB0YXNrLWxpc3Qgd2ViIGNvbXBvbmVudFxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscyc7XG5cbi8qKlxuICogQ3VzdG9tIHdlYiBjb21wb25lbnQgcmVwcmVzZW50aW5nIGEgdGFzayBsaXN0LlxuICogQGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAqL1xuY2xhc3MgVGFza0xpc3QgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSBgXG4gICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICBmb250OiBub3JtYWwgMXJlbSAnU291cmNlIFNhbnMgUHJvJywgc2Fucy1zZXJpZjtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiAjMDBiNGQ4O1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWl0ZW0tY29udGFpbmVyIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC50aXRsZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB9XG4gICAgYDtcblxuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2NvbnRhaW5lcicsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRpdGxlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2gxJywge1xuICAgICAgY2xhc3NOYW1lOiAndGl0bGUnLFxuICAgICAgaW5uZXJUZXh0OiAnVGFzayBMaXN0JyxcbiAgICB9KTtcblxuICAgIHRoaXMudGFza0l0ZW1MaXN0Q29udGFpbmVyRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Rhc2staXRlbS1jb250YWluZXInLFxuICAgIH0pO1xuXG4gICAgdGhpcy50YXNrSXRlbUZvcm1FbGVtZW50ID0gY3JlYXRlRWxlbWVudCgndGFzay1pdGVtLWZvcm0nLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWl0ZW0tZm9ybScsXG4gICAgfSk7XG5cbiAgICB0aGlzLnNoYWRvdy5hcHBlbmQodGhpcy5zdHlsZUVsZW1lbnQsIHRoaXMuY29udGFpbmVyRWxlbWVudCk7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LmFwcGVuZChcbiAgICAgIHRoaXMudGl0bGVFbGVtZW50LFxuICAgICAgdGhpcy50YXNrSXRlbUxpc3RDb250YWluZXJFbGVtZW50LFxuICAgICAgdGhpcy50YXNrSXRlbUZvcm1FbGVtZW50LFxuICAgICk7XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCd0YXNrLWxpc3QnLCBUYXNrTGlzdCk7XG4iLCIvKipcbiAqIEBmaWxlIHByb2dyZXNzLXJpbmcgd2ViIGNvbXBvbmVudFxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIHZhbGlkYXRlTnVtYmVyIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG4vKipcbiAqIEN1c3RvbSB3ZWIgY29tcG9uZW50IHJlcHJlc2VudGluZyBhIHByb2dyZXNzIHJpbmcuXG4gKiBAZXh0ZW5kcyBIVE1MRWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IHN0cm9rZSAtIHdpZHRoIG9mIGNpcmNsZSBzdHJva2VcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSByYWRpdXMgb2YgY2lyY2xlXG4gKiBAcGFyYW0ge251bWJlcn0gcHJvZ3Jlc3MgLSBwcm9ncmVzcyBvZiByaW5nXG4gKi9cbmNsYXNzIFByb2dyZXNzUmluZyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFsncmFkaXVzJywgJ3N0cm9rZScsICdwcm9ncmVzcyddO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMucm9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICAgIGNvbnN0IHN2Z05hbWVzcGFjZSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gICAgdGhpcy5zdmdFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcbiAgICAgICdzdmcnLFxuICAgICAgeyBjbGFzczogJ3N2ZycgfSxcbiAgICAgIHsgbmFtZXNwYWNlOiBzdmdOYW1lc3BhY2UgfSxcbiAgICApO1xuXG4gICAgdGhpcy5jaXJjbGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcbiAgICAgICdjaXJjbGUnLFxuICAgICAgeyBjbGFzczogJ2NpcmNsZScgfSxcbiAgICAgIHsgbmFtZXNwYWNlOiBzdmdOYW1lc3BhY2UgfSxcbiAgICApO1xuICAgIHRoaXMuYmFzZUNpcmNsZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFxuICAgICAgJ2NpcmNsZScsXG4gICAgICB7IGNsYXNzOiAnYmFzZS1jaXJjbGUnIH0sXG4gICAgICB7IG5hbWVzcGFjZTogc3ZnTmFtZXNwYWNlIH0sXG4gICAgKTtcblxuICAgIHRoaXMuX3JhZGl1cyA9IDA7XG4gICAgdGhpcy5fc3Ryb2tlID0gMDtcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDA7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnQodGhpcy5fcmFkaXVzLCB0aGlzLl9zdHJva2UsIHRoaXMuX3Byb2dyZXNzKTtcblxuICAgIHRoaXMucm9vdC5hcHBlbmQodGhpcy5zdHlsZUVsZW1lbnQsIHRoaXMuc3ZnRWxlbWVudCk7XG4gICAgdGhpcy5zdmdFbGVtZW50LmFwcGVuZCh0aGlzLmJhc2VDaXJjbGVFbGVtZW50LCB0aGlzLmNpcmNsZUVsZW1lbnQpO1xuICAgIHRoaXMuaDFDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFxuICAgICAgJ2ZvcmVpZ25PYmplY3QnLFxuICAgICAgeyB4OiA5MSwgeTogOTEsIHdpZHRoOiAxODIsIGhlaWdodDogMTgyIH0sXG4gICAgICB7IG5hbWVzcGFjZTogc3ZnTmFtZXNwYWNlIH0sXG4gICAgKTtcbiAgICB0aGlzLmgxQ29udGFpbmVyLmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2gxJyxcbiAgICAgICAgeyBpbm5lckhUTUw6ICdoZWxsbycgfSxcbiAgICAgICAgeyBuYW1lc3BhY2U6ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJyB9LFxuICAgICAgKSxcbiAgICApO1xuICAgIHRoaXMuc3ZnRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmgxQ29udGFpbmVyKTtcbiAgfVxuXG4gIC8qKiBVcGRhdGVzIGNvbXBvbmVudCB2aWV3ICovXG4gIHVwZGF0ZUNvbXBvbmVudChyYWRpdXMsIHN0cm9rZSwgcHJvZ3Jlc3MpIHtcbiAgICBjb25zdCBub3JtYWxpemVkUmFkaXVzID0gcmFkaXVzIC0gc3Ryb2tlICogMjtcbiAgICBjb25zdCBjaXJjdW1mZXJlbmNlID0gbm9ybWFsaXplZFJhZGl1cyAqIDIgKiBNYXRoLlBJO1xuXG4gICAgdGhpcy5zdHlsZUVsZW1lbnQuaW5uZXJUZXh0ID0gYFxuICAgICAgLnN2ZyB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHdpZHRoOiAkezIgKiByYWRpdXN9cHg7XG4gICAgICAgIGhlaWdodDogJHsyICogcmFkaXVzfXB4O1xuICAgICAgfVxuXG4gICAgICAuYmFzZS1jaXJjbGUge1xuICAgICAgICBzdHJva2U6ICNmZmY7XG4gICAgICAgIHN0cm9rZS1kYXNoYXJyYXk6ICR7Y2lyY3VtZmVyZW5jZX0gJHtjaXJjdW1mZXJlbmNlfTtcbiAgICAgICAgc3Ryb2tlLWRhc2hvZmZzZXQ6IDA7XG4gICAgICAgIGZpbGw6ICM0OGNhZTQ7XG4gICAgICAgIHN0cm9rZS13aWR0aDogJHtzdHJva2V9O1xuICAgICAgfVxuXG4gICAgICAuY2lyY2xlIHtcbiAgICAgICAgc3Ryb2tlOiAjMDA5NWIzO1xuICAgICAgICBzdHJva2UtZGFzaGFycmF5OiAke2NpcmN1bWZlcmVuY2V9ICR7Y2lyY3VtZmVyZW5jZX07XG4gICAgICAgIHN0cm9rZS1kYXNob2Zmc2V0OiAkeygxIC0gcHJvZ3Jlc3MgLyAxMDApICogY2lyY3VtZmVyZW5jZX07XG4gICAgICAgIGZpbGw6IHRyYW5zcGFyZW50O1xuICAgICAgICBzdHJva2Utd2lkdGg6ICR7c3Ryb2tlICsgMn07XG5cbiAgICAgICAgdHJhbnNpdGlvbjogc3Ryb2tlLWRhc2hvZmZzZXQgMC41cztcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDUwJTtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgdGhpcy5jaXJjbGVFbGVtZW50LnNldEF0dHJpYnV0ZSgncicsIG5vcm1hbGl6ZWRSYWRpdXMpO1xuICAgIHRoaXMuY2lyY2xlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2N4JywgcmFkaXVzKTtcbiAgICB0aGlzLmNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjeScsIHJhZGl1cyk7XG5cbiAgICB0aGlzLmJhc2VDaXJjbGVFbGVtZW50LnNldEF0dHJpYnV0ZSgncicsIG5vcm1hbGl6ZWRSYWRpdXMpO1xuICAgIHRoaXMuYmFzZUNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjeCcsIHJhZGl1cyk7XG4gICAgdGhpcy5iYXNlQ2lyY2xlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2N5JywgcmFkaXVzKTtcbiAgfVxuXG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICBjb25zdCBuZXdWYWx1ZU51bWJlciA9IHZhbGlkYXRlTnVtYmVyKG5ld1ZhbHVlKTtcblxuICAgIC8vIGNoZWNrIGlmIGF0dHJpYnV0ZSB2YWx1ZSBpcyBudW1iZXJcbiAgICBpZiAobmV3VmFsdWVOdW1iZXIgPT09IG51bGwpIHJldHVybjtcblxuICAgIC8vIHZhbGlkYXRlIGF0dHJpYnV0ZSByYW5nZXNcbiAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgIGNhc2UgJ3JhZGl1cyc6XG4gICAgICAgIGlmIChuZXdWYWx1ZU51bWJlciA8IDApIHJldHVybjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdHJva2UnOlxuICAgICAgICBpZiAobmV3VmFsdWVOdW1iZXIgPCAwKSByZXR1cm47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncHJvZ3Jlc3MnOlxuICAgICAgICBpZiAobmFtZSA9PT0gJ3Byb2dyZXNzJylcbiAgICAgICAgICBpZiAobmV3VmFsdWVOdW1iZXIgPCAwIHx8IG5ld1ZhbHVlTnVtYmVyID4gMTAwKSByZXR1cm47XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXNbYF8ke25hbWV9YF0gPSBuZXdWYWx1ZU51bWJlcjtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0aGlzLl9yYWRpdXMsIHRoaXMuX3N0cm9rZSwgdGhpcy5fcHJvZ3Jlc3MpO1xuICB9XG5cbiAgZ2V0IHJhZGl1cygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmFkaXVzO1xuICB9XG5cbiAgc2V0IHJhZGl1cyh2YWwpIHtcbiAgICBjb25zdCBudW0gPSB2YWxpZGF0ZU51bWJlcih2YWwpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdyYWRpdXMnLCBudW0pO1xuICB9XG5cbiAgZ2V0IHN0cm9rZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3Ryb2tlO1xuICB9XG5cbiAgc2V0IHN0cm9rZSh2YWwpIHtcbiAgICBjb25zdCBudW0gPSB2YWxpZGF0ZU51bWJlcih2YWwpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdzdHJva2UnLCBudW0pO1xuICB9XG5cbiAgZ2V0IHByb2dyZXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9ncmVzcztcbiAgfVxuXG4gIHNldCBwcm9ncmVzcyh2YWwpIHtcbiAgICBjb25zdCBudW0gPSB2YWxpZGF0ZU51bWJlcih2YWwpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdwcm9ncmVzcycsIG51bSk7XG4gIH1cbn1cblxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgncHJvZ3Jlc3MtcmluZycsIFByb2dyZXNzUmluZyk7XG4iLCIvKipcbiAqIEBmaWxlIHRhc2staXRlbSB3ZWIgY29tcG9uZW50XG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSB0YXNrIGl0ZW0uXG4gKiBAZXh0ZW5kcyBIVE1MRWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IG5hbWUgLSBuYW1lIG9mIHRhc2tcbiAqIEBwYXJhbSB7bnVtYmVyfSBlc3RpbWF0ZWQtcG9tb2Rvcm9zIC0gZXN0aW1hdGVkIG51bWJlciBvZiBwb21vZG9yb3MgbmVlZGVkXG4gKiBAcGFyYW0ge251bWJlcn0gdXNlZC1wb21vZG9yb3MgLSBwb21vZG9yb3MgdXNlZCBzbyBmYXJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2VsZWN0ZWQgLSBpbmRpY2F0ZXMgaWYgdGhlIGN1cnJlbnQgdGFzayBpcyBzZWxlY3RlZFxuICovXG5jbGFzcyBUYXNrSXRlbSBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFsnbmFtZScsICdlc3RpbWF0ZWQtcG9tb2Rvcm9zJywgJ3VzZWQtcG9tb2Rvcm9zJywgJ3NlbGVjdGVkJ107XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy51c2VkUG9tb2Rvcm9zID0gMDtcbiAgICB0aGlzLmVzdGltYXRlZFBvbW9kb3JvcyA9IDA7XG5cbiAgICAvLyBjcmVhdGUgc2hhZG93IHJvb3RcbiAgICB0aGlzLnNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXG4gICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHRoaXMuc3R5bGVFbGVtZW50LmlubmVyVGV4dCA9IGBcbiAgICAgIC5pdGVtLWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgICAgICAgcGFkZGluZzogMC41ZW0gMmVtO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjOTBlMGVmO1xuICAgICAgfVxuXG4gICAgICAudGV4dC1jb250YWluZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgICAgICBjb2xvcjogIzU1NTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBwYWRkaW5nOiAwLjVlbTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5uYW1lIHtcbiAgICAgICAgd2lkdGg6IDgwJTtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBtYXJnaW46IDAuNWVtIDA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5wb21vZG9yby1jb250YWluZXIge1xuICAgICAgICB3aWR0aDogMjAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIH1cblxuICAgICAgLnBvbW9kb3JvLWxhYmVsIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IC0wLjVlbTtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGZvbnQ6IDAuOHJlbSAnU291cmNlIFNhbnMgUHJvJywgc2Fucy1zZXJpZjtcbiAgICAgICAgY29sb3I6ICM3Nzc7XG4gICAgICB9XG5cbiAgICAgIC5wb21vZG9ybyB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgbWFyZ2luOiAxZW0gMCAwIDA7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcGFkZGluZzogMC4yNWVtO1xuICAgICAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAxODAsIDIxNiwgMC4yNSk7XG4gICAgICAgIGNvbG9yOiAjMDBiNGQ4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5pdGVtLWNvbnRhaW5lcjpob3ZlciA+IC50YXNrLWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IGluaXRpYWw7XG4gICAgICB9XG5cblxuICAgICAgI2VkaXQtYnV0dG9uIHtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgIH1cblxuICAgICAgI2RlbGV0ZS1idXR0b24ge1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICB0aGlzLm1hdGVyaWFsSWNvbkxpbmtFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnbGluaycsIHtcbiAgICAgIHJlbDogJ3N0eWxlc2hlZXQnLFxuICAgICAgaHJlZjogJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vaWNvbj9mYW1pbHk9TWF0ZXJpYWwrSWNvbnMnLFxuICAgIH0pO1xuXG4gICAgdGhpcy50ZXh0Q29udGFpbmVyRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RleHQtY29udGFpbmVyJyxcbiAgICB9KTtcbiAgICB0aGlzLml0ZW1Db250YWluZXJFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnaXRlbS1jb250YWluZXInLFxuICAgIH0pO1xuICAgIHRoaXMubmFtZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdwJywge1xuICAgICAgY2xhc3NOYW1lOiAnbmFtZScsXG4gICAgfSk7XG4gICAgdGhpcy5wb21vZG9yb0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdwb21vZG9yby1jb250YWluZXInLFxuICAgIH0pO1xuICAgIHRoaXMucG9tb2Rvcm9MYWJlbCA9IGNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywge1xuICAgICAgY2xhc3NOYW1lOiAncG9tb2Rvcm8tbGFiZWwnLFxuICAgICAgZm9yOiAncG9tb2Rvcm8nLFxuICAgICAgaW5uZXJUZXh0OiAnUHJvZ3Jlc3MnLFxuICAgIH0pO1xuICAgIHRoaXMucG9tb2Rvcm9FbGVtZW50ID0gY3JlYXRlRWxlbWVudCgncCcsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3BvbW9kb3JvJyxcbiAgICAgIGlkOiAncG9tb2Rvcm8nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5lZGl0VGFza0J1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdtYXRlcmlhbC1pY29ucyB0YXNrLWJ1dHRvbicsXG4gICAgICBpZDogJ2VkaXQtYnV0dG9uJyxcbiAgICAgIGlubmVyVGV4dDogJ21vZGUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5maW5pc2hUYXNrQnV0dG9uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ21hdGVyaWFsLWljb25zIHRhc2stYnV0dG9uJyxcbiAgICAgIGlkOiAnZmluaXNoLWJ1dHRvbicsXG4gICAgICBpbm5lclRleHQ6ICdkb25lJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZGVsZXRlVGFza0J1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdtYXRlcmlhbC1pY29ucyB0YXNrLWJ1dHRvbicsXG4gICAgICBpZDogJ2RlbGV0ZS1idXR0b24nLFxuICAgICAgaW5uZXJUZXh0OiAnZGVsZXRlJyxcbiAgICB9KTtcblxuICAgIHRoaXMuc2hhZG93LmFwcGVuZChcbiAgICAgIHRoaXMubWF0ZXJpYWxJY29uTGlua0VsZW1lbnQsXG4gICAgICB0aGlzLnN0eWxlRWxlbWVudCxcbiAgICAgIHRoaXMuaXRlbUNvbnRhaW5lckVsZW1lbnQsXG4gICAgKTtcbiAgICB0aGlzLml0ZW1Db250YWluZXJFbGVtZW50LmFwcGVuZChcbiAgICAgIHRoaXMudGV4dENvbnRhaW5lckVsZW1lbnQsXG4gICAgICB0aGlzLmVkaXRUYXNrQnV0dG9uLFxuICAgICAgdGhpcy5kZWxldGVUYXNrQnV0dG9uLFxuICAgICk7XG4gICAgdGhpcy50ZXh0Q29udGFpbmVyRWxlbWVudC5hcHBlbmQodGhpcy5uYW1lRWxlbWVudCwgdGhpcy5wb21vZG9yb0NvbnRhaW5lcik7XG4gICAgdGhpcy5wb21vZG9yb0NvbnRhaW5lci5hcHBlbmQodGhpcy5wb21vZG9yb0xhYmVsLCB0aGlzLnBvbW9kb3JvRWxlbWVudCk7XG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgdGhpcy5uYW1lRWxlbWVudC5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1c2VkLXBvbW9kb3Jvcyc6XG4gICAgICAgIHRoaXMudXNlZFBvbW9kb3JvcyA9IG5ld1ZhbHVlO1xuICAgICAgICB0aGlzLnBvbW9kb3JvRWxlbWVudC5pbm5lclRleHQgPSBgJHt0aGlzLnVzZWRQb21vZG9yb3N9LyR7dGhpcy5lc3RpbWF0ZWRQb21vZG9yb3N9YDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlc3RpbWF0ZWQtcG9tb2Rvcm9zJzpcbiAgICAgICAgdGhpcy5lc3RpbWF0ZWRQb21vZG9yb3MgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5wb21vZG9yb0VsZW1lbnQuaW5uZXJUZXh0ID0gYCR7dGhpcy51c2VkUG9tb2Rvcm9zfS8ke3RoaXMuZXN0aW1hdGVkUG9tb2Rvcm9zfWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2VsZWN0ZWQnOlxuICAgICAgICB0aGlzLml0ZW1Db250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9XG4gICAgICAgICAgbmV3VmFsdWUgPT09ICd0cnVlJyA/ICdpdGVtLWNvbnRhaW5lciBzZWxlY3RlZCcgOiAnaXRlbS1jb250YWluZXInO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1pdGVtJywgVGFza0l0ZW0pO1xuIiwiLyoqXG4gKiBAZmlsZSB0YXNrLWl0ZW0tZm9ybSB3ZWIgY29tcG9uZW50XG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSB0YXNrIGl0ZW0gZm9ybS5cbiAqIEBleHRlbmRzIEhUTUxFbGVtZW50XG4gKiBAcGFyYW0ge251bWJlcn0gbmFtZSAtIG5hbWUgb2YgdGFza1xuICogQHBhcmFtIHtudW1iZXJ9IGVzdGltYXRlZC1wb21vZG9yb3MgLSBlc3RpbWF0ZWQgbnVtYmVyIG9mIHBvbW9kb3JvcyBuZWVkZWRcbiAqL1xuY2xhc3MgVGFza0l0ZW1Gb3JtIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5zaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcblxuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSBgXG4gICAgICAudGFzay1mb3JtIHtcbiAgICAgICAgbWFyZ2luOiAxZW07XG4gICAgICAgIHBhZGRpbmc6IDFlbSA7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5maWVsZC1pbnB1dC1jb250YWluZXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIH1cblxuICAgICAgLm5hbWUtaW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgZmxleDogNDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICAucG9tb2Rvcm8taW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWluLXdpZHRoOiA3NXB4O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWlucHV0LWxhYmVsIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB6LWluZGV4OiAyO1xuICAgICAgICBmb250OiAwLjhyZW0gJ1NvdXJjZSBTYW5zIFBybycsIHNhbnMtc2VyaWY7XG4gICAgICAgIGNvbG9yOiAjNzc3O1xuICAgICAgfVxuXG4gICAgICAjbmFtZS1pbnB1dC1sYWJlbCB7XG4gICAgICAgIHRvcDogMC4yZW07XG4gICAgICAgIGxlZnQ6IDAuNzVlbTtcbiAgICAgIH1cblxuICAgICAgI3BvbW9kb3JvLWlucHV0LWxhYmVsIHtcbiAgICAgICAgdG9wOiAwLjJlbTtcbiAgICAgICAgbGVmdDogMC43NWVtO1xuICAgICAgfVxuXG4gICAgICAudGFzay1pbnB1dFt0eXBlPSd0ZXh0J10sXG4gICAgICAudGFzay1pbnB1dFt0eXBlPSdudW1iZXInXSB7XG4gICAgICAgIHBhZGRpbmc6IDEuNWVtIDAuNzVlbSAwLjc1ZW0gMC43NWVtO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGZvbnQ6IDFyZW0gJ1NvdXJjZSBTYW5zIFBybycsIHNhbnMtc2VyaWY7XG4gICAgICAgIGNvbG9yOiAjNDQ0O1xuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLnRhc2staW5wdXQ6Zm9jdXMge1xuICAgICAgICBib3gtc2hhZG93OiAwIDAgMCAycHQgIzQ4Y2FlNDtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICAjbmFtZS1pbnB1dCB7XG4gICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDVweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNXB4O1xuICAgICAgfVxuXG4gICAgICAjcG9tb2Rvcm8taW5wdXQge1xuICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNXB4O1xuICAgICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNXB4O1xuICAgICAgfVxuXG4gICAgICAudGFzay1pbnB1dFt0eXBlPSd0ZXh0J106OnBsYWNlaG9sZGVyLFxuICAgICAgLnRhc2staW5wdXRbdHlwZT0nbnVtYmVyJ106OnBsYWNlaG9sZGVyIHtcbiAgICAgICAgY29sb3I6ICNjOGM4Yzg7XG4gICAgICB9XG5cbiAgICAgICNzdWJtaXQtaW5wdXQge1xuICAgICAgICB3aWR0aDogNTAlO1xuICAgICAgICBtYXJnaW46IGF1dG87XG4gICAgICAgIGJhY2tncm91bmQ6ICM0ZGNmZTk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIHBhZGRpbmc6IDAuNWVtO1xuICAgICAgICBmb250OiAxLjJyZW0gJ1NvdXJjZSBTYW5zIFBybycsIHNhbnMtc2VyaWY7XG4gICAgICB9XG5cbiAgICAgICNzdWJtaXQtaW5wdXQ6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjNDhjYWU0O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgYDtcblxuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWZvcm0nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5maWVsZElucHV0Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnZmllbGQtaW5wdXQtY29udGFpbmVyJyxcbiAgICB9KTtcblxuICAgIHRoaXMubmFtZUlucHV0Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnbmFtZS1pbnB1dC1jb250YWluZXInLFxuICAgIH0pO1xuXG4gICAgdGhpcy5uYW1lSW5wdXRMYWJlbCA9IGNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywge1xuICAgICAgY2xhc3NOYW1lOiAndGFzay1pbnB1dC1sYWJlbCcsXG4gICAgICBpZDogJ25hbWUtaW5wdXQtbGFiZWwnLFxuICAgICAgZm9yOiAnbmFtZS1pbnB1dCcsXG4gICAgICBpbm5lclRleHQ6ICdOYW1lJyxcbiAgICB9KTtcblxuICAgIHRoaXMubmFtZUlucHV0RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgY2xhc3NOYW1lOiAndGFzay1pbnB1dCcsXG4gICAgICBpZDogJ25hbWUtaW5wdXQnLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdUYXNrIERlc2NyaXB0aW9uLi4uJyxcbiAgICB9KTtcblxuICAgIHRoaXMucG9tb2Rvcm9JbnB1dENvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3BvbW9kb3JvLWlucHV0LWNvbnRhaW5lcicsXG4gICAgfSk7XG5cbiAgICB0aGlzLnBvbW9kb3JvSW5wdXRMYWJlbCA9IGNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywge1xuICAgICAgY2xhc3NOYW1lOiAndGFzay1pbnB1dC1sYWJlbCcsXG4gICAgICBpZDogJ3BvbW9kb3JvLWlucHV0LWxhYmVsJyxcbiAgICAgIGZvcjogJ3BvbW9kb3JvLWlucHV0JyxcbiAgICAgIGlubmVyVGV4dDogJ1BvbW9kb3JvcycsXG4gICAgfSk7XG5cbiAgICB0aGlzLnBvbW9kb3JvSW5wdXRFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWlucHV0JyxcbiAgICAgIGlkOiAncG9tb2Rvcm8taW5wdXQnLFxuICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICBuYW1lOiAncG9tb2Rvcm8nLFxuICAgICAgcGxhY2Vob2xkZXI6ICcjJyxcbiAgICAgIG1pbjogJzEnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zdWJtaXRJbnB1dEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Rhc2staW5wdXQnLFxuICAgICAgaWQ6ICdzdWJtaXQtaW5wdXQnLFxuICAgICAgdHlwZTogJ3N1Ym1pdCcsXG4gICAgICB2YWx1ZTogJ0FERCcsXG4gICAgfSk7XG5cbiAgICB0aGlzLnNoYWRvdy5hcHBlbmQodGhpcy5zdHlsZUVsZW1lbnQsIHRoaXMuY29udGFpbmVyRWxlbWVudCk7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LmFwcGVuZChcbiAgICAgIHRoaXMuZmllbGRJbnB1dENvbnRhaW5lcixcbiAgICAgIHRoaXMuc3VibWl0SW5wdXRFbGVtZW50LFxuICAgICk7XG4gICAgdGhpcy5maWVsZElucHV0Q29udGFpbmVyLmFwcGVuZChcbiAgICAgIHRoaXMubmFtZUlucHV0Q29udGFpbmVyLFxuICAgICAgdGhpcy5wb21vZG9yb0lucHV0Q29udGFpbmVyLFxuICAgICk7XG4gICAgdGhpcy5uYW1lSW5wdXRDb250YWluZXIuYXBwZW5kKHRoaXMubmFtZUlucHV0TGFiZWwsIHRoaXMubmFtZUlucHV0RWxlbWVudCk7XG4gICAgdGhpcy5wb21vZG9yb0lucHV0Q29udGFpbmVyLmFwcGVuZChcbiAgICAgIHRoaXMucG9tb2Rvcm9JbnB1dExhYmVsLFxuICAgICAgdGhpcy5wb21vZG9yb0lucHV0RWxlbWVudCxcbiAgICApO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1pdGVtLWZvcm0nLCBUYXNrSXRlbUZvcm0pO1xuIiwiLyoqXG4gKiBAZmlsZSBNYW5hZ2UgdGFza2xpc3QgZm9yIHBhZ2VcbiAqIEBhdXRob3IgU2VhbiBZZVxuICovXG5cbi8qKlxuICogQSB0YXNrIG9iamVjdCBjb250YWluaW5nIGEgbmFtZSBhbmQgcG9tb2Rvcm9zIHN0YXRzXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUYXNrXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSAgICAgICAgICAgICAgICAtIG5hbWUgb2YgdGhlIHRhc2tcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB1c2VkUG9tb2Rvcm9zICAgICAgIC0gcG9tb2Rvcm9zIHVzZWQgc28gZmFyXG4gKiBAcHJvcGVydHkge251bWJlcn0gZXN0aW1hdGVkUG9tb2Rvcm9zICAtIGVzdGltYXRlZCBudW1iZXIgb2YgcG9tb3MgbmVlZGVkXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHNlbGVjdGVkICAgICAgICAgICAtIHdoZXRoZXIgdGFzayBpcyBzZWxlY3RlZFxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvVGFza0l0ZW0nO1xuaW1wb3J0ICcuLi9jb21wb25lbnRzL1Rhc2tJdGVtRm9ybSc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvVGFza0xpc3QnO1xuXG5sZXQgdGFza3MgPSBbXTtcbmxldCB0YXNrTGlzdDtcbmxldCB0YXNrTGlzdENvbnRhaW5lcjtcbmxldCB0YXNrTGlzdEl0ZW1Db250YWluZXI7XG5sZXQgdGFza0l0ZW1Gb3JtO1xubGV0IHRhc2tJdGVtRm9ybUNvbnRhaW5lcjtcbmxldCB0YXNrSXRlbUZvcm1JbnB1dHM7XG5cbmNvbnN0IHNldFJvb3QgPSAocm9vdCkgPT4ge1xuICB0YXNrTGlzdCA9IHJvb3Q7XG4gIHRhc2tMaXN0Q29udGFpbmVyID0gdGFza0xpc3Quc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG4gIHRhc2tMaXN0SXRlbUNvbnRhaW5lciA9IHRhc2tMaXN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgJy50YXNrLWl0ZW0tY29udGFpbmVyJyxcbiAgKTtcbiAgdGFza0l0ZW1Gb3JtID0gdGFza0xpc3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnRhc2staXRlbS1mb3JtJyk7XG4gIHRhc2tJdGVtRm9ybUNvbnRhaW5lciA9IHRhc2tJdGVtRm9ybS5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWZvcm0nKTtcbiAgdGFza0l0ZW1Gb3JtSW5wdXRzID0ge1xuICAgIG5hbWU6IHRhc2tJdGVtRm9ybUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjbmFtZS1pbnB1dCcpLFxuICAgIHBvbW9kb3JvOiB0YXNrSXRlbUZvcm1Db250YWluZXIucXVlcnlTZWxlY3RvcignI3BvbW9kb3JvLWlucHV0JyksXG4gIH07XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRhc2sgZnJvbSB0YXNrcyBhbmQgRE9NXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIG5hbWUgb2YgdGFza1xuICogQHJldHVybiB7e3Rhc2tJbmRleDogbnVtYmVyLCBlbGVtZW50OiBIVE1MRWxlbWVudH19XG4gKi9cbmNvbnN0IGdldFRhc2sgPSAobmFtZSkgPT4gKHtcbiAgdGFza0luZGV4OiB0YXNrcy5maW5kSW5kZXgoKHRhc2spID0+IHRhc2submFtZSA9PT0gbmFtZSksXG4gIHRhc2tFbGVtZW50OiB0YXNrTGlzdEl0ZW1Db250YWluZXIucXVlcnlTZWxlY3RvcihgW25hbWU9XCIke25hbWV9XCJdYCksXG59KTtcblxuLyoqXG4gKiBHZXQgYnV0dG9uIGVsZW1lbnRzIGZyb20gdGFzay1pdGVtIGVsZW1lbnRcbiAqIEBwYXJhbSB7VGFza30gdGFzayAtIHRhc2staXRlbSBlbGVtZW50XG4gKiBAcmV0dXJuIHt7ZmluaXNoOiBIVE1MQnV0dG9uRWxlbWVudCwgZGVsZXRlOiBIVE1MQnV0dG9uRWxlbWVudCwgZWRpdDogSFRNTEJ1dHRvbkVsZW1lbnR9fSAtIGJ1dHRvbiBlbGVtZW50cyBvYmplY3RcbiAqL1xuY29uc3QgZ2V0VGFza0l0ZW1CdXR0b25zID0gKHRhc2spID0+IHtcbiAgY29uc3QgYnV0dG9ucyA9IEFycmF5LmZyb20oXG4gICAgdGFzay5zaGFkb3dSb290XG4gICAgICAucXVlcnlTZWxlY3RvcignLml0ZW0tY29udGFpbmVyJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudGFzay1idXR0b24nKSxcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGZpbmlzaDogYnV0dG9ucy5maW5kKChidG4pID0+IGJ0bi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdmaW5pc2gtYnV0dG9uJyksXG4gICAgZGVsZXRlOiBidXR0b25zLmZpbmQoKGJ0bikgPT4gYnRuLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2RlbGV0ZS1idXR0b24nKSxcbiAgICBlZGl0OiBidXR0b25zLmZpbmQoKGJ0bikgPT4gYnRuLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2VkaXQtYnV0dG9uJyksXG4gIH07XG59O1xuXG4vKipcbiAqIERlbGV0aW5nIGV4aXN0aW5nIHRhc2tcbiAqIEBwYXJhbSB7VGFza30gdGFza1RvRGVsZXRlIC0gdGFzayB0byBiZSBkZWxldGVkXG4gKi9cbmNvbnN0IGRlbGV0ZVRhc2sgPSAodGFza1RvRGVsZXRlKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSB9ID0gdGFza1RvRGVsZXRlO1xuXG4gIC8vIHVwZGF0ZSBsb2NhbFN0b3JhZ2VcbiAgY29uc3QgeyB0YXNrSW5kZXgsIHRhc2tFbGVtZW50IH0gPSBnZXRUYXNrKG5hbWUpO1xuICB0YXNrcy5zcGxpY2UodGFza0luZGV4LCAxKTtcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG5cbiAgLy8gcmVtb3ZlIHRhc2sgZnJvbSBkb21cbiAgdGFza0VsZW1lbnQucmVtb3ZlKCk7XG59O1xuXG4vKipcbiAqIEFkZCB0YXNrIG9iamVjdCB0byBET00sIGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGFzay1pdGVtXG4gKiBAcGFyYW0ge1Rhc2t9IG5ld1Rhc2sgLSBuZXcgdGFzayB0byBiZSBhZGRlZFxuICovXG5jb25zdCBhZGRUYXNrVG9Eb20gPSAobmV3VGFzaykgPT4ge1xuICBjb25zdCB7IG5hbWUsIHVzZWRQb21vZG9yb3MsIGVzdGltYXRlZFBvbW9kb3JvcyB9ID0gbmV3VGFzaztcblxuICAvLyBhZGQgdGFzayB0byBkb21cbiAgY29uc3QgdGFza0l0ZW0gPSBjcmVhdGVFbGVtZW50KCd0YXNrLWl0ZW0nLCB7XG4gICAgbmFtZSxcbiAgICAndXNlZC1wb21vZG9yb3MnOiB1c2VkUG9tb2Rvcm9zLFxuICAgICdlc3RpbWF0ZWQtcG9tb2Rvcm9zJzogZXN0aW1hdGVkUG9tb2Rvcm9zLFxuICAgIHNlbGVjdGVkOiB0cnVlLFxuICB9KTtcbiAgY29uc3QgYnV0dG9ucyA9IGdldFRhc2tJdGVtQnV0dG9ucyh0YXNrSXRlbSk7XG4gIC8vIGJ1dHRvbnMuZmluaXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGVsZXRlVGFzayhuZXdUYXNrKSk7XG4gIGJ1dHRvbnMuZGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGVsZXRlVGFzayhuZXdUYXNrKSk7XG4gIGJ1dHRvbnMuZWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnZWRpdGluZyB0YXNrIScpO1xuICB9KTtcbiAgdGFza0xpc3RJdGVtQ29udGFpbmVyLmFwcGVuZCh0YXNrSXRlbSk7XG59O1xuXG4vKipcbiAqIEFkZCBuZXcgdGFzayB0byBsb2NhbFN0b3JhZ2VcbiAqIEBwYXJhbSB7VGFza30gbmV3VGFzayAtIG5ldyB0YXNrIHRvIGJlIGFkZGVkXG4gKi9cbmNvbnN0IGFkZFRhc2sgPSAobmV3VGFzaykgPT4ge1xuICAvLyB1cGRhdGUgbG9jYWxTdG9yYWdlXG4gIHRhc2tzLnB1c2gobmV3VGFzayk7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xuICBhZGRUYXNrVG9Eb20obmV3VGFzayk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBleGlzdGluZyB0YXNrXG4gKiBAcGFyYW0ge1Rhc2t9IHByZXZUYXNrIC0gdGFzayB0byBiZSB1cGRhdGVkXG4gKiBAcGFyYW0ge1Rhc2t9IG5leHRUYXNrIC0gdXBkYXRlZCB0YXNrXG4gKi9cbmNvbnN0IHVwZGF0ZVRhc2sgPSAocHJldlRhc2ssIG5leHRUYXNrKSA9PiB7XG4gIGNvbnN0IHsgbmFtZTogcHJldk5hbWUgfSA9IHByZXZUYXNrO1xuICBjb25zdCB7XG4gICAgbmFtZTogbmV4dE5hbWUsXG4gICAgdXNlZFBvbW9kb3JvcyxcbiAgICBlc3RpbWF0ZWRQb21vZG9yb3MsXG4gICAgc2VsZWN0ZWQsXG4gIH0gPSBuZXh0VGFzaztcbiAgY29uc3QgeyB0YXNrSW5kZXgsIHRhc2tFbGVtZW50IH0gPSBnZXRUYXNrKHByZXZOYW1lKTtcblxuICAvLyB1cGRhdGUgbG9jYWxTdG9yYWdlXG4gIHRhc2tzW3Rhc2tJbmRleF0gPSBuZXh0VGFzaztcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG5cbiAgLy8gdXBkYXRlIHRhc2sgaW4gZG9tXG4gIHRhc2tFbGVtZW50LnNldEF0dHJpYnV0ZSgnbmFtZScsIG5leHROYW1lKTtcbiAgdGFza0VsZW1lbnQuc2V0QXR0cmlidXRlKCd1c2VkLXBvbW9kb3JvcycsIHVzZWRQb21vZG9yb3MpO1xuICB0YXNrRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2VzdGltYXRlZC1wb21vZG9yb3MnLCBlc3RpbWF0ZWRQb21vZG9yb3MpO1xuICB0YXNrRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgc2VsZWN0ZWQpO1xufTtcblxuLyoqXG4gKiBHZXQgdGFza2xpc3RcbiAqIEByZXR1cm4ge1Rhc2tbXX0gLSBjdXJyZW50IGxpc3Qgb2YgdGFza3NcbiAqL1xuY29uc3QgZ2V0VGFza3MgPSAoKSA9PiB7XG4gIHJldHVybiB0YXNrcztcbn07XG5cbi8qKlxuICogSGFuZGxlIGZvcm0gc3VibWlzc2lvbiwgdmFsaWRhdGUgaW5wdXRcbiAqIEBwYXJhbSB7RXZlbnR9IGUgLSBzdWJtaXQgZXZlbnRcbiAqL1xuY29uc3QgaGFuZGxlVGFza0Zvcm1TdWJtaXQgPSAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnQgcGFnZSByZWxvYWRcblxuICBjb25zdCB7XG4gICAgbmFtZTogeyB2YWx1ZTogbmFtZSB9LFxuICAgIHBvbW9kb3JvOiB7IHZhbHVlOiBwb21vZG9ybyB9LFxuICB9ID0gdGFza0l0ZW1Gb3JtSW5wdXRzO1xuICBjb25zdCB0cmltbWVkTmFtZSA9IG5hbWUudHJpbSgpO1xuXG4gIC8vIGNoZWNrIGlmIGZpZWxkcyBhcmUgbm9uLWVtcHR5XG4gIGlmICghdHJpbW1lZE5hbWUpIHtcbiAgICBjb25zb2xlLmVycm9yKCd0YXNrIG5hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghcG9tb2Rvcm8pIHtcbiAgICBjb25zb2xlLmVycm9yKCd0YXNrIHBvbW9kb3JvcyBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBjaGVjayBpZiB0YXNrIGFscmVhZHkgZXhpc3RzXG4gIGlmICh0YXNrcy5zb21lKCh0YXNrKSA9PiB0YXNrLm5hbWUgPT09IHRyaW1tZWROYW1lKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoeyBuYW1lOiB0cmltbWVkTmFtZSB9LCAnIGFscmVhZHkgZGVmaW5lZCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGFkZFRhc2soe1xuICAgIG5hbWU6IHRyaW1tZWROYW1lLFxuICAgIGVzdGltYXRlZFBvbW9kb3JvczogcG9tb2Rvcm8sXG4gICAgdXNlZFBvbW9kb3JvczogMCxcbiAgICBzZWxlY3RlZDogZmFsc2UsXG4gIH0pO1xuICBPYmplY3QudmFsdWVzKHRhc2tJdGVtRm9ybUlucHV0cykuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICB9KTtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGFza3MgZnJvbSBsb2NhbFN0b3JhZ2VcbiAqL1xuY29uc3QgcmVzdG9yZVRhc2tzID0gKCkgPT4ge1xuICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKSkge1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeShbXSkpO1xuICB9XG4gIHRhc2tzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykpO1xuICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiBhZGRUYXNrVG9Eb20odGFzaykpO1xufTtcblxuLyoqXG4gKiBTZXQgdGFza2xpc3RcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSB0YXNrIGxpc3QgZWxlbWVudFxuICovXG5jb25zdCBpbml0aWFsaXplVGFza0xpc3QgPSAoZWxlbWVudCkgPT4ge1xuICBzZXRSb290KGVsZW1lbnQpO1xuICB0YXNrSXRlbUZvcm1Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlVGFza0Zvcm1TdWJtaXQpO1xuICByZXN0b3JlVGFza3MoKTtcbn07XG4vKipcbiAqIEluY3JlbWVudCB0aGUgdXNlZFBvbW9kb3JvcyBmb3Igb25lIHRhc2tcbiAqIEBwYXJhbSB7VGFza30gdGFzayAtIHRhc2sgdG8gYmUgaW5jcmVtZW50ZWRcbiAqL1xuY29uc3QgaW5jcmVtZW50UG9tb2Rvcm8gPSAodGFzaykgPT4ge1xuICBjb25zdCB7IHVzZWRQb21vZG9yb3MgfSA9IHRhc2s7XG4gIHVwZGF0ZVRhc2sodGFzaywgeyAuLi50YXNrLCB1c2VkUG9tb2Rvcm9zOiB1c2VkUG9tb2Rvcm9zICsgMSB9KTtcbn07XG5cbi8qKlxuICogU2VsZWN0IGEgdGFza1xuICogQHBhcmFtIHtUYXNrfSB0YXNrIC0gdGFzayB0byBiZSBzZWxlY3RlZFxuICovXG5jb25zdCBzZWxlY3RQb21vZG9ybyA9ICh0YXNrKSA9PiB7XG4gIGNvbnN0IHByZXZTZWxlY3RlZFRhc2sgPSB0YXNrcy5maW5kKCh0KSA9PiB0LnNlbGVjdGVkKTtcbiAgaWYgKHByZXZTZWxlY3RlZFRhc2spIHtcbiAgICB1cGRhdGVUYXNrKHByZXZTZWxlY3RlZFRhc2ssIHsgLi4ucHJldlNlbGVjdGVkVGFzaywgc2VsZWN0ZWQ6IGZhbHNlIH0pO1xuICB9XG4gIHVwZGF0ZVRhc2sodGFzaywgeyAuLi50YXNrLCBzZWxlY3RlZDogdHJ1ZSB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIGluaXRpYWxpemVUYXNrTGlzdCxcbiAgYWRkVGFzayxcbiAgZ2V0VGFza3MsXG4gIHVwZGF0ZVRhc2ssXG4gIGRlbGV0ZVRhc2ssXG4gIGluY3JlbWVudFBvbW9kb3JvLFxuICBzZWxlY3RQb21vZG9ybyxcbn07XG4iLCIvKipcbiAqIEBmaWxlIE1hbmFnZSBwcm9ncmVzcyByaW5nIGZvciBwYWdlXG4gKi9cblxubGV0IHByb2dyZXNzUmluZ0VsZW1lbnQ7XG5cbi8qKlxuICogU2V0IHByb2dyZXNzIHJpbmdcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBwcm9ncmVzcyByaW5nIGVsZW1lbnRcbiAqL1xuY29uc3QgaW5pdGlhbGl6ZVByb2dyZXNzUmluZyA9IChlbGVtZW50KSA9PiB7XG4gIHByb2dyZXNzUmluZ0VsZW1lbnQgPSBlbGVtZW50O1xufTtcblxuLyoqXG4gKiBHZXQgcHJvZ3Jlc3NcbiAqIEByZXR1cm4ge251bWJlcn0gLSBjdXJyZW50IHByb2dyZXNzXG4gKi9cbmNvbnN0IGdldFByb2dyZXNzID0gKCkgPT4gcHJvZ3Jlc3NSaW5nRWxlbWVudC5wcm9ncmVzcztcblxuLyoqXG4gKiBTZXQgcHJvZ3Jlc3NcbiAqIEBwYXJhbSB7bnVtYmVyfSBwcm9ncmVzcyAtIHByb2dyZXNzIHRvIHNldFxuICovXG5jb25zdCBzZXRQcm9ncmVzcyA9IChwcm9ncmVzcykgPT4ge1xuICBwcm9ncmVzc1JpbmdFbGVtZW50LnByb2dyZXNzID0gcHJvZ3Jlc3M7XG59O1xuXG4vKipcbiAqIFN0YXJ0IHRoZSBwcm9ncmVzcyBiYXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aWNrTGVuZ3RoIC0gYW1vdW50IG9mIHByb2dyZXNzIHRvIGRlY3JlYXNlXG4gKiBAcGFyYW0ge251bWJlcn0gdGlja0ZyZXF1ZW5jeSAtIGhvdyBvZnRlbiB0byBkZWNyZWFzZSBwcm9ncmVzcyAoaW4gbXMpXG4gKi9cbmNvbnN0IHN0YXJ0UHJvZ3Jlc3NSaW5nID0gKHRpY2tMZW5ndGgsIHRpY2tGcmVxdWVuY3kpID0+IHtcbiAgY29uc3QgdGlja2VyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGlmIChwcm9ncmVzc1JpbmdFbGVtZW50LnByb2dyZXNzIDw9IDApIGNsZWFySW50ZXJ2YWwodGlja2VyKTtcbiAgICBzZXRQcm9ncmVzcyhwcm9ncmVzc1JpbmdFbGVtZW50LnByb2dyZXNzIC0gdGlja0xlbmd0aCk7XG4gIH0sIHRpY2tGcmVxdWVuY3kpO1xufTtcblxuLyoqXG4gKiBTZXQgcmFkaXVzIG9mIHJpbmdcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBuZXcgcmFkaXVzIHRvIHNldFxuICovXG5jb25zdCBzZXRSYWRpdXNTdHJva2UgPSAocmFkaXVzLCBzdHJva2UpID0+IHtcbiAgcHJvZ3Jlc3NSaW5nRWxlbWVudC5yYWRpdXMgPSByYWRpdXM7XG4gIHByb2dyZXNzUmluZ0VsZW1lbnQuc3Ryb2tlID0gc3Ryb2tlO1xufTtcblxuZXhwb3J0IHtcbiAgaW5pdGlhbGl6ZVByb2dyZXNzUmluZyxcbiAgZ2V0UHJvZ3Jlc3MsXG4gIHNldFByb2dyZXNzLFxuICBzdGFydFByb2dyZXNzUmluZyxcbiAgc2V0UmFkaXVzU3Ryb2tlLFxufTtcbiIsIi8qKlxuICogQGZpbGUgRW50cnkgcG9pbnQgZm9yIGFwcGxpY2F0aW9uXG4gKi9cblxuaW1wb3J0ICcuLi9zdHlsZXMvc3R5bGUuY3NzJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy9UYXNrTGlzdCc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvUHJvZ3Jlc3NSaW5nJztcbmltcG9ydCB7IGluaXRpYWxpemVUYXNrTGlzdCB9IGZyb20gJy4vdGFza0xpc3QnO1xuaW1wb3J0IHtcbiAgaW5pdGlhbGl6ZVByb2dyZXNzUmluZyxcbiAgc2V0UHJvZ3Jlc3MsXG4gIHNldFJhZGl1c1N0cm9rZSxcbiAgc3RhcnRQcm9ncmVzc1JpbmcsXG59IGZyb20gJy4vcHJvZ3Jlc3NSaW5nJztcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGluaXRpYWxpemVQcm9ncmVzc1JpbmcoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXJpbmcnKSk7XG4gIGluaXRpYWxpemVUYXNrTGlzdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1saXN0JykpO1xuXG4gIHNldFJhZGl1c1N0cm9rZSgxODAsIDgpO1xuICBzdGFydFByb2dyZXNzUmluZygwLjUsIDYwKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgc2V0UHJvZ3Jlc3MoNTApO1xuICB9LCA3MDAwKTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==