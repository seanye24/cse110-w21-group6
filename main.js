(()=>{"use strict";const e=(e,t={},n={})=>{const{namespace:o}=n;let s;return s=o?document.createElementNS(o,e):document.createElement(e),Object.entries(t).forEach((([e,t])=>{o||!(e in s)?s.setAttribute(e,t):s[e]=t})),s},t=e=>{const t=parseInt(e,10);return Number.isNaN(t)?null:t};class n extends HTMLElement{static get observedAttributes(){return["name","estimated-pomodoros","used-pomodoros","selected"]}constructor(){super(),this.usedPomodoros=0,this.estimatedPomodoros=0,this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .item-container {\n        margin-bottom: 1em;\n        padding: 0.5em 2em;\n        border-radius: 5px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .selected {\n        background: #90e0ef;\n      }\n\n      .text-container {\n        background: #fff;\n        color: #555;\n        position: relative;\n        padding: 0.5em;\n        border-radius: 5px;\n        font-size: 1rem;\n        display: flex;\n        align-items: center;\n      }\n      \n      .name {\n        width: 80%;\n        display: inline-block;\n        margin: 0.5em 0;\n      }\n      \n      .pomodoro-container {\n        width: 20%;\n        height: 100%;\n        display: inline-block;\n        position: relative;\n        text-align: right;\n      }\n\n      .pomodoro-label {\n        position: absolute;\n        top: -0.5em;\n        right: 0;\n        font: 0.8rem 'Source Sans Pro', sans-serif;\n        color: #777;\n      }\n\n      .pomodoro {\n        display: inline-block;\n        margin: 1em 0 0 0;\n      }\n\n      .task-button {\n        display: none;\n        position: absolute;\n        padding: 0.25em;\n        font-size: 1.2rem;\n        color: #fff;\n      }\n\n      .task-button:hover {\n        border-radius: 50%;\n        background: rgba(0, 180, 216, 0.25);\n        color: #00b4d8;\n        cursor: pointer;\n      }\n\n      .item-container:hover > .task-button {\n        display: initial;\n      }\n\n\n      #edit-button {\n        top: 0;\n        right: 0;\n      }\n\n      #delete-button {\n        bottom: 0;\n        right: 0;\n      }\n    ",this.materialIconLinkElement=e("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),this.textContainerElement=e("div",{className:"text-container"}),this.itemContainerElement=e("div",{className:"item-container"}),this.nameElement=e("p",{className:"name"}),this.pomodoroContainer=e("span",{className:"pomodoro-container"}),this.pomodoroLabel=e("label",{className:"pomodoro-label",for:"pomodoro",innerText:"Progress"}),this.pomodoroElement=e("p",{className:"pomodoro",id:"pomodoro"}),this.editTaskButton=e("span",{className:"material-icons task-button",id:"edit-button",innerText:"mode"}),this.finishTaskButton=e("span",{className:"material-icons task-button",id:"finish-button",innerText:"done"}),this.deleteTaskButton=e("span",{className:"material-icons task-button",id:"delete-button",innerText:"delete"}),this.shadow.append(this.materialIconLinkElement,this.styleElement,this.itemContainerElement),this.itemContainerElement.append(this.textContainerElement,this.editTaskButton,this.deleteTaskButton),this.textContainerElement.append(this.nameElement,this.pomodoroContainer),this.pomodoroContainer.append(this.pomodoroLabel,this.pomodoroElement)}attributeChangedCallback(e,t,n){switch(e){case"name":this.nameElement.innerText=n;break;case"used-pomodoros":this.usedPomodoros=n,this.pomodoroElement.innerText=`${this.usedPomodoros}/${this.estimatedPomodoros}`;break;case"estimated-pomodoros":this.estimatedPomodoros=n,this.pomodoroElement.innerText=`${this.usedPomodoros}/${this.estimatedPomodoros}`;break;case"selected":this.itemContainerElement.className="true"===n?"item-container selected":"item-container"}}}customElements.define("task-item",n);class o extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .task-form {\n        margin: 1em;\n        padding: 1em 20%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .field-input-container {\n        margin-bottom: 1em;\n        border-radius: 5px;\n        position: relative;\n      }\n\n      .task-input-label {\n        position: absolute;\n        z-index: 2;\n        font: 0.8rem 'Source Sans Pro', sans-serif;\n        color: #777;\n      }\n\n      #name-input-label {\n        top: 0.2em;\n        left: 0.75em;\n      }\n\n      #pomodoro-input-label {\n        top: 0.2em;\n        right: 9px;\n      }\n\n      .task-input[type='text'],\n      .task-input[type='number'] {\n        padding: 1.5em 0.75em 0.75em 0.75em;\n        border: none;\n        font: 1rem 'Source Sans Pro', sans-serif;\n        color: #444;\n        box-sizing: border-box;\n      }\n\n      .task-input:focus {\n        box-shadow: 0 0 0 2pt #48cae4;\n        outline: none;\n        z-index: 1;\n        position: relative;\n      }\n\n      #name-input {\n        width: 80%;\n        border-top-left-radius: 5px;\n        border-bottom-left-radius: 5px;\n      }\n\n      #pomodoro-input {\n        width: 20%;\n        border-top-right-radius: 5px;\n        border-bottom-right-radius: 5px;\n      }\n\n      .task-input[type='text']::placeholder,\n      .task-input[type='number']::placeholder {\n        color: #c8c8c8;\n      }\n      .task-input[type='number']::placeholder {\n        text-align: center;\n      }\n\n      #submit-input {\n        width: 50%;\n        margin: auto;\n        background: #4dcfe9;\n        border-radius: 5px;\n        outline: none;\n        border: none;\n        color: white;\n        padding: 0.5em;\n        font: 1.2rem 'Source Sans Pro', sans-serif;\n      }\n\n      #submit-input:hover {\n        background: #48cae4;\n        cursor: pointer;\n      }\n    ",this.containerElement=e("form",{className:"task-form"}),this.fieldInputContainer=e("div",{className:"field-input-container"}),this.nameInputLabel=e("label",{className:"task-input-label",id:"name-input-label",for:"name-input",innerText:"Name"}),this.nameInputElement=e("input",{className:"task-input",id:"name-input",type:"text",name:"name",placeholder:"Task Description..."}),this.pomodoroInputLabel=e("label",{className:"task-input-label",id:"pomodoro-input-label",for:"pomodoro-input",innerText:"Pomodoros"}),this.pomodoroInputElement=e("input",{className:"task-input",id:"pomodoro-input",type:"number",name:"pomodoro",placeholder:"#",min:"1"}),this.submitInputElement=e("input",{className:"task-input",id:"submit-input",type:"submit",value:"ADD"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.fieldInputContainer,this.submitInputElement),this.fieldInputContainer.append(this.nameInputLabel,this.nameInputElement,this.pomodoroInputLabel,this.pomodoroInputElement)}}customElements.define("task-item-form",o);class s extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .container {\n        margin: 1em;\n        padding: 1em;\n        font: normal 1rem 'Source Sans Pro', sans-serif;\n        border-radius: 5px;\n        background: #00b4d8;\n        max-width: 700px;\n      }\n\n      .title {\n        text-align: center;\n        color: #fff;\n      }\n    ",this.containerElement=e("div",{className:"container"}),this.titleElement=e("h1",{className:"title",innerText:"Task List"}),this.taskItemListContainerElement=e("div",{className:"task-item-container"}),this.taskItemFormElement=e("task-item-form",{className:"task-item-form"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.titleElement,this.taskItemListContainerElement,this.taskItemFormElement)}}customElements.define("task-list",s);let i=[];const r=e("task-list",{}),a=Array.from(r.shadowRoot.childNodes).find((e=>"container"===e.className)),m=a.querySelector(".task-item-container"),l=a.querySelector(".task-item-form"),d=Array.from(l.shadowRoot.childNodes).find((e=>"task-form"===e.className)),c=Array.from(d.querySelectorAll('.task-input[type="text"], .task-input[type="number"]')).reduce(((e,t)=>({...e,[t.name]:t})),{}),p=t=>{const{name:n,usedPomodoros:o,estimatedPomodoros:s}=t,r=e("task-item",{name:n,"used-pomodoros":o,"estimated-pomodoros":s,selected:!0}),a=(e=>{const t=Array.from(Array.from(e.shadowRoot.childNodes).find((e=>e.className.includes("item-container"))).querySelectorAll(".task-button"));return{finish:t.find((e=>"finish-button"===e.getAttribute("id"))),delete:t.find((e=>"delete-button"===e.getAttribute("id"))),edit:t.find((e=>"edit-button"===e.getAttribute("id")))}})(r);a.delete.addEventListener("click",(()=>(e=>{const{name:t}=e,{taskIndex:n,taskElement:o}=(e=>({taskIndex:i.findIndex((t=>t.name===e)),taskElement:m.querySelector(`[name="${e}"]`)}))(t);i.splice(n,1),window.localStorage.setItem("tasks",JSON.stringify(i)),o.remove()})(t))),a.edit.addEventListener("click",(()=>{console.log("editing task!")})),m.append(r)},u=e=>{e.preventDefault();const{name:{value:t},pomodoro:{value:n}}=c,o=t.trim();var s;o?n?i.some((e=>e.name===o))?console.error({name:o}," already defined"):(s={name:o,estimatedPomodoros:n,usedPomodoros:0,selected:!1},i.push(s),window.localStorage.setItem("tasks",JSON.stringify(i)),p(s),Object.values(c).forEach((e=>{e.value=""}))):console.error("task pomodoros cannot be empty"):console.error("task name cannot be empty")};class h extends HTMLElement{static get observedAttributes(){return["radius","stroke","progress"]}constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style");const t="http://www.w3.org/2000/svg";this.svgElement=e("svg",{class:"svg"},{namespace:t}),this.circleElement=e("circle",{class:"circle"},{namespace:t}),this._radius=0,this._stroke=0,this._progress=0,this.updateComponent(this._radius,this._stroke,this._progress),this.root.append(this.styleElement,this.svgElement),this.svgElement.appendChild(this.circleElement)}updateComponent(e,t,n){const o=e-2*t,s=2*o*Math.PI;this.styleElement.innerText=`\n      .svg {\n        overflow: hidden;\n        width: ${2*e}px;\n        height: ${2*e}px;\n      }\n\n      .circle {\n        stroke: #0095b3;\n        stroke-dasharray: ${s} ${s};\n        stroke-dashoffset: ${(1-n/100)*s};\n        fill: transparent;\n        stroke-width: ${t};\n\n        transition: stroke-dashoffset 0.5s;\n        transform: rotate(-90deg);\n        transform-origin: 50% 50%;\n      }\n    `,this.circleElement.setAttribute("r",o),this.circleElement.setAttribute("cx",e),this.circleElement.setAttribute("cy",e)}attributeChangedCallback(e,n,o){const s=t(o);if(null!==s){switch(e){case"radius":case"stroke":if(s<0)return;break;case"progress":if("progress"===e&&(s<0||s>100))return;break;default:return}this[`_${e}`]=s,this.updateComponent(this._radius,this._stroke,this._progress)}}get radius(){return this._radius}set radius(e){const n=t(e);this.setAttribute("radius",n)}get stroke(){return this._stroke}set stroke(e){const n=t(e);this.setAttribute("stroke",n)}get progress(){return this._progress}set progress(e){const n=t(e);this.setAttribute("progress",n)}}const b=h;let k;window.customElements.define("progress-ring",b);const f=e=>{k.progress=e};window.addEventListener("DOMContentLoaded",(()=>{((t,n=0,o=0,s=0)=>{k=e("progress-ring",{radius:n,stroke:o,progress:s}),t.appendChild(k)})(document.body,Math.min(window.innerWidth/3,window.innerHeight/3),10,100),document.body.appendChild(r),d.addEventListener("submit",u),window.localStorage.getItem("tasks")||window.localStorage.setItem("tasks",JSON.stringify([])),i=JSON.parse(window.localStorage.getItem("tasks")),i.forEach((e=>p(e))),((e,t)=>{const n=setInterval((()=>{k.progress<=0&&clearInterval(n),f(k.progress-.5)}),60)})(),setTimeout((()=>{f(50)}),7e3)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL2NvbXBvbmVudHMvVGFza0l0ZW0uanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL2NvbXBvbmVudHMvVGFza0l0ZW1Gb3JtLmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL1Rhc2tMaXN0LmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9zY3JpcHRzL3Rhc2tMaXN0LmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL1Byb2dyZXNzUmluZy5qcyIsIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvc2NyaXB0cy9wcm9ncmVzc1JpbmcuanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwibmFtZXMiOlsiY3JlYXRlRWxlbWVudCIsImVsZW1lbnRUeXBlIiwicHJvcHMiLCJvcHRpb25zIiwibmFtZXNwYWNlIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsInZhbGlkYXRlTnVtYmVyIiwibnVtIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc05hTiIsIlRhc2tJdGVtIiwiSFRNTEVsZW1lbnQiLCJzdXBlciIsInRoaXMiLCJ1c2VkUG9tb2Rvcm9zIiwiZXN0aW1hdGVkUG9tb2Rvcm9zIiwic2hhZG93IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsInN0eWxlRWxlbWVudCIsImlubmVyVGV4dCIsIm1hdGVyaWFsSWNvbkxpbmtFbGVtZW50IiwicmVsIiwiaHJlZiIsInRleHRDb250YWluZXJFbGVtZW50IiwiY2xhc3NOYW1lIiwiaXRlbUNvbnRhaW5lckVsZW1lbnQiLCJuYW1lRWxlbWVudCIsInBvbW9kb3JvQ29udGFpbmVyIiwicG9tb2Rvcm9MYWJlbCIsImZvciIsInBvbW9kb3JvRWxlbWVudCIsImlkIiwiZWRpdFRhc2tCdXR0b24iLCJmaW5pc2hUYXNrQnV0dG9uIiwiZGVsZXRlVGFza0J1dHRvbiIsImFwcGVuZCIsIm5hbWUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJUYXNrSXRlbUZvcm0iLCJjb250YWluZXJFbGVtZW50IiwiZmllbGRJbnB1dENvbnRhaW5lciIsIm5hbWVJbnB1dExhYmVsIiwibmFtZUlucHV0RWxlbWVudCIsInR5cGUiLCJwbGFjZWhvbGRlciIsInBvbW9kb3JvSW5wdXRMYWJlbCIsInBvbW9kb3JvSW5wdXRFbGVtZW50IiwibWluIiwic3VibWl0SW5wdXRFbGVtZW50IiwiVGFza0xpc3QiLCJ0aXRsZUVsZW1lbnQiLCJ0YXNrSXRlbUxpc3RDb250YWluZXJFbGVtZW50IiwidGFza0l0ZW1Gb3JtRWxlbWVudCIsInRhc2tzIiwidGFza0xpc3QiLCJ0YXNrTGlzdENvbnRhaW5lciIsIkFycmF5IiwiZnJvbSIsInNoYWRvd1Jvb3QiLCJjaGlsZE5vZGVzIiwiZmluZCIsImVsZW0iLCJ0YXNrTGlzdEl0ZW1Db250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwidGFza0l0ZW1Gb3JtIiwidGFza0l0ZW1Gb3JtQ29udGFpbmVyIiwidGFza0l0ZW1Gb3JtSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlZHVjZSIsImFjYyIsImFkZFRhc2tUb0RvbSIsIm5ld1Rhc2siLCJ0YXNrSXRlbSIsInNlbGVjdGVkIiwiYnV0dG9ucyIsInRhc2siLCJpbmNsdWRlcyIsImZpbmlzaCIsImJ0biIsImdldEF0dHJpYnV0ZSIsImRlbGV0ZSIsImVkaXQiLCJnZXRUYXNrSXRlbUJ1dHRvbnMiLCJhZGRFdmVudExpc3RlbmVyIiwidGFza1RvRGVsZXRlIiwidGFza0luZGV4IiwidGFza0VsZW1lbnQiLCJmaW5kSW5kZXgiLCJnZXRUYXNrIiwic3BsaWNlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW1vdmUiLCJkZWxldGVUYXNrIiwiY29uc29sZSIsImxvZyIsImhhbmRsZVRhc2tGb3JtU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwicG9tb2Rvcm8iLCJ0cmltbWVkTmFtZSIsInRyaW0iLCJzb21lIiwiZXJyb3IiLCJwdXNoIiwidmFsdWVzIiwiaW5wdXQiLCJQcm9ncmVzc1JpbmciLCJyb290Iiwic3ZnTmFtZXNwYWNlIiwic3ZnRWxlbWVudCIsImNsYXNzIiwiY2lyY2xlRWxlbWVudCIsIl9yYWRpdXMiLCJfc3Ryb2tlIiwiX3Byb2dyZXNzIiwidXBkYXRlQ29tcG9uZW50IiwiYXBwZW5kQ2hpbGQiLCJyYWRpdXMiLCJzdHJva2UiLCJwcm9ncmVzcyIsIm5vcm1hbGl6ZWRSYWRpdXMiLCJjaXJjdW1mZXJlbmNlIiwiTWF0aCIsIlBJIiwibmV3VmFsdWVOdW1iZXIiLCJ2YWwiLCJwcm9ncmVzc1JpbmdFbGVtZW50Iiwic2V0UHJvZ3Jlc3MiLCJjb250YWluZXIiLCJpbml0aWFsaXplUHJvZ3Jlc3NSaW5nIiwiYm9keSIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImdldEl0ZW0iLCJwYXJzZSIsInRpY2tMZW5ndGgiLCJ0aWNrRnJlcXVlbmN5IiwidGlja2VyIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwic3RhcnRQcm9ncmVzc1JpbmciLCJzZXRUaW1lb3V0Il0sIm1hcHBpbmdzIjoibUJBUUEsTUFBTUEsRUFBZ0IsQ0FBQ0MsRUFBYUMsRUFBUSxHQUFJQyxFQUFVLE1BQ3hELE1BQU0sVUFBRUMsR0FBY0QsRUFDdEIsSUFBSUUsRUFVSixPQVRlQSxFQUFYRCxFQUFxQkUsU0FBU0MsZ0JBQWdCSCxFQUFXSCxHQUM5Q0ssU0FBU04sY0FBY0MsR0FHdENPLE9BQU9DLFFBQVFQLEdBQU9RLFNBQVEsRUFBRUMsRUFBS0MsTUFDL0JSLEtBQWVPLEtBQU9OLEdBQVVBLEVBQVFRLGFBQWFGLEVBQUtDLEdBQ3pEUCxFQUFRTSxHQUFP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Q3JEVixFQUFZRCxFQUFvQlAsU0NsQ2hCLE1BQUssS0FBdkJxQixHQUNBQyxZQUFXLEtBQ1RkLEVBQVksTUFDWCxTIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZXMgYW4gSFRNTEVsZW1lbnQgYW5kIHNldCBpdHMgYXR0cmlidXRlc1xuICogQ3JlYXRlZCB0byByZWR1Y2UgYm9pbGVycGxhdGUgZnJvbSBlbGVtZW50IGNyZWF0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudFR5cGUgLSBlbGVtZW50IHRhZyBuYW1lXG4gKiBAcGFyYW0ge3trZXk6IHN0cmluZ319IHByb3BzIC0gZWxlbWVudCdzIGF0dHJpYnV0ZXMvcHJvcGVydGllc1xuICogQHBhcmFtIHt7b3B0aW9uOiBzdHJpbmd9fSBvcHRpb25zIC0gZWxlbWVudCBvcHRpb25zIHN1Y2ggYXMgbmFtZXNwYWNlXG4gKiBAcmV0dXJuIGVsZW1lbnQgLSBuZXcgSFRNTEVsZW1lbnQgY3JlYXRlZFxuICovXG5jb25zdCBjcmVhdGVFbGVtZW50ID0gKGVsZW1lbnRUeXBlLCBwcm9wcyA9IHt9LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBuYW1lc3BhY2UgfSA9IG9wdGlvbnM7XG4gIGxldCBlbGVtZW50O1xuICBpZiAobmFtZXNwYWNlKSBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgZWxlbWVudFR5cGUpO1xuICBlbHNlIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnRUeXBlKTsgLy8gY3JlYXRlIGVsZW1lbnRcblxuICAvLyBzZXQgYXR0cmlidXRlcy9wcm9wZXJ0aWVzXG4gIE9iamVjdC5lbnRyaWVzKHByb3BzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBpZiAobmFtZXNwYWNlIHx8ICEoa2V5IGluIGVsZW1lbnQpKSBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICBlbHNlIGVsZW1lbnRba2V5XSA9IHZhbHVlO1xuICB9KTtcblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbi8qKlxuICogVHJpZXMgdG8gY29udmVydCBpbnB1dCB0byBhIG51bWJlclxuICogQHBhcmFtIHthbnl9IHZhbHVlIC0gdG8gYmUgY29udmVydGVkIHRvIG51bWJlclxuICogQHJldHVybiB7bnVtYmVyIHwgbnVsbH0gLSBudW1iZXIgaWYgc3VjY2Vzc2Z1bCwgbnVsbCBvdGhlcndpc2VcbiAqL1xuY29uc3QgdmFsaWRhdGVOdW1iZXIgPSAodmFsdWUpID0+IHtcbiAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgcmV0dXJuIE51bWJlci5pc05hTihudW0pID8gbnVsbCA6IG51bTtcbn07XG5cbmV4cG9ydCB7IGNyZWF0ZUVsZW1lbnQsIHZhbGlkYXRlTnVtYmVyIH07XG4iLCIvKipcbiAqIEBmaWxlIHRhc2staXRlbSB3ZWIgY29tcG9uZW50XG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSB0YXNrIGl0ZW0uXG4gKiBAZXh0ZW5kcyBIVE1MRWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IG5hbWUgLSBuYW1lIG9mIHRhc2tcbiAqIEBwYXJhbSB7bnVtYmVyfSBlc3RpbWF0ZWQtcG9tb2Rvcm9zIC0gZXN0aW1hdGVkIG51bWJlciBvZiBwb21vZG9yb3MgbmVlZGVkXG4gKiBAcGFyYW0ge251bWJlcn0gdXNlZC1wb21vZG9yb3MgLSBwb21vZG9yb3MgdXNlZCBzbyBmYXJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2VsZWN0ZWQgLSBpbmRpY2F0ZXMgaWYgdGhlIGN1cnJlbnQgdGFzayBpcyBzZWxlY3RlZFxuICovXG5jbGFzcyBUYXNrSXRlbSBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFsnbmFtZScsICdlc3RpbWF0ZWQtcG9tb2Rvcm9zJywgJ3VzZWQtcG9tb2Rvcm9zJywgJ3NlbGVjdGVkJ107XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy51c2VkUG9tb2Rvcm9zID0gMDtcbiAgICB0aGlzLmVzdGltYXRlZFBvbW9kb3JvcyA9IDA7XG5cbiAgICAvLyBjcmVhdGUgc2hhZG93IHJvb3RcbiAgICB0aGlzLnNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXG4gICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHRoaXMuc3R5bGVFbGVtZW50LmlubmVyVGV4dCA9IGBcbiAgICAgIC5pdGVtLWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgICAgICAgcGFkZGluZzogMC41ZW0gMmVtO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjOTBlMGVmO1xuICAgICAgfVxuXG4gICAgICAudGV4dC1jb250YWluZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgICAgICBjb2xvcjogIzU1NTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBwYWRkaW5nOiAwLjVlbTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5uYW1lIHtcbiAgICAgICAgd2lkdGg6IDgwJTtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBtYXJnaW46IDAuNWVtIDA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5wb21vZG9yby1jb250YWluZXIge1xuICAgICAgICB3aWR0aDogMjAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIH1cblxuICAgICAgLnBvbW9kb3JvLWxhYmVsIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IC0wLjVlbTtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGZvbnQ6IDAuOHJlbSAnU291cmNlIFNhbnMgUHJvJywgc2Fucy1zZXJpZjtcbiAgICAgICAgY29sb3I6ICM3Nzc7XG4gICAgICB9XG5cbiAgICAgIC5wb21vZG9ybyB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgbWFyZ2luOiAxZW0gMCAwIDA7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcGFkZGluZzogMC4yNWVtO1xuICAgICAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAxODAsIDIxNiwgMC4yNSk7XG4gICAgICAgIGNvbG9yOiAjMDBiNGQ4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5pdGVtLWNvbnRhaW5lcjpob3ZlciA+IC50YXNrLWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IGluaXRpYWw7XG4gICAgICB9XG5cblxuICAgICAgI2VkaXQtYnV0dG9uIHtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgIH1cblxuICAgICAgI2RlbGV0ZS1idXR0b24ge1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICB0aGlzLm1hdGVyaWFsSWNvbkxpbmtFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnbGluaycsIHtcbiAgICAgIHJlbDogJ3N0eWxlc2hlZXQnLFxuICAgICAgaHJlZjogJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vaWNvbj9mYW1pbHk9TWF0ZXJpYWwrSWNvbnMnLFxuICAgIH0pO1xuXG4gICAgdGhpcy50ZXh0Q29udGFpbmVyRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RleHQtY29udGFpbmVyJyxcbiAgICB9KTtcbiAgICB0aGlzLml0ZW1Db250YWluZXJFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnaXRlbS1jb250YWluZXInLFxuICAgIH0pO1xuICAgIHRoaXMubmFtZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdwJywge1xuICAgICAgY2xhc3NOYW1lOiAnbmFtZScsXG4gICAgfSk7XG4gICAgdGhpcy5wb21vZG9yb0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdwb21vZG9yby1jb250YWluZXInLFxuICAgIH0pO1xuICAgIHRoaXMucG9tb2Rvcm9MYWJlbCA9IGNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywge1xuICAgICAgY2xhc3NOYW1lOiAncG9tb2Rvcm8tbGFiZWwnLFxuICAgICAgZm9yOiAncG9tb2Rvcm8nLFxuICAgICAgaW5uZXJUZXh0OiAnUHJvZ3Jlc3MnLFxuICAgIH0pO1xuICAgIHRoaXMucG9tb2Rvcm9FbGVtZW50ID0gY3JlYXRlRWxlbWVudCgncCcsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3BvbW9kb3JvJyxcbiAgICAgIGlkOiAncG9tb2Rvcm8nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5lZGl0VGFza0J1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdtYXRlcmlhbC1pY29ucyB0YXNrLWJ1dHRvbicsXG4gICAgICBpZDogJ2VkaXQtYnV0dG9uJyxcbiAgICAgIGlubmVyVGV4dDogJ21vZGUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5maW5pc2hUYXNrQnV0dG9uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ21hdGVyaWFsLWljb25zIHRhc2stYnV0dG9uJyxcbiAgICAgIGlkOiAnZmluaXNoLWJ1dHRvbicsXG4gICAgICBpbm5lclRleHQ6ICdkb25lJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZGVsZXRlVGFza0J1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdtYXRlcmlhbC1pY29ucyB0YXNrLWJ1dHRvbicsXG4gICAgICBpZDogJ2RlbGV0ZS1idXR0b24nLFxuICAgICAgaW5uZXJUZXh0OiAnZGVsZXRlJyxcbiAgICB9KTtcblxuICAgIHRoaXMuc2hhZG93LmFwcGVuZChcbiAgICAgIHRoaXMubWF0ZXJpYWxJY29uTGlua0VsZW1lbnQsXG4gICAgICB0aGlzLnN0eWxlRWxlbWVudCxcbiAgICAgIHRoaXMuaXRlbUNvbnRhaW5lckVsZW1lbnQsXG4gICAgKTtcbiAgICB0aGlzLml0ZW1Db250YWluZXJFbGVtZW50LmFwcGVuZChcbiAgICAgIHRoaXMudGV4dENvbnRhaW5lckVsZW1lbnQsXG4gICAgICB0aGlzLmVkaXRUYXNrQnV0dG9uLFxuICAgICAgdGhpcy5kZWxldGVUYXNrQnV0dG9uLFxuICAgICk7XG4gICAgdGhpcy50ZXh0Q29udGFpbmVyRWxlbWVudC5hcHBlbmQodGhpcy5uYW1lRWxlbWVudCwgdGhpcy5wb21vZG9yb0NvbnRhaW5lcik7XG4gICAgdGhpcy5wb21vZG9yb0NvbnRhaW5lci5hcHBlbmQodGhpcy5wb21vZG9yb0xhYmVsLCB0aGlzLnBvbW9kb3JvRWxlbWVudCk7XG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgdGhpcy5uYW1lRWxlbWVudC5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1c2VkLXBvbW9kb3Jvcyc6XG4gICAgICAgIHRoaXMudXNlZFBvbW9kb3JvcyA9IG5ld1ZhbHVlO1xuICAgICAgICB0aGlzLnBvbW9kb3JvRWxlbWVudC5pbm5lclRleHQgPSBgJHt0aGlzLnVzZWRQb21vZG9yb3N9LyR7dGhpcy5lc3RpbWF0ZWRQb21vZG9yb3N9YDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlc3RpbWF0ZWQtcG9tb2Rvcm9zJzpcbiAgICAgICAgdGhpcy5lc3RpbWF0ZWRQb21vZG9yb3MgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5wb21vZG9yb0VsZW1lbnQuaW5uZXJUZXh0ID0gYCR7dGhpcy51c2VkUG9tb2Rvcm9zfS8ke3RoaXMuZXN0aW1hdGVkUG9tb2Rvcm9zfWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2VsZWN0ZWQnOlxuICAgICAgICB0aGlzLml0ZW1Db250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9XG4gICAgICAgICAgbmV3VmFsdWUgPT09ICd0cnVlJyA/ICdpdGVtLWNvbnRhaW5lciBzZWxlY3RlZCcgOiAnaXRlbS1jb250YWluZXInO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1pdGVtJywgVGFza0l0ZW0pO1xuIiwiLyoqXG4gKiBAZmlsZSB0YXNrLWl0ZW0tZm9ybSB3ZWIgY29tcG9uZW50XG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSB0YXNrIGl0ZW0gZm9ybS5cbiAqIEBleHRlbmRzIEhUTUxFbGVtZW50XG4gKiBAcGFyYW0ge251bWJlcn0gbmFtZSAtIG5hbWUgb2YgdGFza1xuICogQHBhcmFtIHtudW1iZXJ9IGVzdGltYXRlZC1wb21vZG9yb3MgLSBlc3RpbWF0ZWQgbnVtYmVyIG9mIHBvbW9kb3JvcyBuZWVkZWRcbiAqL1xuY2xhc3MgVGFza0l0ZW1Gb3JtIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5zaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcblxuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSBgXG4gICAgICAudGFzay1mb3JtIHtcbiAgICAgICAgbWFyZ2luOiAxZW07XG4gICAgICAgIHBhZGRpbmc6IDFlbSAyMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5maWVsZC1pbnB1dC1jb250YWluZXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICAudGFzay1pbnB1dC1sYWJlbCB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgei1pbmRleDogMjtcbiAgICAgICAgZm9udDogMC44cmVtICdTb3VyY2UgU2FucyBQcm8nLCBzYW5zLXNlcmlmO1xuICAgICAgICBjb2xvcjogIzc3NztcbiAgICAgIH1cblxuICAgICAgI25hbWUtaW5wdXQtbGFiZWwge1xuICAgICAgICB0b3A6IDAuMmVtO1xuICAgICAgICBsZWZ0OiAwLjc1ZW07XG4gICAgICB9XG5cbiAgICAgICNwb21vZG9yby1pbnB1dC1sYWJlbCB7XG4gICAgICAgIHRvcDogMC4yZW07XG4gICAgICAgIHJpZ2h0OiA5cHg7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWlucHV0W3R5cGU9J3RleHQnXSxcbiAgICAgIC50YXNrLWlucHV0W3R5cGU9J251bWJlciddIHtcbiAgICAgICAgcGFkZGluZzogMS41ZW0gMC43NWVtIDAuNzVlbSAwLjc1ZW07XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgZm9udDogMXJlbSAnU291cmNlIFNhbnMgUHJvJywgc2Fucy1zZXJpZjtcbiAgICAgICAgY29sb3I6ICM0NDQ7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWlucHV0OmZvY3VzIHtcbiAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMnB0ICM0OGNhZTQ7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgI25hbWUtaW5wdXQge1xuICAgICAgICB3aWR0aDogODAlO1xuICAgICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA1cHg7XG4gICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDVweDtcbiAgICAgIH1cblxuICAgICAgI3BvbW9kb3JvLWlucHV0IHtcbiAgICAgICAgd2lkdGg6IDIwJTtcbiAgICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDVweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDVweDtcbiAgICAgIH1cblxuICAgICAgLnRhc2staW5wdXRbdHlwZT0ndGV4dCddOjpwbGFjZWhvbGRlcixcbiAgICAgIC50YXNrLWlucHV0W3R5cGU9J251bWJlciddOjpwbGFjZWhvbGRlciB7XG4gICAgICAgIGNvbG9yOiAjYzhjOGM4O1xuICAgICAgfVxuICAgICAgLnRhc2staW5wdXRbdHlwZT0nbnVtYmVyJ106OnBsYWNlaG9sZGVyIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAjc3VibWl0LWlucHV0IHtcbiAgICAgICAgd2lkdGg6IDUwJTtcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgICBiYWNrZ3JvdW5kOiAjNGRjZmU5O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBwYWRkaW5nOiAwLjVlbTtcbiAgICAgICAgZm9udDogMS4ycmVtICdTb3VyY2UgU2FucyBQcm8nLCBzYW5zLXNlcmlmO1xuICAgICAgfVxuXG4gICAgICAjc3VibWl0LWlucHV0OmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogIzQ4Y2FlNDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdmb3JtJywge1xuICAgICAgY2xhc3NOYW1lOiAndGFzay1mb3JtJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZmllbGRJbnB1dENvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2ZpZWxkLWlucHV0LWNvbnRhaW5lcicsXG4gICAgfSk7XG5cbiAgICB0aGlzLm5hbWVJbnB1dExhYmVsID0gY3JlYXRlRWxlbWVudCgnbGFiZWwnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWlucHV0LWxhYmVsJyxcbiAgICAgIGlkOiAnbmFtZS1pbnB1dC1sYWJlbCcsXG4gICAgICBmb3I6ICduYW1lLWlucHV0JyxcbiAgICAgIGlubmVyVGV4dDogJ05hbWUnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5uYW1lSW5wdXRFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWlucHV0JyxcbiAgICAgIGlkOiAnbmFtZS1pbnB1dCcsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBuYW1lOiAnbmFtZScsXG4gICAgICBwbGFjZWhvbGRlcjogJ1Rhc2sgRGVzY3JpcHRpb24uLi4nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5wb21vZG9yb0lucHV0TGFiZWwgPSBjcmVhdGVFbGVtZW50KCdsYWJlbCcsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Rhc2staW5wdXQtbGFiZWwnLFxuICAgICAgaWQ6ICdwb21vZG9yby1pbnB1dC1sYWJlbCcsXG4gICAgICBmb3I6ICdwb21vZG9yby1pbnB1dCcsXG4gICAgICBpbm5lclRleHQ6ICdQb21vZG9yb3MnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5wb21vZG9yb0lucHV0RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgY2xhc3NOYW1lOiAndGFzay1pbnB1dCcsXG4gICAgICBpZDogJ3BvbW9kb3JvLWlucHV0JyxcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgbmFtZTogJ3BvbW9kb3JvJyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnIycsXG4gICAgICBtaW46ICcxJyxcbiAgICB9KTtcblxuICAgIHRoaXMuc3VibWl0SW5wdXRFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWlucHV0JyxcbiAgICAgIGlkOiAnc3VibWl0LWlucHV0JyxcbiAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgdmFsdWU6ICdBREQnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zaGFkb3cuYXBwZW5kKHRoaXMuc3R5bGVFbGVtZW50LCB0aGlzLmNvbnRhaW5lckVsZW1lbnQpO1xuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5hcHBlbmQoXG4gICAgICB0aGlzLmZpZWxkSW5wdXRDb250YWluZXIsXG4gICAgICB0aGlzLnN1Ym1pdElucHV0RWxlbWVudCxcbiAgICApO1xuICAgIHRoaXMuZmllbGRJbnB1dENvbnRhaW5lci5hcHBlbmQoXG4gICAgICB0aGlzLm5hbWVJbnB1dExhYmVsLFxuICAgICAgdGhpcy5uYW1lSW5wdXRFbGVtZW50LFxuICAgICAgdGhpcy5wb21vZG9yb0lucHV0TGFiZWwsXG4gICAgICB0aGlzLnBvbW9kb3JvSW5wdXRFbGVtZW50LFxuICAgICk7XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCd0YXNrLWl0ZW0tZm9ybScsIFRhc2tJdGVtRm9ybSk7XG4iLCIvKipcbiAqIEBmaWxlIHRhc2stbGlzdCB3ZWIgY29tcG9uZW50XG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSB0YXNrIGxpc3QuXG4gKiBAZXh0ZW5kcyBIVE1MRWxlbWVudFxuICovXG5jbGFzcyBUYXNrTGlzdCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuc2hhZG93ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHRoaXMuc3R5bGVFbGVtZW50LmlubmVyVGV4dCA9IGBcbiAgICAgIC5jb250YWluZXIge1xuICAgICAgICBtYXJnaW46IDFlbTtcbiAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICBmb250OiBub3JtYWwgMXJlbSAnU291cmNlIFNhbnMgUHJvJywgc2Fucy1zZXJpZjtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiAjMDBiNGQ4O1xuICAgICAgICBtYXgtd2lkdGg6IDcwMHB4O1xuICAgICAgfVxuXG4gICAgICAudGl0bGUge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICdjb250YWluZXInLFxuICAgIH0pO1xuXG4gICAgdGhpcy50aXRsZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdoMScsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RpdGxlJyxcbiAgICAgIGlubmVyVGV4dDogJ1Rhc2sgTGlzdCcsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRhc2tJdGVtTGlzdENvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXNrLWl0ZW0tY29udGFpbmVyJyxcbiAgICB9KTtcblxuICAgIHRoaXMudGFza0l0ZW1Gb3JtRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ3Rhc2staXRlbS1mb3JtJywge1xuICAgICAgY2xhc3NOYW1lOiAndGFzay1pdGVtLWZvcm0nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zaGFkb3cuYXBwZW5kKHRoaXMuc3R5bGVFbGVtZW50LCB0aGlzLmNvbnRhaW5lckVsZW1lbnQpO1xuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5hcHBlbmQoXG4gICAgICB0aGlzLnRpdGxlRWxlbWVudCxcbiAgICAgIHRoaXMudGFza0l0ZW1MaXN0Q29udGFpbmVyRWxlbWVudCxcbiAgICAgIHRoaXMudGFza0l0ZW1Gb3JtRWxlbWVudCxcbiAgICApO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1saXN0JywgVGFza0xpc3QpO1xuIiwiLyoqXG4gKiBAZmlsZSBNYW5hZ2UgdGFza2xpc3QgZm9yIHBhZ2VcbiAqIEBhdXRob3IgU2VhbiBZZVxuICovXG5cbi8qKlxuICogQSB0YXNrIG9iamVjdCBjb250YWluaW5nIGEgbmFtZSBhbmQgcG9tb2Rvcm9zIHN0YXRzXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUYXNrXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSAgICAgICAgICAgICAgICAtIG5hbWUgb2YgdGhlIHRhc2tcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB1c2VkUG9tb2Rvcm9zICAgICAgIC0gcG9tb2Rvcm9zIHVzZWQgc28gZmFyXG4gKiBAcHJvcGVydHkge251bWJlcn0gZXN0aW1hdGVkUG9tb2Rvcm9zICAtIGVzdGltYXRlZCBudW1iZXIgb2YgcG9tb3MgbmVlZGVkXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHNlbGVjdGVkICAgICAgICAgICAtIHdoZXRoZXIgdGFzayBpcyBzZWxlY3RlZFxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvVGFza0l0ZW0nO1xuaW1wb3J0ICcuLi9jb21wb25lbnRzL1Rhc2tJdGVtRm9ybSc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvVGFza0xpc3QnO1xuXG5sZXQgdGFza3MgPSBbXTtcblxuLy8gdGFzay1saXN0IGVsZW1lbnRcbi8vIHRhc2stbGlzdCBjb250YWluZXIgZWxlbWVudFxuLy8gY29udGFpbmVyIGVsZW1lbnQgZm9yIHRhc2stbGlzdC1pdGVtXG5jb25zdCB0YXNrTGlzdCA9IGNyZWF0ZUVsZW1lbnQoJ3Rhc2stbGlzdCcsIHt9KTtcbmNvbnN0IHRhc2tMaXN0Q29udGFpbmVyID0gQXJyYXkuZnJvbSh0YXNrTGlzdC5zaGFkb3dSb290LmNoaWxkTm9kZXMpLmZpbmQoXG4gIChlbGVtKSA9PiBlbGVtLmNsYXNzTmFtZSA9PT0gJ2NvbnRhaW5lcicsXG4pO1xuY29uc3QgdGFza0xpc3RJdGVtQ29udGFpbmVyID0gdGFza0xpc3RDb250YWluZXIucXVlcnlTZWxlY3RvcihcbiAgJy50YXNrLWl0ZW0tY29udGFpbmVyJyxcbik7XG5cbi8vIHRhc2staXRlbS1mb3JtIGVsZW1lbnRcbi8vIHRhc2staXRlbS1mb3JtIGNvbnRhaW5lciBlbGVtZW50XG4vLyB0YXNrLWl0ZW0tZm9ybSB0ZXh0IGlucHV0IGVsZW1lbnRzXG5jb25zdCB0YXNrSXRlbUZvcm0gPSB0YXNrTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGFzay1pdGVtLWZvcm0nKTtcbmNvbnN0IHRhc2tJdGVtRm9ybUNvbnRhaW5lciA9IEFycmF5LmZyb20oXG4gIHRhc2tJdGVtRm9ybS5zaGFkb3dSb290LmNoaWxkTm9kZXMsXG4pLmZpbmQoKGVsZW0pID0+IGVsZW0uY2xhc3NOYW1lID09PSAndGFzay1mb3JtJyk7XG5jb25zdCB0YXNrSXRlbUZvcm1JbnB1dHMgPSBBcnJheS5mcm9tKFxuICB0YXNrSXRlbUZvcm1Db250YWluZXIucXVlcnlTZWxlY3RvckFsbChcbiAgICAnLnRhc2staW5wdXRbdHlwZT1cInRleHRcIl0sIC50YXNrLWlucHV0W3R5cGU9XCJudW1iZXJcIl0nLFxuICApLFxuKS5yZWR1Y2UoKGFjYywgZWxlbSkgPT4gKHsgLi4uYWNjLCBbZWxlbS5uYW1lXTogZWxlbSB9KSwge30pO1xuXG4vKipcbiAqIEdldCBidXR0b24gZWxlbWVudHMgZnJvbSB0YXNrLWl0ZW0gZWxlbWVudFxuICogQHBhcmFtIHtUYXNrfSB0YXNrIC0gdGFzay1pdGVtIGVsZW1lbnRcbiAqIEByZXR1cm4ge3tmaW5pc2g6IEhUTUxCdXR0b25FbGVtZW50LCBkZWxldGU6IEhUTUxCdXR0b25FbGVtZW50LCBlZGl0OiBIVE1MQnV0dG9uRWxlbWVudH19IC0gYnV0dG9uIGVsZW1lbnRzIG9iamVjdFxuICovXG5jb25zdCBnZXRUYXNrSXRlbUJ1dHRvbnMgPSAodGFzaykgPT4ge1xuICBjb25zdCBidXR0b25zID0gQXJyYXkuZnJvbShcbiAgICBBcnJheS5mcm9tKHRhc2suc2hhZG93Um9vdC5jaGlsZE5vZGVzKVxuICAgICAgLmZpbmQoKGVsZW0pID0+IGVsZW0uY2xhc3NOYW1lLmluY2x1ZGVzKCdpdGVtLWNvbnRhaW5lcicpKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWJ1dHRvbicpLFxuICApO1xuXG4gIHJldHVybiB7XG4gICAgZmluaXNoOiBidXR0b25zLmZpbmQoKGJ0bikgPT4gYnRuLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2ZpbmlzaC1idXR0b24nKSxcbiAgICBkZWxldGU6IGJ1dHRvbnMuZmluZCgoYnRuKSA9PiBidG4uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnZGVsZXRlLWJ1dHRvbicpLFxuICAgIGVkaXQ6IGJ1dHRvbnMuZmluZCgoYnRuKSA9PiBidG4uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnZWRpdC1idXR0b24nKSxcbiAgfTtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGFzayBmcm9tIHRhc2tzIGFuZCBET01cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gbmFtZSBvZiB0YXNrXG4gKiBAcmV0dXJuIHt7dGFza0luZGV4OiBudW1iZXIsIGVsZW1lbnQ6IEhUTUxFbGVtZW50fX1cbiAqL1xuY29uc3QgZ2V0VGFzayA9IChuYW1lKSA9PiAoe1xuICB0YXNrSW5kZXg6IHRhc2tzLmZpbmRJbmRleCgodGFzaykgPT4gdGFzay5uYW1lID09PSBuYW1lKSxcbiAgdGFza0VsZW1lbnQ6IHRhc2tMaXN0SXRlbUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbbmFtZT1cIiR7bmFtZX1cIl1gKSxcbn0pO1xuXG4vKipcbiAqIERlbGV0aW5nIGV4aXN0aW5nIHRhc2tcbiAqIEBwYXJhbSB7VGFza30gdGFza1RvRGVsZXRlIC0gdGFzayB0byBiZSBkZWxldGVkXG4gKi9cbmNvbnN0IGRlbGV0ZVRhc2sgPSAodGFza1RvRGVsZXRlKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSB9ID0gdGFza1RvRGVsZXRlO1xuXG4gIC8vIHVwZGF0ZSBsb2NhbFN0b3JhZ2VcbiAgY29uc3QgeyB0YXNrSW5kZXgsIHRhc2tFbGVtZW50IH0gPSBnZXRUYXNrKG5hbWUpO1xuICB0YXNrcy5zcGxpY2UodGFza0luZGV4LCAxKTtcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG5cbiAgLy8gcmVtb3ZlIHRhc2sgZnJvbSBkb21cbiAgdGFza0VsZW1lbnQucmVtb3ZlKCk7XG59O1xuXG4vKipcbiAqIEFkZCB0YXNrIG9iamVjdCB0byBET00sIGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGFzay1pdGVtXG4gKiBAcGFyYW0ge1Rhc2t9IG5ld1Rhc2sgLSBuZXcgdGFzayB0byBiZSBhZGRlZFxuICovXG5jb25zdCBhZGRUYXNrVG9Eb20gPSAobmV3VGFzaykgPT4ge1xuICBjb25zdCB7IG5hbWUsIHVzZWRQb21vZG9yb3MsIGVzdGltYXRlZFBvbW9kb3JvcyB9ID0gbmV3VGFzaztcblxuICAvLyBhZGQgdGFzayB0byBkb21cbiAgY29uc3QgdGFza0l0ZW0gPSBjcmVhdGVFbGVtZW50KCd0YXNrLWl0ZW0nLCB7XG4gICAgbmFtZSxcbiAgICAndXNlZC1wb21vZG9yb3MnOiB1c2VkUG9tb2Rvcm9zLFxuICAgICdlc3RpbWF0ZWQtcG9tb2Rvcm9zJzogZXN0aW1hdGVkUG9tb2Rvcm9zLFxuICAgIHNlbGVjdGVkOiB0cnVlLFxuICB9KTtcbiAgY29uc3QgYnV0dG9ucyA9IGdldFRhc2tJdGVtQnV0dG9ucyh0YXNrSXRlbSk7XG4gIC8vIGJ1dHRvbnMuZmluaXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGVsZXRlVGFzayhuZXdUYXNrKSk7XG4gIGJ1dHRvbnMuZGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGVsZXRlVGFzayhuZXdUYXNrKSk7XG4gIGJ1dHRvbnMuZWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnZWRpdGluZyB0YXNrIScpO1xuICB9KTtcbiAgdGFza0xpc3RJdGVtQ29udGFpbmVyLmFwcGVuZCh0YXNrSXRlbSk7XG59O1xuXG4vKipcbiAqIEFkZCBuZXcgdGFzayB0byBsb2NhbFN0b3JhZ2VcbiAqIEBwYXJhbSB7VGFza30gbmV3VGFzayAtIG5ldyB0YXNrIHRvIGJlIGFkZGVkXG4gKi9cbmNvbnN0IGFkZFRhc2sgPSAobmV3VGFzaykgPT4ge1xuICAvLyB1cGRhdGUgbG9jYWxTdG9yYWdlXG4gIHRhc2tzLnB1c2gobmV3VGFzayk7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xuICBhZGRUYXNrVG9Eb20obmV3VGFzayk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBleGlzdGluZyB0YXNrXG4gKiBAcGFyYW0ge1Rhc2t9IHByZXZUYXNrIC0gdGFzayB0byBiZSB1cGRhdGVkXG4gKiBAcGFyYW0ge1Rhc2t9IG5leHRUYXNrIC0gdXBkYXRlZCB0YXNrXG4gKi9cbmNvbnN0IHVwZGF0ZVRhc2sgPSAocHJldlRhc2ssIG5leHRUYXNrKSA9PiB7XG4gIGNvbnN0IHsgbmFtZTogcHJldk5hbWUgfSA9IHByZXZUYXNrO1xuICBjb25zdCB7XG4gICAgbmFtZTogbmV4dE5hbWUsXG4gICAgdXNlZFBvbW9kb3JvcyxcbiAgICBlc3RpbWF0ZWRQb21vZG9yb3MsXG4gICAgc2VsZWN0ZWQsXG4gIH0gPSBuZXh0VGFzaztcbiAgY29uc3QgeyB0YXNrSW5kZXgsIHRhc2tFbGVtZW50IH0gPSBnZXRUYXNrKHByZXZOYW1lKTtcblxuICAvLyB1cGRhdGUgbG9jYWxTdG9yYWdlXG4gIHRhc2tzW3Rhc2tJbmRleF0gPSBuZXh0VGFzaztcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG5cbiAgLy8gdXBkYXRlIHRhc2sgaW4gZG9tXG4gIHRhc2tFbGVtZW50LnNldEF0dHJpYnV0ZSgnbmFtZScsIG5leHROYW1lKTtcbiAgdGFza0VsZW1lbnQuc2V0QXR0cmlidXRlKCd1c2VkLXBvbW9kb3JvcycsIHVzZWRQb21vZG9yb3MpO1xuICB0YXNrRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2VzdGltYXRlZC1wb21vZG9yb3MnLCBlc3RpbWF0ZWRQb21vZG9yb3MpO1xuICB0YXNrRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgc2VsZWN0ZWQpO1xufTtcblxuLyoqXG4gKiBHZXQgdGFza2xpc3RcbiAqIEByZXR1cm4ge1Rhc2tbXX0gLSBjdXJyZW50IGxpc3Qgb2YgdGFza3NcbiAqL1xuY29uc3QgZ2V0VGFza3MgPSAoKSA9PiB7XG4gIHJldHVybiB0YXNrcztcbn07XG5cbi8qKlxuICogSGFuZGxlIGZvcm0gc3VibWlzc2lvbiwgdmFsaWRhdGUgaW5wdXRcbiAqIEBwYXJhbSB7RXZlbnR9IGUgLSBzdWJtaXQgZXZlbnRcbiAqL1xuY29uc3QgaGFuZGxlVGFza0Zvcm1TdWJtaXQgPSAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnQgcGFnZSByZWxvYWRcblxuICBjb25zdCB7XG4gICAgbmFtZTogeyB2YWx1ZTogbmFtZSB9LFxuICAgIHBvbW9kb3JvOiB7IHZhbHVlOiBwb21vZG9ybyB9LFxuICB9ID0gdGFza0l0ZW1Gb3JtSW5wdXRzO1xuICBjb25zdCB0cmltbWVkTmFtZSA9IG5hbWUudHJpbSgpO1xuXG4gIC8vIGNoZWNrIGlmIGZpZWxkcyBhcmUgbm9uLWVtcHR5XG4gIGlmICghdHJpbW1lZE5hbWUpIHtcbiAgICBjb25zb2xlLmVycm9yKCd0YXNrIG5hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghcG9tb2Rvcm8pIHtcbiAgICBjb25zb2xlLmVycm9yKCd0YXNrIHBvbW9kb3JvcyBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBjaGVjayBpZiB0YXNrIGFscmVhZHkgZXhpc3RzXG4gIGlmICh0YXNrcy5zb21lKCh0YXNrKSA9PiB0YXNrLm5hbWUgPT09IHRyaW1tZWROYW1lKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoeyBuYW1lOiB0cmltbWVkTmFtZSB9LCAnIGFscmVhZHkgZGVmaW5lZCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGFkZFRhc2soe1xuICAgIG5hbWU6IHRyaW1tZWROYW1lLFxuICAgIGVzdGltYXRlZFBvbW9kb3JvczogcG9tb2Rvcm8sXG4gICAgdXNlZFBvbW9kb3JvczogMCxcbiAgICBzZWxlY3RlZDogZmFsc2UsXG4gIH0pO1xuICBPYmplY3QudmFsdWVzKHRhc2tJdGVtRm9ybUlucHV0cykuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICB9KTtcbn07XG5cbi8qKlxuICogSW5jcmVtZW50IHRoZSB1c2VkUG9tb2Rvcm9zIGZvciBvbmUgdGFza1xuICogQHBhcmFtIHtUYXNrfSB0YXNrIC0gdGFzayB0byBiZSBpbmNyZW1lbnRlZFxuICovXG5jb25zdCBpbmNyZW1lbnRQb21vZG9ybyA9ICh0YXNrKSA9PiB7XG4gIGNvbnN0IHsgdXNlZFBvbW9kb3JvcyB9ID0gdGFzaztcbiAgdXBkYXRlVGFzayh0YXNrLCB7IC4uLnRhc2ssIHVzZWRQb21vZG9yb3M6IHVzZWRQb21vZG9yb3MgKyAxIH0pO1xufTtcblxuLyoqXG4gKiBTZWxlY3QgYSB0YXNrXG4gKiBAcGFyYW0ge1Rhc2t9IHRhc2sgLSB0YXNrIHRvIGJlIHNlbGVjdGVkXG4gKi9cbmNvbnN0IHNlbGVjdFBvbW9kb3JvID0gKHRhc2spID0+IHtcbiAgY29uc3QgcHJldlNlbGVjdGVkVGFzayA9IHRhc2tzLmZpbmQoKHQpID0+IHQuc2VsZWN0ZWQpO1xuICBpZiAocHJldlNlbGVjdGVkVGFzaykge1xuICAgIHVwZGF0ZVRhc2socHJldlNlbGVjdGVkVGFzaywgeyAuLi5wcmV2U2VsZWN0ZWRUYXNrLCBzZWxlY3RlZDogZmFsc2UgfSk7XG4gIH1cbiAgdXBkYXRlVGFzayh0YXNrLCB7IC4uLnRhc2ssIHNlbGVjdGVkOiB0cnVlIH0pO1xufTtcblxuLyoqXG4gKiBJbml0aWFsaXplIHRhc2tsaXN0IG9uIHBhZ2VcbiAqIFJldHJpZXZlIHRhc2tzIGZyb20gbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXJFbGVtZW50IC0gY29udGFpbmVyIGZvciB0YXNrIGxpc3RcbiAqL1xuY29uc3QgaW5pdGlhbGl6ZVRhc2tMaXN0ID0gKGNvbnRhaW5lckVsZW1lbnQpID0+IHtcbiAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0YXNrTGlzdCk7XG4gIHRhc2tJdGVtRm9ybUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVUYXNrRm9ybVN1Ym1pdCk7XG5cbiAgLy8gcmV0cml2ZSBhbmQgYWRkIHRhc2tzIGZyb20gbG9jYWxTdG9yYWdlXG4gIGlmICghd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0YXNrcycpKSB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KFtdKSk7XG4gIH1cbiAgdGFza3MgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKSk7XG4gIHRhc2tzLmZvckVhY2goKHRhc2spID0+IGFkZFRhc2tUb0RvbSh0YXNrKSk7XG59O1xuXG5leHBvcnQge1xuICBpbml0aWFsaXplVGFza0xpc3QsXG4gIGFkZFRhc2ssXG4gIGdldFRhc2tzLFxuICB1cGRhdGVUYXNrLFxuICBkZWxldGVUYXNrLFxuICBpbmNyZW1lbnRQb21vZG9ybyxcbiAgc2VsZWN0UG9tb2Rvcm8sXG59O1xuIiwiLyoqXG4gKiBAZmlsZSBwcm9ncmVzcy1yaW5nIHdlYiBjb21wb25lbnRcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVFbGVtZW50LCB2YWxpZGF0ZU51bWJlciB9IGZyb20gJy4uL3V0aWxzJztcblxuLyoqXG4gKiBDdXN0b20gd2ViIGNvbXBvbmVudCByZXByZXNlbnRpbmcgYSBwcm9ncmVzcyByaW5nLlxuICogQGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJva2UgLSB3aWR0aCBvZiBjaXJjbGUgc3Ryb2tlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gcmFkaXVzIG9mIGNpcmNsZVxuICogQHBhcmFtIHtudW1iZXJ9IHByb2dyZXNzIC0gcHJvZ3Jlc3Mgb2YgcmluZ1xuICovXG5jbGFzcyBQcm9ncmVzc1JpbmcgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbJ3JhZGl1cycsICdzdHJva2UnLCAncHJvZ3Jlc3MnXTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnJvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICBjb25zdCBzdmdOYW1lc3BhY2UgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuICAgIHRoaXMuc3ZnRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXG4gICAgICAnc3ZnJyxcbiAgICAgIHsgY2xhc3M6ICdzdmcnIH0sXG4gICAgICB7IG5hbWVzcGFjZTogc3ZnTmFtZXNwYWNlIH0sXG4gICAgKTtcblxuICAgIHRoaXMuY2lyY2xlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXG4gICAgICAnY2lyY2xlJyxcbiAgICAgIHsgY2xhc3M6ICdjaXJjbGUnIH0sXG4gICAgICB7IG5hbWVzcGFjZTogc3ZnTmFtZXNwYWNlIH0sXG4gICAgKTtcblxuICAgIHRoaXMuX3JhZGl1cyA9IDA7XG4gICAgdGhpcy5fc3Ryb2tlID0gMDtcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDA7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnQodGhpcy5fcmFkaXVzLCB0aGlzLl9zdHJva2UsIHRoaXMuX3Byb2dyZXNzKTtcblxuICAgIHRoaXMucm9vdC5hcHBlbmQodGhpcy5zdHlsZUVsZW1lbnQsIHRoaXMuc3ZnRWxlbWVudCk7XG4gICAgdGhpcy5zdmdFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2lyY2xlRWxlbWVudCk7XG4gIH1cblxuICAvKiogVXBkYXRlcyBjb21wb25lbnQgdmlldyAqL1xuICB1cGRhdGVDb21wb25lbnQocmFkaXVzLCBzdHJva2UsIHByb2dyZXNzKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZFJhZGl1cyA9IHJhZGl1cyAtIHN0cm9rZSAqIDI7XG4gICAgY29uc3QgY2lyY3VtZmVyZW5jZSA9IG5vcm1hbGl6ZWRSYWRpdXMgKiAyICogTWF0aC5QSTtcblxuICAgIHRoaXMuc3R5bGVFbGVtZW50LmlubmVyVGV4dCA9IGBcbiAgICAgIC5zdmcge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB3aWR0aDogJHsyICogcmFkaXVzfXB4O1xuICAgICAgICBoZWlnaHQ6ICR7MiAqIHJhZGl1c31weDtcbiAgICAgIH1cblxuICAgICAgLmNpcmNsZSB7XG4gICAgICAgIHN0cm9rZTogIzAwOTViMztcbiAgICAgICAgc3Ryb2tlLWRhc2hhcnJheTogJHtjaXJjdW1mZXJlbmNlfSAke2NpcmN1bWZlcmVuY2V9O1xuICAgICAgICBzdHJva2UtZGFzaG9mZnNldDogJHsoMSAtIHByb2dyZXNzIC8gMTAwKSAqIGNpcmN1bWZlcmVuY2V9O1xuICAgICAgICBmaWxsOiB0cmFuc3BhcmVudDtcbiAgICAgICAgc3Ryb2tlLXdpZHRoOiAke3N0cm9rZX07XG5cbiAgICAgICAgdHJhbnNpdGlvbjogc3Ryb2tlLWRhc2hvZmZzZXQgMC41cztcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDUwJTtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgdGhpcy5jaXJjbGVFbGVtZW50LnNldEF0dHJpYnV0ZSgncicsIG5vcm1hbGl6ZWRSYWRpdXMpO1xuICAgIHRoaXMuY2lyY2xlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2N4JywgcmFkaXVzKTtcbiAgICB0aGlzLmNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjeScsIHJhZGl1cyk7XG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgY29uc3QgbmV3VmFsdWVOdW1iZXIgPSB2YWxpZGF0ZU51bWJlcihuZXdWYWx1ZSk7XG5cbiAgICAvLyBjaGVjayBpZiBhdHRyaWJ1dGUgdmFsdWUgaXMgbnVtYmVyXG4gICAgaWYgKG5ld1ZhbHVlTnVtYmVyID09PSBudWxsKSByZXR1cm47XG5cbiAgICAvLyB2YWxpZGF0ZSBhdHRyaWJ1dGUgcmFuZ2VzXG4gICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICBjYXNlICdyYWRpdXMnOlxuICAgICAgICBpZiAobmV3VmFsdWVOdW1iZXIgPCAwKSByZXR1cm47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3Ryb2tlJzpcbiAgICAgICAgaWYgKG5ld1ZhbHVlTnVtYmVyIDwgMCkgcmV0dXJuO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Byb2dyZXNzJzpcbiAgICAgICAgaWYgKG5hbWUgPT09ICdwcm9ncmVzcycpXG4gICAgICAgICAgaWYgKG5ld1ZhbHVlTnVtYmVyIDwgMCB8fCBuZXdWYWx1ZU51bWJlciA+IDEwMCkgcmV0dXJuO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzW2BfJHtuYW1lfWBdID0gbmV3VmFsdWVOdW1iZXI7XG4gICAgdGhpcy51cGRhdGVDb21wb25lbnQodGhpcy5fcmFkaXVzLCB0aGlzLl9zdHJva2UsIHRoaXMuX3Byb2dyZXNzKTtcbiAgfVxuXG4gIGdldCByYWRpdXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JhZGl1cztcbiAgfVxuXG4gIHNldCByYWRpdXModmFsKSB7XG4gICAgY29uc3QgbnVtID0gdmFsaWRhdGVOdW1iZXIodmFsKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgncmFkaXVzJywgbnVtKTtcbiAgfVxuXG4gIGdldCBzdHJva2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cm9rZTtcbiAgfVxuXG4gIHNldCBzdHJva2UodmFsKSB7XG4gICAgY29uc3QgbnVtID0gdmFsaWRhdGVOdW1iZXIodmFsKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgbnVtKTtcbiAgfVxuXG4gIGdldCBwcm9ncmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvZ3Jlc3M7XG4gIH1cblxuICBzZXQgcHJvZ3Jlc3ModmFsKSB7XG4gICAgY29uc3QgbnVtID0gdmFsaWRhdGVOdW1iZXIodmFsKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgncHJvZ3Jlc3MnLCBudW0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2dyZXNzUmluZztcbiIsIi8qKlxuICogQGZpbGUgTWFuYWdlIHByb2dyZXNzIHJpbmcgZm9yIHBhZ2VcbiAqL1xuXG5pbXBvcnQgUHJvZ3Jlc3NSaW5nIGZyb20gJy4uL2NvbXBvbmVudHMvUHJvZ3Jlc3NSaW5nJztcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscyc7XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3Byb2dyZXNzLXJpbmcnLCBQcm9ncmVzc1JpbmcpO1xubGV0IHByb2dyZXNzUmluZ0VsZW1lbnQ7XG5cbi8qKlxuICogU2V0IHByb2dyZXNzIHJpbmcgc2l6ZSwgYXR0YWNoIHRvIERPTVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gcHJvZ3Jlc3MgcmluZyBjb250YWluZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSByaW5nIHJhZGl1c1xuICogQHBhcmFtIHtudW1iZXJ9IHN0cm9rZSAtIHJpbmcgd2lkdGhcbiAqIEBwYXJhbSB7bnVtYmVyfSBwcm9ncmVzcyAtIGluaXRpYWwgcHJvZ3Jlc3NcbiAqL1xuY29uc3QgaW5pdGlhbGl6ZVByb2dyZXNzUmluZyA9IChcbiAgY29udGFpbmVyLFxuICByYWRpdXMgPSAwLFxuICBzdHJva2UgPSAwLFxuICBwcm9ncmVzcyA9IDAsXG4pID0+IHtcbiAgcHJvZ3Jlc3NSaW5nRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ3Byb2dyZXNzLXJpbmcnLCB7XG4gICAgcmFkaXVzLFxuICAgIHN0cm9rZSxcbiAgICBwcm9ncmVzcyxcbiAgfSk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9ncmVzc1JpbmdFbGVtZW50KTtcbn07XG5cbi8qKlxuICogR2V0IHByb2dyZXNzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IC0gY3VycmVudCBwcm9ncmVzc1xuICovXG5jb25zdCBnZXRQcm9ncmVzcyA9ICgpID0+IHByb2dyZXNzUmluZ0VsZW1lbnQucHJvZ3Jlc3M7XG5cbi8qKlxuICogU2V0IHByb2dyZXNzXG4gKiBAcGFyYW0ge251bWJlcn0gcHJvZ3Jlc3MgLSBwcm9ncmVzcyB0byBzZXRcbiAqL1xuY29uc3Qgc2V0UHJvZ3Jlc3MgPSAocHJvZ3Jlc3MpID0+IHtcbiAgcHJvZ3Jlc3NSaW5nRWxlbWVudC5wcm9ncmVzcyA9IHByb2dyZXNzO1xufTtcblxuLyoqXG4gKiBTdGFydCB0aGUgcHJvZ3Jlc3MgYmFyXG4gKiBAcGFyYW0ge251bWJlcn0gdGlja0xlbmd0aCAtIGFtb3VudCBvZiBwcm9ncmVzcyB0byBkZWNyZWFzZVxuICogQHBhcmFtIHtudW1iZXJ9IHRpY2tGcmVxdWVuY3kgLSBob3cgb2Z0ZW4gdG8gZGVjcmVhc2UgcHJvZ3Jlc3MgKGluIG1zKVxuICovXG5jb25zdCBzdGFydFByb2dyZXNzUmluZyA9ICh0aWNrTGVuZ3RoLCB0aWNrRnJlcXVlbmN5KSA9PiB7XG4gIGNvbnN0IHRpY2tlciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAocHJvZ3Jlc3NSaW5nRWxlbWVudC5wcm9ncmVzcyA8PSAwKSBjbGVhckludGVydmFsKHRpY2tlcik7XG4gICAgc2V0UHJvZ3Jlc3MocHJvZ3Jlc3NSaW5nRWxlbWVudC5wcm9ncmVzcyAtIHRpY2tMZW5ndGgpO1xuICB9LCB0aWNrRnJlcXVlbmN5KTtcbn07XG5cbmV4cG9ydCB7IGluaXRpYWxpemVQcm9ncmVzc1JpbmcsIGdldFByb2dyZXNzLCBzZXRQcm9ncmVzcywgc3RhcnRQcm9ncmVzc1JpbmcgfTtcbiIsIi8qKlxuICogQGZpbGUgRW50cnkgcG9pbnQgZm9yIGFwcGxpY2F0aW9uXG4gKi9cblxuaW1wb3J0IHsgaW5pdGlhbGl6ZVRhc2tMaXN0IH0gZnJvbSAnLi90YXNrTGlzdCc7XG5pbXBvcnQge1xuICBpbml0aWFsaXplUHJvZ3Jlc3NSaW5nLFxuICBzZXRQcm9ncmVzcyxcbiAgc3RhcnRQcm9ncmVzc1JpbmcsXG59IGZyb20gJy4vcHJvZ3Jlc3NSaW5nJztcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGluaXRpYWxpemVQcm9ncmVzc1JpbmcoXG4gICAgZG9jdW1lbnQuYm9keSxcbiAgICBNYXRoLm1pbih3aW5kb3cuaW5uZXJXaWR0aCAvIDMsIHdpbmRvdy5pbm5lckhlaWdodCAvIDMpLFxuICAgIDEwLFxuICAgIDEwMCxcbiAgKTtcbiAgaW5pdGlhbGl6ZVRhc2tMaXN0KGRvY3VtZW50LmJvZHkpO1xuICBzdGFydFByb2dyZXNzUmluZygwLjUsIDYwKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgc2V0UHJvZ3Jlc3MoNTApO1xuICB9LCA3MDAwKTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==