(()=>{"use strict";const t=({element:t,...e})=>{const n=document.createElement(t);return Object.entries(e).forEach((([t,e])=>{"innerText"===t||"innerHTML"===t?n[t]=e:n.setAttribute(t,e)})),n};class e extends HTMLElement{static get observedAttributes(){return["title","description"]}constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .container {\n        background: lightblue;\n        font-family: Roboto, sans-serif;\n        margin: 1em;\n        padding: 0.5em;\n        position: relative;\n        border-radius: 5px;\n      }\n\n      .title {\n        font-size: 1.25rem;\n      }\n\n      .description {\n        font-size: 1rem;\n        color: darkgray;\n      }\n\n      .task-button {\n        position: absolute;\n        padding: 0.5em;\n        color: rgba(51, 51, 51, 0.5);\n      }\n\n      .task-button:hover {\n        border-radius: 50%;\n        background: rgba(238, 238, 238, 0.5);\n        color: rgba(51, 51, 51, 1);\n        cursor: pointer;\n      }\n\n      #edit-button {\n        display: none;\n      }\n\n      .container:hover > #edit-button {\n        display: initial;\n        top: 0;\n        right: 0;\n      }\n\n      #finish-button {\n        bottom: 0;\n        right: 1.5em;\n      }\n\n      #delete-button {\n        bottom: 0;\n        right: 0;\n      }\n    ",this.materialIconLinkElement=t({element:"link",rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),this.containerElement=t({element:"div",class:"container"}),this.titleElement=t({element:"h1",class:"title"}),this.descriptionElement=t({element:"h2",class:"description"}),this.editTaskButton=t({element:"span",class:"material-icons task-button",id:"edit-button",innerText:"mode"}),this.finishTaskButton=t({element:"span",class:"material-icons task-button",id:"finish-button",innerText:"done"}),this.deleteTaskButton=t({element:"span",class:"material-icons task-button",id:"delete-button",innerText:"delete"}),this.shadow.append(this.materialIconLinkElement,this.styleElement,this.containerElement),this.containerElement.append(this.titleElement,this.descriptionElement,this.editTaskButton,this.finishTaskButton,this.deleteTaskButton)}attributeChangedCallback(t,e,n){switch(t){case"title":this.titleElement.innerText=n;break;case"description":this.descriptionElement.innerText=n}}}customElements.define("task-item",e);class n extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .task-form {\n        margin: 1em;\n        padding: 1em 20%;\n        font-family: Roboto, sans-serif;\n        display: flex;\n        flex-direction: column;\n        border-radius: 5px;\n      }\n\n      .task-input[type='text'] {\n        margin-bottom: 1em;\n        padding: 0.75em;\n        border-radius: 5px;\n        border: 1px solid #777;\n        font-size: 0.9rem;\n        color: #444;\n      }\n\n      .task-input[type='text']:focus {\n        border: 2px solid #0077b6;\n        outline: none;\n        box-shadow: none;\n      }\n\n      .task-input[type='text']::placeholder {\n        color: #777;\n      }\n\n      #submit-input {\n        width: 100%;\n        margin: auto;\n        background: rgba(51, 51, 51, 0.75);\n        border-radius: 5px;\n        outline: none;\n        border: none;\n        color: white;\n        padding: 1em;\n        font-size: 1rem;\n      }\n\n      #submit-input:hover {\n        cursor: pointer;\n        background: rgba(51, 51, 51, 1);\n      }\n    ",this.containerElement=t({element:"form",class:"task-form"}),this.titleInputLabel=t({element:"label",for:"title-input",innerText:"Title"}),this.titleInputElement=t({element:"input",class:"task-input",id:"title-input",type:"text",name:"title",placeholder:"task title"}),this.descriptionInputLabel=t({element:"label",for:"description-input",innerText:"Description"}),this.descriptionInputElement=t({element:"input",class:"task-input",id:"description-input",type:"text",name:"description",placeholder:"task description"}),this.submitInputElement=t({element:"input",class:"task-input",id:"submit-input",type:"submit",value:"Add"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.titleInputLabel,this.titleInputElement,this.descriptionInputLabel,this.descriptionInputElement,this.submitInputElement)}}customElements.define("task-item-form",n);class i extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.styleElement=document.createElement("style"),this.styleElement.innerText="\n      .container {\n        margin: 1em;\n        font-family: Roboto, sans-serif;\n        border: 1px solid #aaa;\n        border-radius: 5px;\n      }\n\n      .title {\n        text-align: center;\n      }\n    ",this.containerElement=t({element:"div",class:"container"}),this.titleElement=t({element:"h1",class:"title",innerText:"Task List"}),this.taskItemListContainerElement=t({element:"div",class:"task-item-container"}),this.taskItemFormElement=t({element:"task-item-form",class:"task-item-form"}),this.shadow.append(this.styleElement,this.containerElement),this.containerElement.append(this.titleElement,this.taskItemListContainerElement,this.taskItemFormElement)}}customElements.define("task-list",i);let s=[];const o=t({element:"task-list"}),r=Array.from(o.shadowRoot.childNodes).find((t=>"container"===t.getAttribute("class"))),a=r.querySelector(".task-item-container"),l=r.querySelector(".task-item-form"),d=Array.from(l.shadowRoot.childNodes).find((t=>"task-form"===t.getAttribute("class"))),m=Array.from(d.querySelectorAll('.task-input[type="text"]')).reduce(((t,e)=>({...t,[e.name]:e})),{}),c=e=>{const{title:n,description:i}=e,s=t({element:"task-item",title:n,description:i}),o=(t=>{const e=Array.from(Array.from(t.shadowRoot.childNodes).find((t=>"container"===t.getAttribute("class"))).querySelectorAll(".task-button"));return{finish:e.find((t=>"finish-button"===t.getAttribute("id"))),delete:e.find((t=>"delete-button"===t.getAttribute("id"))),edit:e.find((t=>"edit-button"===t.getAttribute("id")))}})(s);o.finish.addEventListener("click",(()=>u(e))),o.delete.addEventListener("click",(()=>u(e))),o.edit.addEventListener("click",(()=>window.alert("editting task!"))),a.append(s)},u=t=>{const{title:e,description:n}=t,i=s.findIndex((({t,d:i})=>e===t&&n===i));s.splice(i,1),window.localStorage.setItem("tasks",JSON.stringify(s)),a.querySelector(`[title="${e}"][description="${n}"]`).remove()},p=t=>{t.preventDefault();const{title:{value:e},description:{value:n}}=m;let[i,o]=[e.trim(),n.trim()];var r;i&&o?s.some((({title:t,description:e})=>i===t&&o===e))?console.error({title:i,description:o}," already defined"):(r={title:i,description:o},s.push(r),window.localStorage.setItem("tasks",JSON.stringify(s)),c(r),Object.values(m).forEach((t=>t.value=""))):console.error("task fields cannot be empty")};window.addEventListener("DOMContentLoaded",(()=>{document.body.appendChild(o),d.addEventListener("submit",p),window.localStorage.getItem("tasks")||window.localStorage.setItem("tasks",JSON.stringify([])),s=JSON.parse(window.localStorage.getItem("tasks")),s.forEach((t=>c(t)))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL2NvbXBvbmVudHMvdGFzay1pdGVtLmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL3Rhc2staXRlbS1mb3JtLmpzIiwid2VicGFjazovL2dyb3VwNi8uL3NyYy9jb21wb25lbnRzL3Rhc2stbGlzdC5qcyIsIndlYnBhY2s6Ly9ncm91cDYvLi9zcmMvc2NyaXB0cy90YXNrLWxpc3QuanMiLCJ3ZWJwYWNrOi8vZ3JvdXA2Ly4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwibmFtZXMiOlsiY3JlYXRlRWxlbWVudCIsImVsZW1lbnQiLCJlbGVtZW50VHlwZSIsImF0dHJpYnV0ZXMiLCJkb2N1bWVudCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJUYXNrSXRlbSIsIkhUTUxFbGVtZW50Iiwic3VwZXIiLCJ0aGlzIiwic2hhZG93IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsInN0eWxlRWxlbWVudCIsImlubmVyVGV4dCIsIm1hdGVyaWFsSWNvbkxpbmtFbGVtZW50IiwicmVsIiwiaHJlZiIsImNvbnRhaW5lckVsZW1lbnQiLCJjbGFzcyIsInRpdGxlRWxlbWVudCIsImRlc2NyaXB0aW9uRWxlbWVudCIsImVkaXRUYXNrQnV0dG9uIiwiaWQiLCJmaW5pc2hUYXNrQnV0dG9uIiwiZGVsZXRlVGFza0J1dHRvbiIsImFwcGVuZCIsIm5hbWUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJUYXNrSXRlbUZvcm0iLCJ0aXRsZUlucHV0TGFiZWwiLCJmb3IiLCJ0aXRsZUlucHV0RWxlbWVudCIsInR5cGUiLCJwbGFjZWhvbGRlciIsImRlc2NyaXB0aW9uSW5wdXRMYWJlbCIsImRlc2NyaXB0aW9uSW5wdXRFbGVtZW50Iiwic3VibWl0SW5wdXRFbGVtZW50IiwiVGFza0xpc3QiLCJ0YXNrSXRlbUxpc3RDb250YWluZXJFbGVtZW50IiwidGFza0l0ZW1Gb3JtRWxlbWVudCIsInRhc2tzIiwidGFza0xpc3QiLCJ0YXNrTGlzdENvbnRhaW5lciIsIkFycmF5IiwiZnJvbSIsInNoYWRvd1Jvb3QiLCJjaGlsZE5vZGVzIiwiZmluZCIsImVsZW0iLCJnZXRBdHRyaWJ1dGUiLCJ0YXNrSXRlbUxpc3RDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwidGFza0l0ZW1Gb3JtIiwidGFza0l0ZW1Gb3JtQ29udGFpbmVyIiwidGFza0l0ZW1Gb3JtSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlZHVjZSIsImFjYyIsImFkZFRhc2tUb0RvbSIsIm5ld1Rhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidGFza0l0ZW0iLCJidXR0b25zIiwidGFzayIsImZpbmlzaCIsImJ0biIsImRlbGV0ZSIsImVkaXQiLCJnZXRUYXNrSXRlbUJ1dHRvbnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVsZXRlVGFzayIsIndpbmRvdyIsImFsZXJ0IiwidGFza1RvRGVsZXRlIiwidGFza0luZGV4IiwiZmluZEluZGV4IiwidCIsImQiLCJzcGxpY2UiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlbW92ZSIsImhhbmRsZVRhc2tGb3JtU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidHJpbW1lZFRpdGxlIiwidHJpbW1lZERlc2NyaXB0aW9uIiwidHJpbSIsInNvbWUiLCJjb25zb2xlIiwiZXJyb3IiLCJwdXNoIiwidmFsdWVzIiwiaW5wdXQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJnZXRJdGVtIiwicGFyc2UiXSwibWFwcGluZ3MiOiJtQkFNQSxNQUFNQSxFQUFnQixFQUFHQyxRQUFTQyxLQUFnQkMsTUFDaEQsTUFBTUYsRUFBVUcsU0FBU0osY0FBY0UsR0FZdkMsT0FUQUcsT0FBT0MsUUFBUUgsR0FBWUksU0FBUSxFQUFFQyxF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NEIsRUFBYzNCLFlBQWE0QixHQUNwQyxxQkFoRlc5QixFQXFGUCxDQUFFQyxNQUFPNEIsRUFBYzNCLFlBQWE0QixHQW5GNUNqRCxFQUFNc0QsS0FBS25DLEdBQ1hhLE9BQU9RLGFBQWFDLFFBQVEsUUFBU0MsS0FBS0MsVUFBVTNDLElBQ3BEa0IsRUFBYUMsR0FrRmIvRCxPQUFPbUcsT0FBT3pDLEdBQW9CeEQsU0FBU2tHLEdBQVdBLEVBQU1oRyxNQUFRLE1BbkJsRTRGLFFBQVFDLE1BQU0sZ0NDNUlsQnJCLE9BQU9GLGlCQUFpQixvQkFBb0IsS0RtSzFDM0UsU0FBU3NHLEtBQUtDLFlBQVl6RCxHQUMxQlksRUFBc0JpQixpQkFBaUIsU0FBVWUsR0FHNUNiLE9BQU9RLGFBQWFtQixRQUFRLFVBQy9CM0IsT0FBT1EsYUFBYUMsUUFBUSxRQUFTQyxLQUFLQyxVQUFVLEtBRXREM0MsRUFBUTBDLEtBQUtrQixNQUFNNUIsT0FBT1EsYUFBYW1CLFFBQVEsVUFDL0MzRCxFQUFNMUMsU0FBU2tFLEdBQVNOLEVBQWFNLFMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlcyBhbiBIVE1MRWxlbWVudCBhbmQgc2V0IGl0cyBhdHRyaWJ1dGVzXG4gKiBDcmVhdGVkIHRvIHJlZHVjZSBib2lsZXJwbGF0ZSBmcm9tIGVsZW1lbnQgY3JlYXRpb25cbiAqIEBwYXJhbSB7e3N0cmluZzogc3RyaW5nfX0gcHJvcHMgLSBvYmogY29udGFpbmluZyBlbGVtZW50IG5hbWUgYW5kIGF0dHJpYnV0ZVxuICogQHJldHVybiBlbGVtZW50IC0gbmV3IEhUTUxFbGVtZW50IGNyZWF0ZWRcbiAqL1xuY29uc3QgY3JlYXRlRWxlbWVudCA9ICh7IGVsZW1lbnQ6IGVsZW1lbnRUeXBlLCAuLi5hdHRyaWJ1dGVzIH0pID0+IHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudFR5cGUpOyAvLyBjcmVhdGUgZWxlbWVudFxuXG4gIC8vIHNldCBhdHRyaWJ1dGVzXG4gIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmIChrZXkgPT09ICdpbm5lclRleHQnIHx8IGtleSA9PT0gJ2lubmVySFRNTCcpIHtcbiAgICAgIC8vIHNvbWUgcHJvcHMgbGlrZSBpbm5lckhUTUwgYXJlIG5vdCBhdHRyaWJ1dGVzIGFuZCBzaG91bGQgYmUgYXNzaWduZWQgZGlyZWN0bHlcbiAgICAgIGVsZW1lbnRba2V5XSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBlbGVtZW50O1xufTtcblxuZXhwb3J0IHsgY3JlYXRlRWxlbWVudCB9O1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzL2luZGV4LmpzJztcblxuY2xhc3MgVGFza0l0ZW0gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbJ3RpdGxlJywgJ2Rlc2NyaXB0aW9uJ107XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLy8gY3JlYXRlIHNoYWRvdyByb290XG4gICAgdGhpcy5zaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcblxuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSBgXG4gICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogbGlnaHRibHVlO1xuICAgICAgICBmb250LWZhbWlseTogUm9ib3RvLCBzYW5zLXNlcmlmO1xuICAgICAgICBtYXJnaW46IDFlbTtcbiAgICAgICAgcGFkZGluZzogMC41ZW07XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgfVxuXG4gICAgICAudGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDEuMjVyZW07XG4gICAgICB9XG5cbiAgICAgIC5kZXNjcmlwdGlvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgICAgY29sb3I6IGRhcmtncmF5O1xuICAgICAgfVxuXG4gICAgICAudGFzay1idXR0b24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHBhZGRpbmc6IDAuNWVtO1xuICAgICAgICBjb2xvcjogcmdiYSg1MSwgNTEsIDUxLCAwLjUpO1xuICAgICAgfVxuXG4gICAgICAudGFzay1idXR0b246aG92ZXIge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjM4LCAyMzgsIDIzOCwgMC41KTtcbiAgICAgICAgY29sb3I6IHJnYmEoNTEsIDUxLCA1MSwgMSk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cblxuICAgICAgI2VkaXQtYnV0dG9uIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLmNvbnRhaW5lcjpob3ZlciA+ICNlZGl0LWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IGluaXRpYWw7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICB9XG5cbiAgICAgICNmaW5pc2gtYnV0dG9uIHtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICByaWdodDogMS41ZW07XG4gICAgICB9XG5cbiAgICAgICNkZWxldGUtYnV0dG9uIHtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgdGhpcy5tYXRlcmlhbEljb25MaW5rRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgZWxlbWVudDogJ2xpbmsnLFxuICAgICAgcmVsOiAnc3R5bGVzaGVldCcsXG4gICAgICBocmVmOiAnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9pY29uP2ZhbWlseT1NYXRlcmlhbCtJY29ucycsXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdkaXYnLFxuICAgICAgY2xhc3M6ICdjb250YWluZXInLFxuICAgIH0pO1xuICAgIHRoaXMudGl0bGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnaDEnLFxuICAgICAgY2xhc3M6ICd0aXRsZScsXG4gICAgfSk7XG4gICAgdGhpcy5kZXNjcmlwdGlvbkVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdoMicsXG4gICAgICBjbGFzczogJ2Rlc2NyaXB0aW9uJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZWRpdFRhc2tCdXR0b24gPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdzcGFuJyxcbiAgICAgIGNsYXNzOiAnbWF0ZXJpYWwtaWNvbnMgdGFzay1idXR0b24nLFxuICAgICAgaWQ6ICdlZGl0LWJ1dHRvbicsXG4gICAgICBpbm5lclRleHQ6ICdtb2RlJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZmluaXNoVGFza0J1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgZWxlbWVudDogJ3NwYW4nLFxuICAgICAgY2xhc3M6ICdtYXRlcmlhbC1pY29ucyB0YXNrLWJ1dHRvbicsXG4gICAgICBpZDogJ2ZpbmlzaC1idXR0b24nLFxuICAgICAgaW5uZXJUZXh0OiAnZG9uZScsXG4gICAgfSk7XG5cbiAgICB0aGlzLmRlbGV0ZVRhc2tCdXR0b24gPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdzcGFuJyxcbiAgICAgIGNsYXNzOiAnbWF0ZXJpYWwtaWNvbnMgdGFzay1idXR0b24nLFxuICAgICAgaWQ6ICdkZWxldGUtYnV0dG9uJyxcbiAgICAgIGlubmVyVGV4dDogJ2RlbGV0ZScsXG4gICAgfSk7XG5cbiAgICB0aGlzLnNoYWRvdy5hcHBlbmQoXG4gICAgICB0aGlzLm1hdGVyaWFsSWNvbkxpbmtFbGVtZW50LFxuICAgICAgdGhpcy5zdHlsZUVsZW1lbnQsXG4gICAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQsXG4gICAgKTtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKFxuICAgICAgdGhpcy50aXRsZUVsZW1lbnQsXG4gICAgICB0aGlzLmRlc2NyaXB0aW9uRWxlbWVudCxcbiAgICAgIHRoaXMuZWRpdFRhc2tCdXR0b24sXG4gICAgICB0aGlzLmZpbmlzaFRhc2tCdXR0b24sXG4gICAgICB0aGlzLmRlbGV0ZVRhc2tCdXR0b24sXG4gICAgKTtcbiAgfVxuXG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQuaW5uZXJUZXh0ID0gbmV3VmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVzY3JpcHRpb24nOlxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uRWxlbWVudC5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgIH1cbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3Rhc2staXRlbScsIFRhc2tJdGVtKTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICcuLi91dGlscy9pbmRleC5qcyc7XG5cbmNsYXNzIFRhc2tJdGVtRm9ybSBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuc2hhZG93ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG5cbiAgICB0aGlzLnN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgdGhpcy5zdHlsZUVsZW1lbnQuaW5uZXJUZXh0ID0gYFxuICAgICAgLnRhc2stZm9ybSB7XG4gICAgICAgIG1hcmdpbjogMWVtO1xuICAgICAgICBwYWRkaW5nOiAxZW0gMjAlO1xuICAgICAgICBmb250LWZhbWlseTogUm9ib3RvLCBzYW5zLXNlcmlmO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICB9XG5cbiAgICAgIC50YXNrLWlucHV0W3R5cGU9J3RleHQnXSB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgICAgICAgcGFkZGluZzogMC43NWVtO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM3Nzc7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45cmVtO1xuICAgICAgICBjb2xvcjogIzQ0NDtcbiAgICAgIH1cblxuICAgICAgLnRhc2staW5wdXRbdHlwZT0ndGV4dCddOmZvY3VzIHtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzAwNzdiNjtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLnRhc2staW5wdXRbdHlwZT0ndGV4dCddOjpwbGFjZWhvbGRlciB7XG4gICAgICAgIGNvbG9yOiAjNzc3O1xuICAgICAgfVxuXG4gICAgICAjc3VibWl0LWlucHV0IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSg1MSwgNTEsIDUxLCAwLjc1KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICB9XG5cbiAgICAgICNzdWJtaXQtaW5wdXQ6aG92ZXIge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoNTEsIDUxLCA1MSwgMSk7XG4gICAgICB9XG4gICAgYDtcblxuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgZWxlbWVudDogJ2Zvcm0nLFxuICAgICAgY2xhc3M6ICd0YXNrLWZvcm0nLFxuICAgIH0pO1xuXG4gICAgdGhpcy50aXRsZUlucHV0TGFiZWwgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdsYWJlbCcsXG4gICAgICBmb3I6ICd0aXRsZS1pbnB1dCcsXG4gICAgICBpbm5lclRleHQ6ICdUaXRsZScsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnaW5wdXQnLFxuICAgICAgY2xhc3M6ICd0YXNrLWlucHV0JyxcbiAgICAgIGlkOiAndGl0bGUtaW5wdXQnLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgbmFtZTogJ3RpdGxlJyxcbiAgICAgIHBsYWNlaG9sZGVyOiAndGFzayB0aXRsZScsXG4gICAgfSk7XG5cbiAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRMYWJlbCA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgZWxlbWVudDogJ2xhYmVsJyxcbiAgICAgIGZvcjogJ2Rlc2NyaXB0aW9uLWlucHV0JyxcbiAgICAgIGlubmVyVGV4dDogJ0Rlc2NyaXB0aW9uJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdpbnB1dCcsXG4gICAgICBjbGFzczogJ3Rhc2staW5wdXQnLFxuICAgICAgaWQ6ICdkZXNjcmlwdGlvbi1pbnB1dCcsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBuYW1lOiAnZGVzY3JpcHRpb24nLFxuICAgICAgcGxhY2Vob2xkZXI6ICd0YXNrIGRlc2NyaXB0aW9uJyxcbiAgICB9KTtcblxuICAgIHRoaXMuc3VibWl0SW5wdXRFbGVtZW50ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICBlbGVtZW50OiAnaW5wdXQnLFxuICAgICAgY2xhc3M6ICd0YXNrLWlucHV0JyxcbiAgICAgIGlkOiAnc3VibWl0LWlucHV0JyxcbiAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgdmFsdWU6ICdBZGQnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zaGFkb3cuYXBwZW5kKHRoaXMuc3R5bGVFbGVtZW50LCB0aGlzLmNvbnRhaW5lckVsZW1lbnQpO1xuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5hcHBlbmQoXG4gICAgICB0aGlzLnRpdGxlSW5wdXRMYWJlbCxcbiAgICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQsXG4gICAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRMYWJlbCxcbiAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQsXG4gICAgICB0aGlzLnN1Ym1pdElucHV0RWxlbWVudCxcbiAgICApO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1pdGVtLWZvcm0nLCBUYXNrSXRlbUZvcm0pO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzL2luZGV4LmpzJztcblxuY2xhc3MgVGFza0xpc3QgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSBgXG4gICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAxZW07XG4gICAgICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sIHNhbnMtc2VyaWY7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNhYWE7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgIH1cblxuICAgICAgLnRpdGxlIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdkaXYnLFxuICAgICAgY2xhc3M6ICdjb250YWluZXInLFxuICAgIH0pO1xuXG4gICAgdGhpcy50aXRsZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdoMScsXG4gICAgICBjbGFzczogJ3RpdGxlJyxcbiAgICAgIGlubmVyVGV4dDogJ1Rhc2sgTGlzdCcsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRhc2tJdGVtTGlzdENvbnRhaW5lckVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgIGVsZW1lbnQ6ICdkaXYnLFxuICAgICAgY2xhc3M6ICd0YXNrLWl0ZW0tY29udGFpbmVyJyxcbiAgICB9KTtcblxuICAgIHRoaXMudGFza0l0ZW1Gb3JtRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgZWxlbWVudDogJ3Rhc2staXRlbS1mb3JtJyxcbiAgICAgIGNsYXNzOiAndGFzay1pdGVtLWZvcm0nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zaGFkb3cuYXBwZW5kKHRoaXMuc3R5bGVFbGVtZW50LCB0aGlzLmNvbnRhaW5lckVsZW1lbnQpO1xuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5hcHBlbmQoXG4gICAgICB0aGlzLnRpdGxlRWxlbWVudCxcbiAgICAgIHRoaXMudGFza0l0ZW1MaXN0Q29udGFpbmVyRWxlbWVudCxcbiAgICAgIHRoaXMudGFza0l0ZW1Gb3JtRWxlbWVudCxcbiAgICApO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGFzay1saXN0JywgVGFza0xpc3QpO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzL2luZGV4LmpzJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy90YXNrLWl0ZW0uanMnO1xuaW1wb3J0ICcuLi9jb21wb25lbnRzL3Rhc2staXRlbS1mb3JtLmpzJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy90YXNrLWxpc3QuanMnO1xuXG5sZXQgdGFza3MgPSBbXTtcblxuLy8gdGFzay1saXN0IGVsZW1lbnRcbmNvbnN0IHRhc2tMaXN0ID0gY3JlYXRlRWxlbWVudCh7XG4gIGVsZW1lbnQ6ICd0YXNrLWxpc3QnLFxufSk7XG5cbi8vIHRhc2stbGlzdCBjb250YWluZXIgZWxlbWVudFxuY29uc3QgdGFza0xpc3RDb250YWluZXIgPSBBcnJheS5mcm9tKHRhc2tMaXN0LnNoYWRvd1Jvb3QuY2hpbGROb2RlcykuZmluZChcbiAgKGVsZW0pID0+IGVsZW0uZ2V0QXR0cmlidXRlKCdjbGFzcycpID09PSAnY29udGFpbmVyJyxcbik7XG4vLyB0YXNrLWxpc3QgaXRlbSBsaXN0IGNvbnRhaW5lciBlbGVtZW50XG5jb25zdCB0YXNrSXRlbUxpc3RDb250YWluZXIgPSB0YXNrTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxuICAnLnRhc2staXRlbS1jb250YWluZXInLFxuKTtcblxuLy8gdGFzay1pdGVtLWZvcm0gZWxlbWVudFxuY29uc3QgdGFza0l0ZW1Gb3JtID0gdGFza0xpc3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnRhc2staXRlbS1mb3JtJyk7XG4vLyB0YXNrLWl0ZW0tZm9ybSBjb250YWluZXIgZWxlbWVudFxuY29uc3QgdGFza0l0ZW1Gb3JtQ29udGFpbmVyID0gQXJyYXkuZnJvbShcbiAgdGFza0l0ZW1Gb3JtLnNoYWRvd1Jvb3QuY2hpbGROb2RlcyxcbikuZmluZCgoZWxlbSkgPT4gZWxlbS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT09ICd0YXNrLWZvcm0nKTtcbi8vIHRhc2staXRlbS1mb3JtIHRleHQgaW5wdXQgZWxlbWVudHNcbmNvbnN0IHRhc2tJdGVtRm9ybUlucHV0cyA9IEFycmF5LmZyb20oXG4gIHRhc2tJdGVtRm9ybUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudGFzay1pbnB1dFt0eXBlPVwidGV4dFwiXScpLFxuKS5yZWR1Y2UoKGFjYywgZWxlbSkgPT4gKHsgLi4uYWNjLCBbZWxlbS5uYW1lXTogZWxlbSB9KSwge30pO1xuXG4vKipcbiAqIEdldCBidXR0b24gZWxlbWVudHMgZnJvbSB0YXNrLWl0ZW0gZWxlbWVudFxuICogQHBhcmFtIHt0YXNrLWl0ZW19IHRhc2sgLSB0YXNrLWl0ZW0gZWxlbWVudFxuICogQHJldHVybiB7W2J1dHRvbi1yb2xlXTogYnV0dG9ufSAtIGJ1dHRvbiBlbGVtZW50cyBvYmplY3RcbiAqL1xuY29uc3QgZ2V0VGFza0l0ZW1CdXR0b25zID0gKHRhc2spID0+IHtcbiAgY29uc3QgYnV0dG9ucyA9IEFycmF5LmZyb20oXG4gICAgQXJyYXkuZnJvbSh0YXNrLnNoYWRvd1Jvb3QuY2hpbGROb2RlcylcbiAgICAgIC5maW5kKChlbGVtKSA9PiBlbGVtLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA9PT0gJ2NvbnRhaW5lcicpXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCgnLnRhc2stYnV0dG9uJyksXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBmaW5pc2g6IGJ1dHRvbnMuZmluZCgoYnRuKSA9PiBidG4uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnZmluaXNoLWJ1dHRvbicpLFxuICAgIGRlbGV0ZTogYnV0dG9ucy5maW5kKChidG4pID0+IGJ0bi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdkZWxldGUtYnV0dG9uJyksXG4gICAgZWRpdDogYnV0dG9ucy5maW5kKChidG4pID0+IGJ0bi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdlZGl0LWJ1dHRvbicpLFxuICB9O1xufTtcblxuLyoqXG4gKiBBZGQgdGFzayBvYmplY3QgdG8gRE9NLCBhZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRhc2staXRlbVxuICogQHBhcmFtIHt0YXNrfSBuZXdUYXNrIC0gbmV3IHRhc2sgdG8gYmUgYWRkZWRcbiAqL1xuY29uc3QgYWRkVGFza1RvRG9tID0gKG5ld1Rhc2spID0+IHtcbiAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24gfSA9IG5ld1Rhc2s7XG5cbiAgLy8gYWRkIHRhc2sgdG8gZG9tXG4gIGNvbnN0IHRhc2tJdGVtID0gY3JlYXRlRWxlbWVudCh7XG4gICAgZWxlbWVudDogJ3Rhc2staXRlbScsXG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gIH0pO1xuICBjb25zdCBidXR0b25zID0gZ2V0VGFza0l0ZW1CdXR0b25zKHRhc2tJdGVtKTtcbiAgYnV0dG9ucy5maW5pc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkZWxldGVUYXNrKG5ld1Rhc2spKTtcbiAgYnV0dG9ucy5kZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkZWxldGVUYXNrKG5ld1Rhc2spKTtcbiAgYnV0dG9ucy5lZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gd2luZG93LmFsZXJ0KCdlZGl0dGluZyB0YXNrIScpKTtcbiAgdGFza0l0ZW1MaXN0Q29udGFpbmVyLmFwcGVuZCh0YXNrSXRlbSk7XG59O1xuXG4vKipcbiAqIEFkZCBuZXcgdGFzayB0byBsb2NhbFN0b3JhZ2VcbiAqIEBwYXJhbSB7dGFza30gbmV3VGFzayAtIG5ldyB0YXNrIHRvIGJlIGFkZGVkXG4gKi9cbmNvbnN0IGFkZFRhc2sgPSAobmV3VGFzaykgPT4ge1xuICAvLyB1cGRhdGUgbG9jYWxTdG9yYWdlXG4gIHRhc2tzLnB1c2gobmV3VGFzayk7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xuICBhZGRUYXNrVG9Eb20obmV3VGFzayk7XG59O1xuXG4vKipcbiAqIERlbGV0aW5nIGV4aXN0aW5nIHRhc2tcbiAqIEBwYXJhbSB7dGFza30gbmV3VGFzayAtIHRhc2sgdG8gYmUgZGVsZXRlZFxuICovXG5jb25zdCBkZWxldGVUYXNrID0gKHRhc2tUb0RlbGV0ZSkgPT4ge1xuICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiB9ID0gdGFza1RvRGVsZXRlO1xuXG4gIC8vIHVwZGF0ZSBsb2NhbFN0b3JhZ2VcbiAgY29uc3QgdGFza0luZGV4ID0gdGFza3MuZmluZEluZGV4KFxuICAgICh7IHQsIGQgfSkgPT4gdGl0bGUgPT09IHQgJiYgZGVzY3JpcHRpb24gPT09IGQsXG4gICk7XG4gIHRhc2tzLnNwbGljZSh0YXNrSW5kZXgsIDEpO1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcblxuICAvLyByZW1vdmUgdGFzayBmcm9tIGRvbVxuICBjb25zdCB0YXNrSXRlbSA9IHRhc2tJdGVtTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxuICAgIGBbdGl0bGU9XCIke3RpdGxlfVwiXVtkZXNjcmlwdGlvbj1cIiR7ZGVzY3JpcHRpb259XCJdYCxcbiAgKTtcbiAgdGFza0l0ZW0ucmVtb3ZlKCk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBleGlzdGluZyB0YXNrXG4gKiBAcGFyYW0ge3Rhc2t9IG5ld1Rhc2sgLSB0YXNrIHRvIGJlIHVwZGF0ZWRcbiAqL1xuY29uc3QgdXBkYXRlVGFzayA9IChwcmV2VGFzaywgbmV4dFRhc2spID0+IHtcbiAgY29uc3QgeyBwcmV2VGl0bGUsIHByZXZEZXNjcmlwdGlvbiB9ID0gcHJldlRhc2s7XG4gIGNvbnN0IHsgbmV4dFRpdGxlLCBuZXh0RGVzY3JpcHRpb24gfSA9IG5leHRUYXNrO1xuXG4gIC8vIHVwZGF0ZSBsb2NhbFN0b3JhZ2VcbiAgY29uc3QgdGFza0luZGV4ID0gdGFza3MuZmluZEluZGV4KFxuICAgICh7IHQsIGQgfSkgPT4gcHJldlRpdGxlID09PSB0ICYmIHByZXZEZXNjcmlwdGlvbiA9PT0gZCxcbiAgKTtcbiAgdGFza3NbdGFza0luZGV4XSA9IG5leHRUYXNrO1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcblxuICAvLyB1cGRhdGUgdGFzayBpbiBkb21cbiAgY29uc3QgdGFza0l0ZW0gPSB0YXNrSXRlbUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxuICAgIGBbdGl0bGU9XCIke3ByZXZUaXRsZX1cIl1bZGVzY3JpcHRpb249XCIke3ByZXZEZXNjcmlwdGlvbn1cIl1gLFxuICApO1xuICB0YXNrSXRlbS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgbmV4dFRpdGxlKTtcbiAgdGFza0l0ZW0uc2V0QXR0cmlidXRlKCdkZXNjcmlwdGlvbicsIG5leHREZXNjcmlwdGlvbik7XG59O1xuXG4vKipcbiAqIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb24sIHZhbGlkYXRlIGlucHV0XG4gKiBAcGFyYW0ge0V2ZW50fSBlIC0gc3VibWl0IGV2ZW50XG4gKiBAcGFyYW0ge1Rhc2t9IG5ld1Rhc2sgLSBuZXcgdGFzayB0byBiZSBzdWJtaXR0ZWRcbiAqL1xuY29uc3QgaGFuZGxlVGFza0Zvcm1TdWJtaXQgPSAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnQgcGFnZSByZWxvYWRcblxuICBjb25zdCB7XG4gICAgdGl0bGU6IHsgdmFsdWU6IHRpdGxlIH0sXG4gICAgZGVzY3JpcHRpb246IHsgdmFsdWU6IGRlc2NyaXB0aW9uIH0sXG4gIH0gPSB0YXNrSXRlbUZvcm1JbnB1dHM7XG4gIGxldCBbdHJpbW1lZFRpdGxlLCB0cmltbWVkRGVzY3JpcHRpb25dID0gW3RpdGxlLnRyaW0oKSwgZGVzY3JpcHRpb24udHJpbSgpXTtcblxuICAvLyBjaGVjayBpZiBmaWVsZHMgYXJlIG5vbi1lbXB0eVxuICBpZiAoIXRyaW1tZWRUaXRsZSB8fCAhdHJpbW1lZERlc2NyaXB0aW9uKSB7XG4gICAgY29uc29sZS5lcnJvcigndGFzayBmaWVsZHMgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gY2hlY2sgaWYgdGFzayBhbHJlYWR5IGV4aXN0c1xuICBpZiAoXG4gICAgdGFza3Muc29tZShcbiAgICAgICh7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KSA9PlxuICAgICAgICB0cmltbWVkVGl0bGUgPT09IHRpdGxlICYmIHRyaW1tZWREZXNjcmlwdGlvbiA9PT0gZGVzY3JpcHRpb24sXG4gICAgKVxuICApIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgeyB0aXRsZTogdHJpbW1lZFRpdGxlLCBkZXNjcmlwdGlvbjogdHJpbW1lZERlc2NyaXB0aW9uIH0sXG4gICAgICAnIGFscmVhZHkgZGVmaW5lZCcsXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBhZGRUYXNrKHsgdGl0bGU6IHRyaW1tZWRUaXRsZSwgZGVzY3JpcHRpb246IHRyaW1tZWREZXNjcmlwdGlvbiB9KTtcbiAgT2JqZWN0LnZhbHVlcyh0YXNrSXRlbUZvcm1JbnB1dHMpLmZvckVhY2goKGlucHV0KSA9PiAoaW5wdXQudmFsdWUgPSAnJykpO1xufTtcblxuY29uc3QgaW5pdGlhbGl6ZVRhc2tMaXN0ID0gKCkgPT4ge1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRhc2tMaXN0KTtcbiAgdGFza0l0ZW1Gb3JtQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZVRhc2tGb3JtU3VibWl0KTtcblxuICAvLyByZXRyaXZlIGFuZCBhZGQgdGFza3MgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkoW10pKTtcbiAgfVxuICB0YXNrcyA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0YXNrcycpKTtcbiAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4gYWRkVGFza1RvRG9tKHRhc2spKTtcbn07XG5cbmV4cG9ydCB7IGluaXRpYWxpemVUYXNrTGlzdCB9O1xuIiwiaW1wb3J0IHsgaW5pdGlhbGl6ZVRhc2tMaXN0IH0gZnJvbSAnLi90YXNrLWxpc3QuanMnO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgaW5pdGlhbGl6ZVRhc2tMaXN0KCk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=